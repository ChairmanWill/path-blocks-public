var Lb=Object.defineProperty;var Fb=(r,t,e)=>t in r?Lb(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ge=(r,t,e)=>(Fb(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();var me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ls(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Nb(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),e}var $p={},Gx={exports:{}},Ar={},Hx={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=Symbol.for("react.element"),Bb=Symbol.for("react.portal"),kb=Symbol.for("react.fragment"),Db=Symbol.for("react.strict_mode"),Ub=Symbol.for("react.profiler"),Gb=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),Xb=Symbol.for("react.suspense"),zb=Symbol.for("react.memo"),jb=Symbol.for("react.lazy"),fv=Symbol.iterator;function Vb(r){return r===null||typeof r!="object"?null:(r=fv&&r[fv]||r["@@iterator"],typeof r=="function"?r:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xx=Object.assign,zx={};function Fa(r,t,e){this.props=r,this.context=t,this.refs=zx,this.updater=e||$x}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};Fa.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function jx(){}jx.prototype=Fa.prototype;function jg(r,t,e){this.props=r,this.context=t,this.refs=zx,this.updater=e||$x}var Vg=jg.prototype=new jx;Vg.constructor=jg;Xx(Vg,Fa.prototype);Vg.isPureReactComponent=!0;var pv=Array.isArray,Vx=Object.prototype.hasOwnProperty,Wg={current:null},Wx={key:!0,ref:!0,__self:!0,__source:!0};function Yx(r,t,e){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Vx.call(t,i)&&!Wx.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=e;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];n.children=l}if(r&&r.defaultProps)for(i in a=r.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:qu,type:r,key:s,ref:o,props:n,_owner:Wg.current}}function Wb(r,t){return{$$typeof:qu,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Yg(r){return typeof r=="object"&&r!==null&&r.$$typeof===qu}function Yb(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(e){return t[e]})}var mv=/\/+/g;function df(r,t){return typeof r=="object"&&r!==null&&r.key!=null?Yb(""+r.key):t.toString(36)}function lc(r,t,e,i,n){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case qu:case Bb:o=!0}}if(o)return o=r,n=n(o),r=i===""?"."+df(o,0):i,pv(n)?(e="",r!=null&&(e=r.replace(mv,"$&/")+"/"),lc(n,t,e,"",function(u){return u})):n!=null&&(Yg(n)&&(n=Wb(n,e+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(mv,"$&/")+"/")+r)),t.push(n)),1;if(o=0,i=i===""?".":i+":",pv(r))for(var a=0;a<r.length;a++){s=r[a];var l=i+df(s,a);o+=lc(s,t,e,l,n)}else if(l=Vb(r),typeof l=="function")for(r=l.call(r),a=0;!(s=r.next()).done;)s=s.value,l=i+df(s,a++),o+=lc(s,t,e,l,n);else if(s==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fh(r,t,e){if(r==null)return r;var i=[],n=0;return lc(r,i,"","",function(s){return t.call(e,s,n++)}),i}function Kb(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(e){(r._status===0||r._status===-1)&&(r._status=1,r._result=e)},function(e){(r._status===0||r._status===-1)&&(r._status=2,r._result=e)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var er={current:null},uc={transition:null},qb={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:uc,ReactCurrentOwner:Wg};Ct.Children={map:fh,forEach:function(r,t,e){fh(r,function(){t.apply(this,arguments)},e)},count:function(r){var t=0;return fh(r,function(){t++}),t},toArray:function(r){return fh(r,function(t){return t})||[]},only:function(r){if(!Yg(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Ct.Component=Fa;Ct.Fragment=kb;Ct.Profiler=Ub;Ct.PureComponent=jg;Ct.StrictMode=Db;Ct.Suspense=Xb;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;Ct.cloneElement=function(r,t,e){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var i=Xx({},r.props),n=r.key,s=r.ref,o=r._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Wg.current),t.key!==void 0&&(n=""+t.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(l in t)Vx.call(t,l)&&!Wx.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:qu,type:r.type,key:n,ref:s,props:i,_owner:o}};Ct.createContext=function(r){return r={$$typeof:Hb,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:Gb,_context:r},r.Consumer=r};Ct.createElement=Yx;Ct.createFactory=function(r){var t=Yx.bind(null,r);return t.type=r,t};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(r){return{$$typeof:$b,render:r}};Ct.isValidElement=Yg;Ct.lazy=function(r){return{$$typeof:jb,_payload:{_status:-1,_result:r},_init:Kb}};Ct.memo=function(r,t){return{$$typeof:zb,type:r,compare:t===void 0?null:t}};Ct.startTransition=function(r){var t=uc.transition;uc.transition={};try{r()}finally{uc.transition=t}};Ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ct.useCallback=function(r,t){return er.current.useCallback(r,t)};Ct.useContext=function(r){return er.current.useContext(r)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(r){return er.current.useDeferredValue(r)};Ct.useEffect=function(r,t){return er.current.useEffect(r,t)};Ct.useId=function(){return er.current.useId()};Ct.useImperativeHandle=function(r,t,e){return er.current.useImperativeHandle(r,t,e)};Ct.useInsertionEffect=function(r,t){return er.current.useInsertionEffect(r,t)};Ct.useLayoutEffect=function(r,t){return er.current.useLayoutEffect(r,t)};Ct.useMemo=function(r,t){return er.current.useMemo(r,t)};Ct.useReducer=function(r,t,e){return er.current.useReducer(r,t,e)};Ct.useRef=function(r){return er.current.useRef(r)};Ct.useState=function(r){return er.current.useState(r)};Ct.useSyncExternalStore=function(r,t,e){return er.current.useSyncExternalStore(r,t,e)};Ct.useTransition=function(){return er.current.useTransition()};Ct.version="18.2.0";Hx.exports=Ct;var ui=Hx.exports,Kx={exports:{}},qx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(N,Q){var L=N.length;N.push(Q);t:for(;0<L;){var D=L-1>>>1,nt=N[D];if(0<n(nt,Q))N[D]=Q,N[L]=nt,L=D;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var Q=N[0],L=N.pop();if(L!==Q){N[0]=L;t:for(var D=0,nt=N.length,_t=nt>>>1;D<_t;){var yt=2*(D+1)-1,Ut=N[yt],It=yt+1,Bt=N[It];if(0>n(Ut,L))It<nt&&0>n(Bt,Ut)?(N[D]=Bt,N[It]=L,D=It):(N[D]=Ut,N[yt]=L,D=yt);else if(It<nt&&0>n(Bt,L))N[D]=Bt,N[It]=L,D=It;else break t}}return Q}function n(N,Q){var L=N.sortIndex-Q.sortIndex;return L!==0?L:N.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,f=3,p=!1,m=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(N){for(var Q=e(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=N)i(u),Q.sortIndex=Q.expirationTime,t(l,Q);else break;Q=e(u)}}function w(N){if(x=!1,_(N),!m)if(e(l)!==null)m=!0,at(A);else{var Q=e(u);Q!==null&&et(w,Q.startTime-N)}}function A(N,Q){m=!1,x&&(x=!1,v(P),P=-1),p=!0;var L=f;try{for(_(Q),c=e(l);c!==null&&(!(c.expirationTime>Q)||N&&!st());){var D=c.callback;if(typeof D=="function"){c.callback=null,f=c.priorityLevel;var nt=D(c.expirationTime<=Q);Q=r.unstable_now(),typeof nt=="function"?c.callback=nt:c===e(l)&&i(l),_(Q)}else i(l);c=e(l)}if(c!==null)var _t=!0;else{var yt=e(u);yt!==null&&et(w,yt.startTime-Q),_t=!1}return _t}finally{c=null,f=L,p=!1}}var M=!1,I=null,P=-1,U=5,B=-1;function st(){return!(r.unstable_now()-B<U)}function X(){if(I!==null){var N=r.unstable_now();B=N;var Q=!0;try{Q=I(!0,N)}finally{Q?O():(M=!1,I=null)}}else M=!1}var O;if(typeof E=="function")O=function(){E(X)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,tt=G.port2;G.port1.onmessage=X,O=function(){tt.postMessage(null)}}else O=function(){T(X,0)};function at(N){I=N,M||(M=!0,O())}function et(N,Q){P=T(function(){N(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_continueExecution=function(){m||p||(m=!0,at(A))},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return e(l)},r.unstable_next=function(N){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var L=f;f=Q;try{return N()}finally{f=L}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(N,Q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=f;f=N;try{return Q()}finally{f=L}},r.unstable_scheduleCallback=function(N,Q,L){var D=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,N){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=L+nt,N={id:h++,callback:Q,priorityLevel:N,startTime:L,expirationTime:nt,sortIndex:-1},L>D?(N.sortIndex=L,t(u,N),e(l)===null&&N===e(u)&&(x?(v(P),P=-1):x=!0,et(w,L-D))):(N.sortIndex=nt,t(l,N),m||p||(m=!0,at(A))),N},r.unstable_shouldYield=st,r.unstable_wrapCallback=function(N){var Q=f;return function(){var L=f;f=Q;try{return N.apply(this,arguments)}finally{f=L}}}})(qx);Kx.exports=qx;var Zb=Kx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=ui,wr=Zb;function H(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qx=new Set,Eu={};function vo(r,t){Ta(r,t),Ta(r+"Capture",t)}function Ta(r,t){for(Eu[r]=t,r=0;r<t.length;r++)Qx.add(t[r])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xp=Object.prototype.hasOwnProperty,Qb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gv={},yv={};function Jb(r){return Xp.call(yv,r)?!0:Xp.call(gv,r)?!1:Qb.test(r)?yv[r]=!0:(gv[r]=!0,!1)}function tS(r,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function eS(r,t,e,i){if(t===null||typeof t>"u"||tS(r,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rr(r,t,e,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=e,this.propertyName=r,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){De[r]=new rr(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];De[t]=new rr(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){De[r]=new rr(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){De[r]=new rr(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){De[r]=new rr(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){De[r]=new rr(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){De[r]=new rr(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){De[r]=new rr(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){De[r]=new rr(r,5,!1,r.toLowerCase(),null,!1,!1)});var Kg=/[\-:]([a-z])/g;function qg(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(Kg,qg);De[t]=new rr(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(Kg,qg);De[t]=new rr(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(Kg,qg);De[t]=new rr(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){De[r]=new rr(r,1,!1,r.toLowerCase(),null,!1,!1)});De.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){De[r]=new rr(r,1,!1,r.toLowerCase(),null,!0,!0)});function Zg(r,t,e,i){var n=De.hasOwnProperty(t)?De[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eS(t,e,n,i)&&(e=null),i||n===null?Jb(t)&&(e===null?r.removeAttribute(t):r.setAttribute(t,""+e)):n.mustUseProperty?r[n.propertyName]=e===null?n.type===3?!1:"":e:(t=n.attributeName,i=n.attributeNamespace,e===null?r.removeAttribute(t):(n=n.type,e=n===3||n===4&&e===!0?"":""+e,i?r.setAttributeNS(i,t,e):r.setAttribute(t,e))))}var wn=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ph=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),Qg=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),Jx=Symbol.for("react.provider"),t1=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),jp=Symbol.for("react.suspense"),Vp=Symbol.for("react.suspense_list"),ty=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),e1=Symbol.for("react.offscreen"),vv=Symbol.iterator;function Ml(r){return r===null||typeof r!="object"?null:(r=vv&&r[vv]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Object.assign,ff;function Kl(r){if(ff===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ff=t&&t[1]||""}return`
`+ff+r}var pf=!1;function mf(r,t){if(!r||pf)return"";pf=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(r,[],t)}else{try{t.call()}catch(u){i=u}r.call(t.prototype)}else{try{throw Error()}catch(u){i=u}r()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=a);break}}}finally{pf=!1,Error.prepareStackTrace=e}return(r=r?r.displayName||r.name:"")?Kl(r):""}function rS(r){switch(r.tag){case 5:return Kl(r.type);case 16:return Kl("Lazy");case 13:return Kl("Suspense");case 19:return Kl("SuspenseList");case 0:case 2:case 15:return r=mf(r.type,!1),r;case 11:return r=mf(r.type.render,!1),r;case 1:return r=mf(r.type,!0),r;default:return""}}function Wp(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Wo:return"Fragment";case Vo:return"Portal";case zp:return"Profiler";case Qg:return"StrictMode";case jp:return"Suspense";case Vp:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case t1:return(r.displayName||"Context")+".Consumer";case Jx:return(r._context.displayName||"Context")+".Provider";case Jg:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ty:return t=r.displayName||null,t!==null?t:Wp(r.type)||"Memo";case Bn:t=r._payload,r=r._init;try{return Wp(r(t))}catch{}}return null}function iS(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wp(t);case 8:return t===Qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ns(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function r1(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nS(r){var t=r1(r)?"checked":"value",e=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),i=""+r[t];if(!r.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var n=e.get,s=e.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(r,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function mh(r){r._valueTracker||(r._valueTracker=nS(r))}function i1(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return r&&(i=r1(r)?r.checked?"true":"false":r.value),r=i,r!==e?(t.setValue(r),!0):!1}function Nc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Yp(r,t){var e=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??r._wrapperState.initialChecked})}function _v(r,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=ns(t.value!=null?t.value:e),r._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function n1(r,t){t=t.checked,t!=null&&Zg(r,"checked",t,!1)}function Kp(r,t){n1(r,t);var e=ns(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+e):r.value!==""+e&&(r.value=""+e);else if(i==="submit"||i==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?qp(r,t.type,e):t.hasOwnProperty("defaultValue")&&qp(r,t.type,ns(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function xv(r,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,e||t===r.value||(r.value=t),r.defaultValue=t}e=r.name,e!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,e!==""&&(r.name=e)}function qp(r,t,e){(t!=="number"||Nc(r.ownerDocument)!==r)&&(e==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+e&&(r.defaultValue=""+e))}var ql=Array.isArray;function oa(r,t,e,i){if(r=r.options,t){t={};for(var n=0;n<e.length;n++)t["$"+e[n]]=!0;for(e=0;e<r.length;e++)n=t.hasOwnProperty("$"+r[e].value),r[e].selected!==n&&(r[e].selected=n),n&&i&&(r[e].defaultSelected=!0)}else{for(e=""+ns(e),t=null,n=0;n<r.length;n++){if(r[n].value===e){r[n].selected=!0,i&&(r[n].defaultSelected=!0);return}t!==null||r[n].disabled||(t=r[n])}t!==null&&(t.selected=!0)}}function Zp(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ev(r,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(H(92));if(ql(e)){if(1<e.length)throw Error(H(93));e=e[0]}t=e}t==null&&(t=""),e=t}r._wrapperState={initialValue:ns(e)}}function s1(r,t){var e=ns(t.value),i=ns(t.defaultValue);e!=null&&(e=""+e,e!==r.value&&(r.value=e),t.defaultValue==null&&r.defaultValue!==e&&(r.defaultValue=e)),i!=null&&(r.defaultValue=""+i)}function Tv(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function o1(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qp(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?o1(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var gh,a1=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,n){MSApp.execUnsafeLocalFunction(function(){return r(t,e,i,n)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(gh=gh||document.createElement("div"),gh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gh.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function Tu(r,t){if(t){var e=r.firstChild;if(e&&e===r.lastChild&&e.nodeType===3){e.nodeValue=t;return}}r.textContent=t}var au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sS=["Webkit","ms","Moz","O"];Object.keys(au).forEach(function(r){sS.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),au[t]=au[r]})});function l1(r,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||au.hasOwnProperty(r)&&au[r]?(""+t).trim():t+"px"}function u1(r,t){r=r.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,n=l1(e,t[e],i);e==="float"&&(e="cssFloat"),i?r.setProperty(e,n):r[e]=n}}var oS=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jp(r,t){if(t){if(oS[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function tm(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var em=null;function ey(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var rm=null,aa=null,la=null;function wv(r){if(r=Ju(r)){if(typeof rm!="function")throw Error(H(280));var t=r.stateNode;t&&(t=$d(t),rm(r.stateNode,r.type,t))}}function h1(r){aa?la?la.push(r):la=[r]:aa=r}function c1(){if(aa){var r=aa,t=la;if(la=aa=null,wv(r),t)for(r=0;r<t.length;r++)wv(t[r])}}function d1(r,t){return r(t)}function f1(){}var gf=!1;function p1(r,t,e){if(gf)return r(t,e);gf=!0;try{return d1(r,t,e)}finally{gf=!1,(aa!==null||la!==null)&&(f1(),c1())}}function wu(r,t){var e=r.stateNode;if(e===null)return null;var i=$d(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(r=r.type,i=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!i;break t;default:r=!1}if(r)return null;if(e&&typeof e!="function")throw Error(H(231,t,typeof e));return e}var im=!1;if(gn)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){im=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{im=!1}function aS(r,t,e,i,n,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var lu=!1,Bc=null,kc=!1,nm=null,lS={onError:function(r){lu=!0,Bc=r}};function uS(r,t,e,i,n,s,o,a,l){lu=!1,Bc=null,aS.apply(lS,arguments)}function hS(r,t,e,i,n,s,o,a,l){if(uS.apply(this,arguments),lu){if(lu){var u=Bc;lu=!1,Bc=null}else throw Error(H(198));kc||(kc=!0,nm=u)}}function _o(r){var t=r,e=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(e=t.return),r=t.return;while(r)}return t.tag===3?e:null}function m1(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function bv(r){if(_o(r)!==r)throw Error(H(188))}function cS(r){var t=r.alternate;if(!t){if(t=_o(r),t===null)throw Error(H(188));return t!==r?null:r}for(var e=r,i=t;;){var n=e.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){e=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===e)return bv(n),r;if(s===i)return bv(n),t;s=s.sibling}throw Error(H(188))}if(e.return!==i.return)e=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===e){o=!0,e=n,i=s;break}if(a===i){o=!0,i=n,e=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===e){o=!0,e=s,i=n;break}if(a===i){o=!0,i=s,e=n;break}a=a.sibling}if(!o)throw Error(H(189))}}if(e.alternate!==i)throw Error(H(190))}if(e.tag!==3)throw Error(H(188));return e.stateNode.current===e?r:t}function g1(r){return r=cS(r),r!==null?y1(r):null}function y1(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=y1(r);if(t!==null)return t;r=r.sibling}return null}var v1=wr.unstable_scheduleCallback,Sv=wr.unstable_cancelCallback,dS=wr.unstable_shouldYield,fS=wr.unstable_requestPaint,ue=wr.unstable_now,pS=wr.unstable_getCurrentPriorityLevel,ry=wr.unstable_ImmediatePriority,_1=wr.unstable_UserBlockingPriority,Dc=wr.unstable_NormalPriority,mS=wr.unstable_LowPriority,x1=wr.unstable_IdlePriority,Dd=null,Di=null;function gS(r){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(Dd,r,void 0,(r.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:_S,yS=Math.log,vS=Math.LN2;function _S(r){return r>>>=0,r===0?32:31-(yS(r)/vS|0)|0}var yh=64,vh=4194304;function Zl(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Uc(r,t){var e=r.pendingLanes;if(e===0)return 0;var i=0,n=r.suspendedLanes,s=r.pingedLanes,o=e&268435455;if(o!==0){var a=o&~n;a!==0?i=Zl(a):(s&=o,s!==0&&(i=Zl(s)))}else o=e&~n,o!==0?i=Zl(o):s!==0&&(i=Zl(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=e&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=i;0<t;)e=31-di(t),n=1<<e,i|=r[e],t&=~n;return i}function xS(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ES(r,t){for(var e=r.suspendedLanes,i=r.pingedLanes,n=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-di(s),a=1<<o,l=n[o];l===-1?(!(a&e)||a&i)&&(n[o]=xS(a,t)):l<=t&&(r.expiredLanes|=a),s&=~a}}function sm(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function E1(){var r=yh;return yh<<=1,!(yh&4194240)&&(yh=64),r}function yf(r){for(var t=[],e=0;31>e;e++)t.push(r);return t}function Zu(r,t,e){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-di(t),r[t]=e}function TS(r,t){var e=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var i=r.eventTimes;for(r=r.expirationTimes;0<e;){var n=31-di(e),s=1<<n;t[n]=0,i[n]=-1,r[n]=-1,e&=~s}}function iy(r,t){var e=r.entangledLanes|=t;for(r=r.entanglements;e;){var i=31-di(e),n=1<<i;n&t|r[i]&t&&(r[i]|=t),e&=~n}}var Dt=0;function T1(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var w1,ny,b1,S1,A1,om=!1,_h=[],Yn=null,Kn=null,qn=null,bu=new Map,Su=new Map,Gn=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Av(r,t){switch(r){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":bu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(t.pointerId)}}function Fl(r,t,e,i,n,s){return r===null||r.nativeEvent!==s?(r={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Ju(t),t!==null&&ny(t)),r):(r.eventSystemFlags|=i,t=r.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),r)}function bS(r,t,e,i,n){switch(t){case"focusin":return Yn=Fl(Yn,r,t,e,i,n),!0;case"dragenter":return Kn=Fl(Kn,r,t,e,i,n),!0;case"mouseover":return qn=Fl(qn,r,t,e,i,n),!0;case"pointerover":var s=n.pointerId;return bu.set(s,Fl(bu.get(s)||null,r,t,e,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Su.set(s,Fl(Su.get(s)||null,r,t,e,i,n)),!0}return!1}function C1(r){var t=qs(r.target);if(t!==null){var e=_o(t);if(e!==null){if(t=e.tag,t===13){if(t=m1(e),t!==null){r.blockedOn=t,A1(r.priority,function(){b1(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){r.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}r.blockedOn=null}function hc(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var e=am(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(e===null){e=r.nativeEvent;var i=new e.constructor(e.type,e);em=i,e.target.dispatchEvent(i),em=null}else return t=Ju(e),t!==null&&ny(t),r.blockedOn=e,!1;t.shift()}return!0}function Cv(r,t,e){hc(r)&&e.delete(t)}function SS(){om=!1,Yn!==null&&hc(Yn)&&(Yn=null),Kn!==null&&hc(Kn)&&(Kn=null),qn!==null&&hc(qn)&&(qn=null),bu.forEach(Cv),Su.forEach(Cv)}function Nl(r,t){r.blockedOn===t&&(r.blockedOn=null,om||(om=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,SS)))}function Au(r){function t(n){return Nl(n,r)}if(0<_h.length){Nl(_h[0],r);for(var e=1;e<_h.length;e++){var i=_h[e];i.blockedOn===r&&(i.blockedOn=null)}}for(Yn!==null&&Nl(Yn,r),Kn!==null&&Nl(Kn,r),qn!==null&&Nl(qn,r),bu.forEach(t),Su.forEach(t),e=0;e<Gn.length;e++)i=Gn[e],i.blockedOn===r&&(i.blockedOn=null);for(;0<Gn.length&&(e=Gn[0],e.blockedOn===null);)C1(e),e.blockedOn===null&&Gn.shift()}var ua=wn.ReactCurrentBatchConfig,Gc=!0;function AS(r,t,e,i){var n=Dt,s=ua.transition;ua.transition=null;try{Dt=1,sy(r,t,e,i)}finally{Dt=n,ua.transition=s}}function CS(r,t,e,i){var n=Dt,s=ua.transition;ua.transition=null;try{Dt=4,sy(r,t,e,i)}finally{Dt=n,ua.transition=s}}function sy(r,t,e,i){if(Gc){var n=am(r,t,e,i);if(n===null)Cf(r,t,i,Hc,e),Av(r,i);else if(bS(n,r,t,e,i))i.stopPropagation();else if(Av(r,i),t&4&&-1<wS.indexOf(r)){for(;n!==null;){var s=Ju(n);if(s!==null&&w1(s),s=am(r,t,e,i),s===null&&Cf(r,t,i,Hc,e),s===n)break;n=s}n!==null&&i.stopPropagation()}else Cf(r,t,i,null,e)}}var Hc=null;function am(r,t,e,i){if(Hc=null,r=ey(i),r=qs(r),r!==null)if(t=_o(r),t===null)r=null;else if(e=t.tag,e===13){if(r=m1(t),r!==null)return r;r=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Hc=r,null}function P1(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pS()){case ry:return 1;case _1:return 4;case Dc:case mS:return 16;case x1:return 536870912;default:return 16}default:return 16}}var Xn=null,oy=null,cc=null;function I1(){if(cc)return cc;var r,t=oy,e=t.length,i,n="value"in Xn?Xn.value:Xn.textContent,s=n.length;for(r=0;r<e&&t[r]===n[r];r++);var o=e-r;for(i=1;i<=o&&t[e-i]===n[s-i];i++);return cc=n.slice(r,1<i?1-i:void 0)}function dc(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function xh(){return!0}function Pv(){return!1}function Cr(r){function t(e,i,n,s,o){this._reactName=e,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(e=r[a],this[a]=e?e(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xh:Pv,this.isPropagationStopped=Pv,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=xh)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=xh)},persist:function(){},isPersistent:xh}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ay=Cr(Na),Qu=ee({},Na,{view:0,detail:0}),PS=Cr(Qu),vf,_f,Bl,Ud=ee({},Qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ly,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Bl&&(Bl&&r.type==="mousemove"?(vf=r.screenX-Bl.screenX,_f=r.screenY-Bl.screenY):_f=vf=0,Bl=r),vf)},movementY:function(r){return"movementY"in r?r.movementY:_f}}),Iv=Cr(Ud),IS=ee({},Ud,{dataTransfer:0}),RS=Cr(IS),OS=ee({},Qu,{relatedTarget:0}),xf=Cr(OS),MS=ee({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),LS=Cr(MS),FS=ee({},Na,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),NS=Cr(FS),BS=ee({},Na,{data:0}),Rv=Cr(BS),kS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GS(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=US[r])?!!t[r]:!1}function ly(){return GS}var HS=ee({},Qu,{key:function(r){if(r.key){var t=kS[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=dc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?DS[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ly,charCode:function(r){return r.type==="keypress"?dc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$S=Cr(HS),XS=ee({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ov=Cr(XS),zS=ee({},Qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ly}),jS=Cr(zS),VS=ee({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),WS=Cr(VS),YS=ee({},Ud,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),KS=Cr(YS),qS=[9,13,27,32],uy=gn&&"CompositionEvent"in window,uu=null;gn&&"documentMode"in document&&(uu=document.documentMode);var ZS=gn&&"TextEvent"in window&&!uu,R1=gn&&(!uy||uu&&8<uu&&11>=uu),Mv=" ",Lv=!1;function O1(r,t){switch(r){case"keyup":return qS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M1(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Yo=!1;function QS(r,t){switch(r){case"compositionend":return M1(t);case"keypress":return t.which!==32?null:(Lv=!0,Mv);case"textInput":return r=t.data,r===Mv&&Lv?null:r;default:return null}}function JS(r,t){if(Yo)return r==="compositionend"||!uy&&O1(r,t)?(r=I1(),cc=oy=Xn=null,Yo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return R1&&t.locale!=="ko"?null:t.data;default:return null}}var tA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fv(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!tA[r.type]:t==="textarea"}function L1(r,t,e,i){h1(i),t=$c(t,"onChange"),0<t.length&&(e=new ay("onChange","change",null,e,i),r.push({event:e,listeners:t}))}var hu=null,Cu=null;function eA(r){z1(r,0)}function Gd(r){var t=Zo(r);if(i1(t))return r}function rA(r,t){if(r==="change")return t}var F1=!1;if(gn){var Ef;if(gn){var Tf="oninput"in document;if(!Tf){var Nv=document.createElement("div");Nv.setAttribute("oninput","return;"),Tf=typeof Nv.oninput=="function"}Ef=Tf}else Ef=!1;F1=Ef&&(!document.documentMode||9<document.documentMode)}function Bv(){hu&&(hu.detachEvent("onpropertychange",N1),Cu=hu=null)}function N1(r){if(r.propertyName==="value"&&Gd(Cu)){var t=[];L1(t,Cu,r,ey(r)),p1(eA,t)}}function iA(r,t,e){r==="focusin"?(Bv(),hu=t,Cu=e,hu.attachEvent("onpropertychange",N1)):r==="focusout"&&Bv()}function nA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Gd(Cu)}function sA(r,t){if(r==="click")return Gd(t)}function oA(r,t){if(r==="input"||r==="change")return Gd(t)}function aA(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var mi=typeof Object.is=="function"?Object.is:aA;function Pu(r,t){if(mi(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var e=Object.keys(r),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var n=e[i];if(!Xp.call(t,n)||!mi(r[n],t[n]))return!1}return!0}function kv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Dv(r,t){var e=kv(r);r=0;for(var i;e;){if(e.nodeType===3){if(i=r+e.textContent.length,r<=t&&i>=t)return{node:e,offset:t-r};r=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=kv(e)}}function B1(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?B1(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function k1(){for(var r=window,t=Nc();t instanceof r.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)r=t.contentWindow;else break;t=Nc(r.document)}return t}function hy(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function lA(r){var t=k1(),e=r.focusedElem,i=r.selectionRange;if(t!==e&&e&&e.ownerDocument&&B1(e.ownerDocument.documentElement,e)){if(i!==null&&hy(e)){if(t=i.start,r=i.end,r===void 0&&(r=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(r,e.value.length);else if(r=(t=e.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var n=e.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!r.extend&&s>i&&(n=i,i=s,s=n),n=Dv(e,s);var o=Dv(e,i);n&&o&&(r.rangeCount!==1||r.anchorNode!==n.node||r.anchorOffset!==n.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),r.removeAllRanges(),s>i?(r.addRange(t),r.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),r.addRange(t)))}}for(t=[],r=e;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)r=t[e],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var uA=gn&&"documentMode"in document&&11>=document.documentMode,Ko=null,lm=null,cu=null,um=!1;function Uv(r,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;um||Ko==null||Ko!==Nc(i)||(i=Ko,"selectionStart"in i&&hy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cu&&Pu(cu,i)||(cu=i,i=$c(lm,"onSelect"),0<i.length&&(t=new ay("onSelect","select",null,t,e),r.push({event:t,listeners:i}),t.target=Ko)))}function Eh(r,t){var e={};return e[r.toLowerCase()]=t.toLowerCase(),e["Webkit"+r]="webkit"+t,e["Moz"+r]="moz"+t,e}var qo={animationend:Eh("Animation","AnimationEnd"),animationiteration:Eh("Animation","AnimationIteration"),animationstart:Eh("Animation","AnimationStart"),transitionend:Eh("Transition","TransitionEnd")},wf={},D1={};gn&&(D1=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Hd(r){if(wf[r])return wf[r];if(!qo[r])return r;var t=qo[r],e;for(e in t)if(t.hasOwnProperty(e)&&e in D1)return wf[r]=t[e];return r}var U1=Hd("animationend"),G1=Hd("animationiteration"),H1=Hd("animationstart"),$1=Hd("transitionend"),X1=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(r,t){X1.set(r,t),vo(t,[r])}for(var bf=0;bf<Gv.length;bf++){var Sf=Gv[bf],hA=Sf.toLowerCase(),cA=Sf[0].toUpperCase()+Sf.slice(1);us(hA,"on"+cA)}us(U1,"onAnimationEnd");us(G1,"onAnimationIteration");us(H1,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us($1,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function Hv(r,t,e){var i=r.type||"unknown-event";r.currentTarget=e,hS(i,t,void 0,r),r.currentTarget=null}function z1(r,t){t=(t&4)!==0;for(var e=0;e<r.length;e++){var i=r[e],n=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break t;Hv(n,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break t;Hv(n,a,u),s=l}}}if(kc)throw r=nm,kc=!1,nm=null,r}function zt(r,t){var e=t[pm];e===void 0&&(e=t[pm]=new Set);var i=r+"__bubble";e.has(i)||(j1(t,r,2,!1),e.add(i))}function Af(r,t,e){var i=0;t&&(i|=4),j1(e,r,i,t)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Iu(r){if(!r[Th]){r[Th]=!0,Qx.forEach(function(e){e!=="selectionchange"&&(dA.has(e)||Af(e,!1,r),Af(e,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[Th]||(t[Th]=!0,Af("selectionchange",!1,t))}}function j1(r,t,e,i){switch(P1(t)){case 1:var n=AS;break;case 4:n=CS;break;default:n=sy}e=n.bind(null,t,e,r),n=void 0,!im||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?r.addEventListener(t,e,{capture:!0,passive:n}):r.addEventListener(t,e,!0):n!==void 0?r.addEventListener(t,e,{passive:n}):r.addEventListener(t,e,!1)}function Cf(r,t,e,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=qs(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue t}a=a.parentNode}}i=i.return}p1(function(){var u=s,h=ey(e),c=[];t:{var f=X1.get(r);if(f!==void 0){var p=ay,m=r;switch(r){case"keypress":if(dc(e)===0)break t;case"keydown":case"keyup":p=$S;break;case"focusin":m="focus",p=xf;break;case"focusout":m="blur",p=xf;break;case"beforeblur":case"afterblur":p=xf;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=RS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=jS;break;case U1:case G1:case H1:p=LS;break;case $1:p=WS;break;case"scroll":p=PS;break;case"wheel":p=KS;break;case"copy":case"cut":case"paste":p=NS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ov}var x=(t&4)!==0,T=!x&&r==="scroll",v=x?f!==null?f+"Capture":null:f;x=[];for(var E=u,_;E!==null;){_=E;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,v!==null&&(w=wu(E,v),w!=null&&x.push(Ru(E,w,_)))),T)break;E=E.return}0<x.length&&(f=new p(f,m,null,e,h),c.push({event:f,listeners:x}))}}if(!(t&7)){t:{if(f=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",f&&e!==em&&(m=e.relatedTarget||e.fromElement)&&(qs(m)||m[yn]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=e.relatedTarget||e.toElement,p=u,m=m?qs(m):null,m!==null&&(T=_o(m),m!==T||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(x=Iv,w="onMouseLeave",v="onMouseEnter",E="mouse",(r==="pointerout"||r==="pointerover")&&(x=Ov,w="onPointerLeave",v="onPointerEnter",E="pointer"),T=p==null?f:Zo(p),_=m==null?f:Zo(m),f=new x(w,E+"leave",p,e,h),f.target=T,f.relatedTarget=_,w=null,qs(h)===u&&(x=new x(v,E+"enter",m,e,h),x.target=_,x.relatedTarget=T,w=x),T=w,p&&m)e:{for(x=p,v=m,E=0,_=x;_;_=Lo(_))E++;for(_=0,w=v;w;w=Lo(w))_++;for(;0<E-_;)x=Lo(x),E--;for(;0<_-E;)v=Lo(v),_--;for(;E--;){if(x===v||v!==null&&x===v.alternate)break e;x=Lo(x),v=Lo(v)}x=null}else x=null;p!==null&&$v(c,f,p,x,!1),m!==null&&T!==null&&$v(c,T,m,x,!0)}}t:{if(f=u?Zo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var A=rA;else if(Fv(f))if(F1)A=oA;else{A=nA;var M=iA}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=sA);if(A&&(A=A(r,u))){L1(c,A,e,h);break t}M&&M(r,f,u),r==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&qp(f,"number",f.value)}switch(M=u?Zo(u):window,r){case"focusin":(Fv(M)||M.contentEditable==="true")&&(Ko=M,lm=u,cu=null);break;case"focusout":cu=lm=Ko=null;break;case"mousedown":um=!0;break;case"contextmenu":case"mouseup":case"dragend":um=!1,Uv(c,e,h);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":Uv(c,e,h)}var I;if(uy)t:{switch(r){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Yo?O1(r,e)&&(P="onCompositionEnd"):r==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(R1&&e.locale!=="ko"&&(Yo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Yo&&(I=I1()):(Xn=h,oy="value"in Xn?Xn.value:Xn.textContent,Yo=!0)),M=$c(u,P),0<M.length&&(P=new Rv(P,r,null,e,h),c.push({event:P,listeners:M}),I?P.data=I:(I=M1(e),I!==null&&(P.data=I)))),(I=ZS?QS(r,e):JS(r,e))&&(u=$c(u,"onBeforeInput"),0<u.length&&(h=new Rv("onBeforeInput","beforeinput",null,e,h),c.push({event:h,listeners:u}),h.data=I))}z1(c,t)})}function Ru(r,t,e){return{instance:r,listener:t,currentTarget:e}}function $c(r,t){for(var e=t+"Capture",i=[];r!==null;){var n=r,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=wu(r,e),s!=null&&i.unshift(Ru(r,s,n)),s=wu(r,t),s!=null&&i.push(Ru(r,s,n))),r=r.return}return i}function Lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function $v(r,t,e,i,n){for(var s=t._reactName,o=[];e!==null&&e!==i;){var a=e,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,n?(l=wu(e,s),l!=null&&o.unshift(Ru(e,l,a))):n||(l=wu(e,s),l!=null&&o.push(Ru(e,l,a)))),e=e.return}o.length!==0&&r.push({event:t,listeners:o})}var fA=/\r\n?/g,pA=/\u0000|\uFFFD/g;function Xv(r){return(typeof r=="string"?r:""+r).replace(fA,`
`).replace(pA,"")}function wh(r,t,e){if(t=Xv(t),Xv(r)!==t&&e)throw Error(H(425))}function Xc(){}var hm=null,cm=null;function dm(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fm=typeof setTimeout=="function"?setTimeout:void 0,mA=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,gA=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(r){return zv.resolve(null).then(r).catch(yA)}:fm;function yA(r){setTimeout(function(){throw r})}function Pf(r,t){var e=t,i=0;do{var n=e.nextSibling;if(r.removeChild(e),n&&n.nodeType===8)if(e=n.data,e==="/$"){if(i===0){r.removeChild(n),Au(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=n}while(e);Au(t)}function Zn(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function jv(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return r;t--}else e==="/$"&&t++}r=r.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Ni="__reactFiber$"+Ba,Ou="__reactProps$"+Ba,yn="__reactContainer$"+Ba,pm="__reactEvents$"+Ba,vA="__reactListeners$"+Ba,_A="__reactHandles$"+Ba;function qs(r){var t=r[Ni];if(t)return t;for(var e=r.parentNode;e;){if(t=e[yn]||e[Ni]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(r=jv(r);r!==null;){if(e=r[Ni])return e;r=jv(r)}return t}r=e,e=r.parentNode}return null}function Ju(r){return r=r[Ni]||r[yn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Zo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(H(33))}function $d(r){return r[Ou]||null}var mm=[],Qo=-1;function hs(r){return{current:r}}function Vt(r){0>Qo||(r.current=mm[Qo],mm[Qo]=null,Qo--)}function Xt(r,t){Qo++,mm[Qo]=r.current,r.current=t}var ss={},je=hs(ss),hr=hs(!1),uo=ss;function wa(r,t){var e=r.type.contextTypes;if(!e)return ss;var i=r.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in e)n[s]=t[s];return i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n),n}function cr(r){return r=r.childContextTypes,r!=null}function zc(){Vt(hr),Vt(je)}function Vv(r,t,e){if(je.current!==ss)throw Error(H(168));Xt(je,t),Xt(hr,e)}function V1(r,t,e){var i=r.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(H(108,iS(r)||"Unknown",n));return ee({},e,i)}function jc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ss,uo=je.current,Xt(je,r),Xt(hr,hr.current),!0}function Wv(r,t,e){var i=r.stateNode;if(!i)throw Error(H(169));e?(r=V1(r,t,uo),i.__reactInternalMemoizedMergedChildContext=r,Vt(hr),Vt(je),Xt(je,r)):Vt(hr),Xt(hr,e)}var nn=null,Xd=!1,If=!1;function W1(r){nn===null?nn=[r]:nn.push(r)}function xA(r){Xd=!0,W1(r)}function cs(){if(!If&&nn!==null){If=!0;var r=0,t=Dt;try{var e=nn;for(Dt=1;r<e.length;r++){var i=e[r];do i=i(!0);while(i!==null)}nn=null,Xd=!1}catch(n){throw nn!==null&&(nn=nn.slice(r+1)),v1(ry,cs),n}finally{Dt=t,If=!1}}return null}var Jo=[],ta=0,Vc=null,Wc=0,Fr=[],Nr=0,ho=null,an=1,ln="";function Bs(r,t){Jo[ta++]=Wc,Jo[ta++]=Vc,Vc=r,Wc=t}function Y1(r,t,e){Fr[Nr++]=an,Fr[Nr++]=ln,Fr[Nr++]=ho,ho=r;var i=an;r=ln;var n=32-di(i)-1;i&=~(1<<n),e+=1;var s=32-di(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,an=1<<32-di(t)+n|e<<n|i,ln=s+r}else an=1<<s|e<<n|i,ln=r}function cy(r){r.return!==null&&(Bs(r,1),Y1(r,1,0))}function dy(r){for(;r===Vc;)Vc=Jo[--ta],Jo[ta]=null,Wc=Jo[--ta],Jo[ta]=null;for(;r===ho;)ho=Fr[--Nr],Fr[Nr]=null,ln=Fr[--Nr],Fr[Nr]=null,an=Fr[--Nr],Fr[Nr]=null}var Tr=null,Er=null,Yt=!1,ai=null;function K1(r,t){var e=kr(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=r,t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)}function Yv(r,t){switch(r.tag){case 5:var e=r.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Tr=r,Er=Zn(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Tr=r,Er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=ho!==null?{id:an,overflow:ln}:null,r.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=kr(18,null,null,0),e.stateNode=t,e.return=r,r.child=e,Tr=r,Er=null,!0):!1;default:return!1}}function gm(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ym(r){if(Yt){var t=Er;if(t){var e=t;if(!Yv(r,t)){if(gm(r))throw Error(H(418));t=Zn(e.nextSibling);var i=Tr;t&&Yv(r,t)?K1(i,e):(r.flags=r.flags&-4097|2,Yt=!1,Tr=r)}}else{if(gm(r))throw Error(H(418));r.flags=r.flags&-4097|2,Yt=!1,Tr=r}}}function Kv(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Tr=r}function bh(r){if(r!==Tr)return!1;if(!Yt)return Kv(r),Yt=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!dm(r.type,r.memoizedProps)),t&&(t=Er)){if(gm(r))throw q1(),Error(H(418));for(;t;)K1(r,t),t=Zn(t.nextSibling)}if(Kv(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(H(317));t:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="/$"){if(t===0){Er=Zn(r.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}r=r.nextSibling}Er=null}}else Er=Tr?Zn(r.stateNode.nextSibling):null;return!0}function q1(){for(var r=Er;r;)r=Zn(r.nextSibling)}function ba(){Er=Tr=null,Yt=!1}function fy(r){ai===null?ai=[r]:ai.push(r)}var EA=wn.ReactCurrentBatchConfig;function ni(r,t){if(r&&r.defaultProps){t=ee({},t),r=r.defaultProps;for(var e in r)t[e]===void 0&&(t[e]=r[e]);return t}return t}var Yc=hs(null),Kc=null,ea=null,py=null;function my(){py=ea=Kc=null}function gy(r){var t=Yc.current;Vt(Yc),r._currentValue=t}function vm(r,t,e){for(;r!==null;){var i=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),r===e)break;r=r.return}}function ha(r,t){Kc=r,py=ea=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(ar=!0),r.firstContext=null)}function Hr(r){var t=r._currentValue;if(py!==r)if(r={context:r,memoizedValue:t,next:null},ea===null){if(Kc===null)throw Error(H(308));ea=r,Kc.dependencies={lanes:0,firstContext:r}}else ea=ea.next=r;return t}var Zs=null;function yy(r){Zs===null?Zs=[r]:Zs.push(r)}function Z1(r,t,e,i){var n=t.interleaved;return n===null?(e.next=e,yy(t)):(e.next=n.next,n.next=e),t.interleaved=e,vn(r,i)}function vn(r,t){r.lanes|=t;var e=r.alternate;for(e!==null&&(e.lanes|=t),e=r,r=r.return;r!==null;)r.childLanes|=t,e=r.alternate,e!==null&&(e.childLanes|=t),e=r,r=r.return;return e.tag===3?e.stateNode:null}var kn=!1;function vy(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q1(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function fn(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(r,t,e){var i=r.updateQueue;if(i===null)return null;if(i=i.shared,Ot&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,vn(r,e)}return n=i.interleaved,n===null?(t.next=t,yy(i)):(t.next=n.next,n.next=t),i.interleaved=t,vn(r,e)}function fc(r,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=r.pendingLanes,e|=i,t.lanes=e,iy(r,e)}}function qv(r,t){var e=r.updateQueue,i=r.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var n=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};s===null?n=s=o:s=s.next=o,e=e.next}while(e!==null);s===null?n=s=t:s=s.next=t}else n=s=t;e={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},r.updateQueue=e;return}r=e.lastBaseUpdate,r===null?e.firstBaseUpdate=t:r.next=t,e.lastBaseUpdate=t}function qc(r,t,e,i){var n=r.updateQueue;kn=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=r.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=n.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var m=r,x=a;switch(f=t,p=e,x.tag){case 1:if(m=x.payload,typeof m=="function"){c=m.call(p,c,f);break t}c=m;break t;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(p,c,f):m,f==null)break t;c=ee({},c,f);break t;case 2:kn=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,f=n.effects,f===null?n.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=c):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;f=a,a=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(h===null&&(l=c),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);fo|=o,r.lanes=o,r.memoizedState=c}}function Zv(r,t,e){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var i=r[t],n=i.callback;if(n!==null){if(i.callback=null,i=e,typeof n!="function")throw Error(H(191,n));n.call(i)}}}var J1=new Zx.Component().refs;function _m(r,t,e,i){t=r.memoizedState,e=e(i,t),e=e==null?t:ee({},t,e),r.memoizedState=e,r.lanes===0&&(r.updateQueue.baseState=e)}var zd={isMounted:function(r){return(r=r._reactInternals)?_o(r)===r:!1},enqueueSetState:function(r,t,e){r=r._reactInternals;var i=tr(),n=ts(r),s=fn(i,n);s.payload=t,e!=null&&(s.callback=e),t=Qn(r,s,n),t!==null&&(fi(t,r,n,i),fc(t,r,n))},enqueueReplaceState:function(r,t,e){r=r._reactInternals;var i=tr(),n=ts(r),s=fn(i,n);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=Qn(r,s,n),t!==null&&(fi(t,r,n,i),fc(t,r,n))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var e=tr(),i=ts(r),n=fn(e,i);n.tag=2,t!=null&&(n.callback=t),t=Qn(r,n,i),t!==null&&(fi(t,r,i,e),fc(t,r,i))}};function Qv(r,t,e,i,n,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Pu(e,i)||!Pu(n,s):!0}function tE(r,t,e){var i=!1,n=ss,s=t.contextType;return typeof s=="object"&&s!==null?s=Hr(s):(n=cr(t)?uo:je.current,i=t.contextTypes,s=(i=i!=null)?wa(r,n):ss),t=new t(e,s),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zd,r.stateNode=t,t._reactInternals=r,i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=s),t}function Jv(r,t,e,i){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==r&&zd.enqueueReplaceState(t,t.state,null)}function xm(r,t,e,i){var n=r.stateNode;n.props=e,n.state=r.memoizedState,n.refs=J1,vy(r);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Hr(s):(s=cr(t)?uo:je.current,n.context=wa(r,s)),n.state=r.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(_m(r,t,s,e),n.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&zd.enqueueReplaceState(n,n.state,null),qc(r,e,n,i),n.state=r.memoizedState),typeof n.componentDidMount=="function"&&(r.flags|=4194308)}function kl(r,t,e){if(r=e.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(H(309));var i=e.stateNode}if(!i)throw Error(H(147,r));var n=i,s=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;a===J1&&(a=n.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof r!="string")throw Error(H(284));if(!e._owner)throw Error(H(290,r))}return r}function Sh(r,t){throw r=Object.prototype.toString.call(t),Error(H(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function t_(r){var t=r._init;return t(r._payload)}function eE(r){function t(v,E){if(r){var _=v.deletions;_===null?(v.deletions=[E],v.flags|=16):_.push(E)}}function e(v,E){if(!r)return null;for(;E!==null;)t(v,E),E=E.sibling;return null}function i(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function n(v,E){return v=es(v,E),v.index=0,v.sibling=null,v}function s(v,E,_){return v.index=_,r?(_=v.alternate,_!==null?(_=_.index,_<E?(v.flags|=2,E):_):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return r&&v.alternate===null&&(v.flags|=2),v}function a(v,E,_,w){return E===null||E.tag!==6?(E=Bf(_,v.mode,w),E.return=v,E):(E=n(E,_),E.return=v,E)}function l(v,E,_,w){var A=_.type;return A===Wo?h(v,E,_.props.children,w,_.key):E!==null&&(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Bn&&t_(A)===E.type)?(w=n(E,_.props),w.ref=kl(v,E,_),w.return=v,w):(w=_c(_.type,_.key,_.props,null,v.mode,w),w.ref=kl(v,E,_),w.return=v,w)}function u(v,E,_,w){return E===null||E.tag!==4||E.stateNode.containerInfo!==_.containerInfo||E.stateNode.implementation!==_.implementation?(E=kf(_,v.mode,w),E.return=v,E):(E=n(E,_.children||[]),E.return=v,E)}function h(v,E,_,w,A){return E===null||E.tag!==7?(E=ro(_,v.mode,w,A),E.return=v,E):(E=n(E,_),E.return=v,E)}function c(v,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Bf(""+E,v.mode,_),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ph:return _=_c(E.type,E.key,E.props,null,v.mode,_),_.ref=kl(v,null,E),_.return=v,_;case Vo:return E=kf(E,v.mode,_),E.return=v,E;case Bn:var w=E._init;return c(v,w(E._payload),_)}if(ql(E)||Ml(E))return E=ro(E,v.mode,_,null),E.return=v,E;Sh(v,E)}return null}function f(v,E,_,w){var A=E!==null?E.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:a(v,E,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ph:return _.key===A?l(v,E,_,w):null;case Vo:return _.key===A?u(v,E,_,w):null;case Bn:return A=_._init,f(v,E,A(_._payload),w)}if(ql(_)||Ml(_))return A!==null?null:h(v,E,_,w,null);Sh(v,_)}return null}function p(v,E,_,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(_)||null,a(E,v,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ph:return v=v.get(w.key===null?_:w.key)||null,l(E,v,w,A);case Vo:return v=v.get(w.key===null?_:w.key)||null,u(E,v,w,A);case Bn:var M=w._init;return p(v,E,_,M(w._payload),A)}if(ql(w)||Ml(w))return v=v.get(_)||null,h(E,v,w,A,null);Sh(E,w)}return null}function m(v,E,_,w){for(var A=null,M=null,I=E,P=E=0,U=null;I!==null&&P<_.length;P++){I.index>P?(U=I,I=null):U=I.sibling;var B=f(v,I,_[P],w);if(B===null){I===null&&(I=U);break}r&&I&&B.alternate===null&&t(v,I),E=s(B,E,P),M===null?A=B:M.sibling=B,M=B,I=U}if(P===_.length)return e(v,I),Yt&&Bs(v,P),A;if(I===null){for(;P<_.length;P++)I=c(v,_[P],w),I!==null&&(E=s(I,E,P),M===null?A=I:M.sibling=I,M=I);return Yt&&Bs(v,P),A}for(I=i(v,I);P<_.length;P++)U=p(I,v,P,_[P],w),U!==null&&(r&&U.alternate!==null&&I.delete(U.key===null?P:U.key),E=s(U,E,P),M===null?A=U:M.sibling=U,M=U);return r&&I.forEach(function(st){return t(v,st)}),Yt&&Bs(v,P),A}function x(v,E,_,w){var A=Ml(_);if(typeof A!="function")throw Error(H(150));if(_=A.call(_),_==null)throw Error(H(151));for(var M=A=null,I=E,P=E=0,U=null,B=_.next();I!==null&&!B.done;P++,B=_.next()){I.index>P?(U=I,I=null):U=I.sibling;var st=f(v,I,B.value,w);if(st===null){I===null&&(I=U);break}r&&I&&st.alternate===null&&t(v,I),E=s(st,E,P),M===null?A=st:M.sibling=st,M=st,I=U}if(B.done)return e(v,I),Yt&&Bs(v,P),A;if(I===null){for(;!B.done;P++,B=_.next())B=c(v,B.value,w),B!==null&&(E=s(B,E,P),M===null?A=B:M.sibling=B,M=B);return Yt&&Bs(v,P),A}for(I=i(v,I);!B.done;P++,B=_.next())B=p(I,v,P,B.value,w),B!==null&&(r&&B.alternate!==null&&I.delete(B.key===null?P:B.key),E=s(B,E,P),M===null?A=B:M.sibling=B,M=B);return r&&I.forEach(function(X){return t(v,X)}),Yt&&Bs(v,P),A}function T(v,E,_,w){if(typeof _=="object"&&_!==null&&_.type===Wo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ph:t:{for(var A=_.key,M=E;M!==null;){if(M.key===A){if(A=_.type,A===Wo){if(M.tag===7){e(v,M.sibling),E=n(M,_.props.children),E.return=v,v=E;break t}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Bn&&t_(A)===M.type){e(v,M.sibling),E=n(M,_.props),E.ref=kl(v,M,_),E.return=v,v=E;break t}e(v,M);break}else t(v,M);M=M.sibling}_.type===Wo?(E=ro(_.props.children,v.mode,w,_.key),E.return=v,v=E):(w=_c(_.type,_.key,_.props,null,v.mode,w),w.ref=kl(v,E,_),w.return=v,v=w)}return o(v);case Vo:t:{for(M=_.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===_.containerInfo&&E.stateNode.implementation===_.implementation){e(v,E.sibling),E=n(E,_.children||[]),E.return=v,v=E;break t}else{e(v,E);break}else t(v,E);E=E.sibling}E=kf(_,v.mode,w),E.return=v,v=E}return o(v);case Bn:return M=_._init,T(v,E,M(_._payload),w)}if(ql(_))return m(v,E,_,w);if(Ml(_))return x(v,E,_,w);Sh(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,E!==null&&E.tag===6?(e(v,E.sibling),E=n(E,_),E.return=v,v=E):(e(v,E),E=Bf(_,v.mode,w),E.return=v,v=E),o(v)):e(v,E)}return T}var Sa=eE(!0),rE=eE(!1),th={},Ui=hs(th),Mu=hs(th),Lu=hs(th);function Qs(r){if(r===th)throw Error(H(174));return r}function _y(r,t){switch(Xt(Lu,t),Xt(Mu,r),Xt(Ui,th),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qp(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=Qp(t,r)}Vt(Ui),Xt(Ui,t)}function Aa(){Vt(Ui),Vt(Mu),Vt(Lu)}function iE(r){Qs(Lu.current);var t=Qs(Ui.current),e=Qp(t,r.type);t!==e&&(Xt(Mu,r),Xt(Ui,e))}function xy(r){Mu.current===r&&(Vt(Ui),Vt(Mu))}var Qt=hs(0);function Zc(r){for(var t=r;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rf=[];function Ey(){for(var r=0;r<Rf.length;r++)Rf[r]._workInProgressVersionPrimary=null;Rf.length=0}var pc=wn.ReactCurrentDispatcher,Of=wn.ReactCurrentBatchConfig,co=0,te=null,ve=null,Ie=null,Qc=!1,du=!1,Fu=0,TA=0;function Ue(){throw Error(H(321))}function Ty(r,t){if(t===null)return!1;for(var e=0;e<t.length&&e<r.length;e++)if(!mi(r[e],t[e]))return!1;return!0}function wy(r,t,e,i,n,s){if(co=s,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pc.current=r===null||r.memoizedState===null?AA:CA,r=e(i,n),du){s=0;do{if(du=!1,Fu=0,25<=s)throw Error(H(301));s+=1,Ie=ve=null,t.updateQueue=null,pc.current=PA,r=e(i,n)}while(du)}if(pc.current=Jc,t=ve!==null&&ve.next!==null,co=0,Ie=ve=te=null,Qc=!1,t)throw Error(H(300));return r}function by(){var r=Fu!==0;return Fu=0,r}function Oi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?te.memoizedState=Ie=r:Ie=Ie.next=r,Ie}function $r(){if(ve===null){var r=te.alternate;r=r!==null?r.memoizedState:null}else r=ve.next;var t=Ie===null?te.memoizedState:Ie.next;if(t!==null)Ie=t,ve=r;else{if(r===null)throw Error(H(310));ve=r,r={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Ie===null?te.memoizedState=Ie=r:Ie=Ie.next=r}return Ie}function Nu(r,t){return typeof t=="function"?t(r):t}function Mf(r){var t=$r(),e=t.queue;if(e===null)throw Error(H(311));e.lastRenderedReducer=r;var i=ve,n=i.baseQueue,s=e.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,e.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((co&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:r(i,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=i):l=l.next=c,te.lanes|=h,fo|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,mi(i,t.memoizedState)||(ar=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,e.lastRenderedState=i}if(r=e.interleaved,r!==null){n=r;do s=n.lane,te.lanes|=s,fo|=s,n=n.next;while(n!==r)}else n===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Lf(r){var t=$r(),e=t.queue;if(e===null)throw Error(H(311));e.lastRenderedReducer=r;var i=e.dispatch,n=e.pending,s=t.memoizedState;if(n!==null){e.pending=null;var o=n=n.next;do s=r(s,o.action),o=o.next;while(o!==n);mi(s,t.memoizedState)||(ar=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,i]}function nE(){}function sE(r,t){var e=te,i=$r(),n=t(),s=!mi(i.memoizedState,n);if(s&&(i.memoizedState=n,ar=!0),i=i.queue,Sy(lE.bind(null,e,i,r),[r]),i.getSnapshot!==t||s||Ie!==null&&Ie.memoizedState.tag&1){if(e.flags|=2048,Bu(9,aE.bind(null,e,i,n,t),void 0,null),Oe===null)throw Error(H(349));co&30||oE(e,t,n)}return n}function oE(r,t,e){r.flags|=16384,r={getSnapshot:t,value:e},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[r]):(e=t.stores,e===null?t.stores=[r]:e.push(r))}function aE(r,t,e,i){t.value=e,t.getSnapshot=i,uE(t)&&hE(r)}function lE(r,t,e){return e(function(){uE(t)&&hE(r)})}function uE(r){var t=r.getSnapshot;r=r.value;try{var e=t();return!mi(r,e)}catch{return!0}}function hE(r){var t=vn(r,1);t!==null&&fi(t,r,1,-1)}function e_(r){var t=Oi();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:r},t.queue=r,r=r.dispatch=SA.bind(null,te,r),[t.memoizedState,r]}function Bu(r,t,e,i){return r={tag:r,create:t,destroy:e,deps:i,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=r.next=r):(e=t.lastEffect,e===null?t.lastEffect=r.next=r:(i=e.next,e.next=r,r.next=i,t.lastEffect=r)),r}function cE(){return $r().memoizedState}function mc(r,t,e,i){var n=Oi();te.flags|=r,n.memoizedState=Bu(1|t,e,void 0,i===void 0?null:i)}function jd(r,t,e,i){var n=$r();i=i===void 0?null:i;var s=void 0;if(ve!==null){var o=ve.memoizedState;if(s=o.destroy,i!==null&&Ty(i,o.deps)){n.memoizedState=Bu(t,e,s,i);return}}te.flags|=r,n.memoizedState=Bu(1|t,e,s,i)}function r_(r,t){return mc(8390656,8,r,t)}function Sy(r,t){return jd(2048,8,r,t)}function dE(r,t){return jd(4,2,r,t)}function fE(r,t){return jd(4,4,r,t)}function pE(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function mE(r,t,e){return e=e!=null?e.concat([r]):null,jd(4,4,pE.bind(null,t,r),e)}function Ay(){}function gE(r,t){var e=$r();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&Ty(t,i[1])?i[0]:(e.memoizedState=[r,t],r)}function yE(r,t){var e=$r();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&Ty(t,i[1])?i[0]:(r=r(),e.memoizedState=[r,t],r)}function vE(r,t,e){return co&21?(mi(e,t)||(e=E1(),te.lanes|=e,fo|=e,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,ar=!0),r.memoizedState=e)}function wA(r,t){var e=Dt;Dt=e!==0&&4>e?e:4,r(!0);var i=Of.transition;Of.transition={};try{r(!1),t()}finally{Dt=e,Of.transition=i}}function _E(){return $r().memoizedState}function bA(r,t,e){var i=ts(r);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},xE(r))EE(t,e);else if(e=Z1(r,t,e,i),e!==null){var n=tr();fi(e,r,i,n),TE(e,t,i)}}function SA(r,t,e){var i=ts(r),n={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(xE(r))EE(t,n);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,e);if(n.hasEagerState=!0,n.eagerState=a,mi(a,o)){var l=t.interleaved;l===null?(n.next=n,yy(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}e=Z1(r,t,n,i),e!==null&&(n=tr(),fi(e,r,i,n),TE(e,t,i))}}function xE(r){var t=r.alternate;return r===te||t!==null&&t===te}function EE(r,t){du=Qc=!0;var e=r.pending;e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t}function TE(r,t,e){if(e&4194240){var i=t.lanes;i&=r.pendingLanes,e|=i,t.lanes=e,iy(r,e)}}var Jc={readContext:Hr,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},AA={readContext:Hr,useCallback:function(r,t){return Oi().memoizedState=[r,t===void 0?null:t],r},useContext:Hr,useEffect:r_,useImperativeHandle:function(r,t,e){return e=e!=null?e.concat([r]):null,mc(4194308,4,pE.bind(null,t,r),e)},useLayoutEffect:function(r,t){return mc(4194308,4,r,t)},useInsertionEffect:function(r,t){return mc(4,2,r,t)},useMemo:function(r,t){var e=Oi();return t=t===void 0?null:t,r=r(),e.memoizedState=[r,t],r},useReducer:function(r,t,e){var i=Oi();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},i.queue=r,r=r.dispatch=bA.bind(null,te,r),[i.memoizedState,r]},useRef:function(r){var t=Oi();return r={current:r},t.memoizedState=r},useState:e_,useDebugValue:Ay,useDeferredValue:function(r){return Oi().memoizedState=r},useTransition:function(){var r=e_(!1),t=r[0];return r=wA.bind(null,r[1]),Oi().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,e){var i=te,n=Oi();if(Yt){if(e===void 0)throw Error(H(407));e=e()}else{if(e=t(),Oe===null)throw Error(H(349));co&30||oE(i,t,e)}n.memoizedState=e;var s={value:e,getSnapshot:t};return n.queue=s,r_(lE.bind(null,i,s,r),[r]),i.flags|=2048,Bu(9,aE.bind(null,i,s,e,t),void 0,null),e},useId:function(){var r=Oi(),t=Oe.identifierPrefix;if(Yt){var e=ln,i=an;e=(i&~(1<<32-di(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=Fu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=TA++,t=":"+t+"r"+e.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},CA={readContext:Hr,useCallback:gE,useContext:Hr,useEffect:Sy,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:fE,useMemo:yE,useReducer:Mf,useRef:cE,useState:function(){return Mf(Nu)},useDebugValue:Ay,useDeferredValue:function(r){var t=$r();return vE(t,ve.memoizedState,r)},useTransition:function(){var r=Mf(Nu)[0],t=$r().memoizedState;return[r,t]},useMutableSource:nE,useSyncExternalStore:sE,useId:_E,unstable_isNewReconciler:!1},PA={readContext:Hr,useCallback:gE,useContext:Hr,useEffect:Sy,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:fE,useMemo:yE,useReducer:Lf,useRef:cE,useState:function(){return Lf(Nu)},useDebugValue:Ay,useDeferredValue:function(r){var t=$r();return ve===null?t.memoizedState=r:vE(t,ve.memoizedState,r)},useTransition:function(){var r=Lf(Nu)[0],t=$r().memoizedState;return[r,t]},useMutableSource:nE,useSyncExternalStore:sE,useId:_E,unstable_isNewReconciler:!1};function Ca(r,t){try{var e="",i=t;do e+=rS(i),i=i.return;while(i);var n=e}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:t,stack:n,digest:null}}function Ff(r,t,e){return{value:r,source:null,stack:e??null,digest:t??null}}function Em(r,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var IA=typeof WeakMap=="function"?WeakMap:Map;function wE(r,t,e){e=fn(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){ed||(ed=!0,Om=i),Em(r,t)},e}function bE(r,t,e){e=fn(-1,e),e.tag=3;var i=r.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;e.payload=function(){return i(n)},e.callback=function(){Em(r,t)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Em(r,t),typeof i!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function i_(r,t,e){var i=r.pingCache;if(i===null){i=r.pingCache=new IA;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(e)||(n.add(e),r=XA.bind(null,r,t,e),t.then(r,r))}function n_(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function s_(r,t,e,i,n){return r.mode&1?(r.flags|=65536,r.lanes=n,r):(r===t?r.flags|=65536:(r.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=fn(-1,1),t.tag=2,Qn(e,t,1))),e.lanes|=1),r)}var RA=wn.ReactCurrentOwner,ar=!1;function Qe(r,t,e,i){t.child=r===null?rE(t,null,e,i):Sa(t,r.child,e,i)}function o_(r,t,e,i,n){e=e.render;var s=t.ref;return ha(t,n),i=wy(r,t,e,i,s,n),e=by(),r!==null&&!ar?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~n,_n(r,t,n)):(Yt&&e&&cy(t),t.flags|=1,Qe(r,t,i,n),t.child)}function a_(r,t,e,i,n){if(r===null){var s=e.type;return typeof s=="function"&&!Fy(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=s,SE(r,t,s,i,n)):(r=_c(e.type,null,i,t,t.mode,n),r.ref=t.ref,r.return=t,t.child=r)}if(s=r.child,!(r.lanes&n)){var o=s.memoizedProps;if(e=e.compare,e=e!==null?e:Pu,e(o,i)&&r.ref===t.ref)return _n(r,t,n)}return t.flags|=1,r=es(s,i),r.ref=t.ref,r.return=t,t.child=r}function SE(r,t,e,i,n){if(r!==null){var s=r.memoizedProps;if(Pu(s,i)&&r.ref===t.ref)if(ar=!1,t.pendingProps=i=s,(r.lanes&n)!==0)r.flags&131072&&(ar=!0);else return t.lanes=r.lanes,_n(r,t,n)}return Tm(r,t,e,i,n)}function AE(r,t,e){var i=t.pendingProps,n=i.children,s=r!==null?r.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(ia,xr),xr|=e;else{if(!(e&1073741824))return r=s!==null?s.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Xt(ia,xr),xr|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:e,Xt(ia,xr),xr|=i}else s!==null?(i=s.baseLanes|e,t.memoizedState=null):i=e,Xt(ia,xr),xr|=i;return Qe(r,t,n,e),t.child}function CE(r,t){var e=t.ref;(r===null&&e!==null||r!==null&&r.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Tm(r,t,e,i,n){var s=cr(e)?uo:je.current;return s=wa(t,s),ha(t,n),e=wy(r,t,e,i,s,n),i=by(),r!==null&&!ar?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~n,_n(r,t,n)):(Yt&&i&&cy(t),t.flags|=1,Qe(r,t,e,n),t.child)}function l_(r,t,e,i,n){if(cr(e)){var s=!0;jc(t)}else s=!1;if(ha(t,n),t.stateNode===null)gc(r,t),tE(t,e,i),xm(t,e,i,n),i=!0;else if(r===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Hr(u):(u=cr(e)?uo:je.current,u=wa(t,u));var h=e.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Jv(t,o,i,u),kn=!1;var f=t.memoizedState;o.state=f,qc(t,i,o,n),l=t.memoizedState,a!==i||f!==l||hr.current||kn?(typeof h=="function"&&(_m(t,e,h,i),l=t.memoizedState),(a=kn||Qv(t,e,a,i,f,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Q1(r,t),a=t.memoizedProps,u=t.type===t.elementType?a:ni(t.type,a),o.props=u,c=t.pendingProps,f=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=Hr(l):(l=cr(e)?uo:je.current,l=wa(t,l));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==l)&&Jv(t,o,i,l),kn=!1,f=t.memoizedState,o.state=f,qc(t,i,o,n);var m=t.memoizedState;a!==c||f!==m||hr.current||kn?(typeof p=="function"&&(_m(t,e,p,i),m=t.memoizedState),(u=kn||Qv(t,e,u,i,f,m,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(t.flags|=1024),i=!1)}return wm(r,t,e,i,s,n)}function wm(r,t,e,i,n,s){CE(r,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&Wv(t,e,!1),_n(r,t,s);i=t.stateNode,RA.current=t;var a=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,r!==null&&o?(t.child=Sa(t,r.child,null,s),t.child=Sa(t,null,a,s)):Qe(r,t,a,s),t.memoizedState=i.state,n&&Wv(t,e,!0),t.child}function PE(r){var t=r.stateNode;t.pendingContext?Vv(r,t.pendingContext,t.pendingContext!==t.context):t.context&&Vv(r,t.context,!1),_y(r,t.containerInfo)}function u_(r,t,e,i,n){return ba(),fy(n),t.flags|=256,Qe(r,t,e,i),t.child}var bm={dehydrated:null,treeContext:null,retryLane:0};function Sm(r){return{baseLanes:r,cachePool:null,transitions:null}}function IE(r,t,e){var i=t.pendingProps,n=Qt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(n|=1),Xt(Qt,n&1),r===null)return ym(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,r=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yd(o,i,0,null),r=ro(r,i,e,null),s.return=t,r.return=t,s.sibling=r,t.child=s,t.child.memoizedState=Sm(e),t.memoizedState=bm,r):Cy(t,o));if(n=r.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return OA(r,t,o,i,a,n,e);if(s){s=i.fallback,o=t.mode,n=r.child,a=n.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=es(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=es(a,s):(s=ro(s,o,e,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=r.child.memoizedState,o=o===null?Sm(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~e,t.memoizedState=bm,i}return s=r.child,r=s.sibling,i=es(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,r!==null&&(e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)),t.child=i,t.memoizedState=null,i}function Cy(r,t){return t=Yd({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function Ah(r,t,e,i){return i!==null&&fy(i),Sa(t,r.child,null,e),r=Cy(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function OA(r,t,e,i,n,s,o){if(e)return t.flags&256?(t.flags&=-257,i=Ff(Error(H(422))),Ah(r,t,o,i)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=Yd({mode:"visible",children:i.children},n,0,null),s=ro(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Sa(t,r.child,null,o),t.child.memoizedState=Sm(o),t.memoizedState=bm,s);if(!(t.mode&1))return Ah(r,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(H(419)),i=Ff(s,i,void 0),Ah(r,t,o,i)}if(a=(o&r.childLanes)!==0,ar||a){if(i=Oe,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,vn(r,n),fi(i,r,n,-1))}return Ly(),i=Ff(Error(H(421))),Ah(r,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=r.child,t=zA.bind(null,r),n._reactRetry=t,null):(r=s.treeContext,Er=Zn(n.nextSibling),Tr=t,Yt=!0,ai=null,r!==null&&(Fr[Nr++]=an,Fr[Nr++]=ln,Fr[Nr++]=ho,an=r.id,ln=r.overflow,ho=t),t=Cy(t,i.children),t.flags|=4096,t)}function h_(r,t,e){r.lanes|=t;var i=r.alternate;i!==null&&(i.lanes|=t),vm(r.return,t,e)}function Nf(r,t,e,i,n){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=n)}function RE(r,t,e){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(Qe(r,t,i.children,e),i=Qt.current,i&2)i=i&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)t:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&h_(r,e,t);else if(r.tag===19)h_(r,e,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}i&=1}if(Xt(Qt,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(e=t.child,n=null;e!==null;)r=e.alternate,r!==null&&Zc(r)===null&&(n=e),e=e.sibling;e=n,e===null?(n=t.child,t.child=null):(n=e.sibling,e.sibling=null),Nf(t,!1,n,e,s);break;case"backwards":for(e=null,n=t.child,t.child=null;n!==null;){if(r=n.alternate,r!==null&&Zc(r)===null){t.child=n;break}r=n.sibling,n.sibling=e,e=n,n=r}Nf(t,!0,e,null,s);break;case"together":Nf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gc(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function _n(r,t,e){if(r!==null&&(t.dependencies=r.dependencies),fo|=t.lanes,!(e&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(H(153));if(t.child!==null){for(r=t.child,e=es(r,r.pendingProps),t.child=e,e.return=t;r.sibling!==null;)r=r.sibling,e=e.sibling=es(r,r.pendingProps),e.return=t;e.sibling=null}return t.child}function MA(r,t,e){switch(t.tag){case 3:PE(t),ba();break;case 5:iE(t);break;case 1:cr(t.type)&&jc(t);break;case 4:_y(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;Xt(Yc,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Xt(Qt,Qt.current&1),t.flags|=128,null):e&t.child.childLanes?IE(r,t,e):(Xt(Qt,Qt.current&1),r=_n(r,t,e),r!==null?r.sibling:null);Xt(Qt,Qt.current&1);break;case 19:if(i=(e&t.childLanes)!==0,r.flags&128){if(i)return RE(r,t,e);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Xt(Qt,Qt.current),i)break;return null;case 22:case 23:return t.lanes=0,AE(r,t,e)}return _n(r,t,e)}var OE,Am,ME,LE;OE=function(r,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)r.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Am=function(){};ME=function(r,t,e,i){var n=r.memoizedProps;if(n!==i){r=t.stateNode,Qs(Ui.current);var s=null;switch(e){case"input":n=Yp(r,n),i=Yp(r,i),s=[];break;case"select":n=ee({},n,{value:void 0}),i=ee({},i,{value:void 0}),s=[];break;case"textarea":n=Zp(r,n),i=Zp(r,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(r.onclick=Xc)}Jp(e,i);var o;e=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var a=n[u];for(o in a)a.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Eu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(s||(s=[]),s.push(u,e)),e=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&zt("scroll",r),s||a===l||(s=[])):(s=s||[]).push(u,l))}e&&(s=s||[]).push("style",e);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};LE=function(r,t,e,i){e!==i&&(t.flags|=4)};function Dl(r,t){if(!Yt)switch(r.tailMode){case"hidden":t=r.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?r.tail=null:e.sibling=null;break;case"collapsed":e=r.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:i.sibling=null}}function Ge(r){var t=r.alternate!==null&&r.alternate.child===r.child,e=0,i=0;if(t)for(var n=r.child;n!==null;)e|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=r,n=n.sibling;else for(n=r.child;n!==null;)e|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=r,n=n.sibling;return r.subtreeFlags|=i,r.childLanes=e,t}function LA(r,t,e){var i=t.pendingProps;switch(dy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return cr(t.type)&&zc(),Ge(t),null;case 3:return i=t.stateNode,Aa(),Vt(hr),Vt(je),Ey(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(r===null||r.child===null)&&(bh(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ai!==null&&(Fm(ai),ai=null))),Am(r,t),Ge(t),null;case 5:xy(t);var n=Qs(Lu.current);if(e=t.type,r!==null&&t.stateNode!=null)ME(r,t,e,i,n),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(H(166));return Ge(t),null}if(r=Qs(Ui.current),bh(t)){i=t.stateNode,e=t.type;var s=t.memoizedProps;switch(i[Ni]=t,i[Ou]=s,r=(t.mode&1)!==0,e){case"dialog":zt("cancel",i),zt("close",i);break;case"iframe":case"object":case"embed":zt("load",i);break;case"video":case"audio":for(n=0;n<Ql.length;n++)zt(Ql[n],i);break;case"source":zt("error",i);break;case"img":case"image":case"link":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"input":_v(i,s),zt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},zt("invalid",i);break;case"textarea":Ev(i,s),zt("invalid",i)}Jp(e,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&wh(i.textContent,a,r),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wh(i.textContent,a,r),n=["children",""+a]):Eu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&zt("scroll",i)}switch(e){case"input":mh(i),xv(i,s,!0);break;case"textarea":mh(i),Tv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Xc)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=o1(e)),r==="http://www.w3.org/1999/xhtml"?e==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof i.is=="string"?r=o.createElement(e,{is:i.is}):(r=o.createElement(e),e==="select"&&(o=r,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):r=o.createElementNS(r,e),r[Ni]=t,r[Ou]=i,OE(r,t,!1,!1),t.stateNode=r;t:{switch(o=tm(e,i),e){case"dialog":zt("cancel",r),zt("close",r),n=i;break;case"iframe":case"object":case"embed":zt("load",r),n=i;break;case"video":case"audio":for(n=0;n<Ql.length;n++)zt(Ql[n],r);n=i;break;case"source":zt("error",r),n=i;break;case"img":case"image":case"link":zt("error",r),zt("load",r),n=i;break;case"details":zt("toggle",r),n=i;break;case"input":_v(r,i),n=Yp(r,i),zt("invalid",r);break;case"option":n=i;break;case"select":r._wrapperState={wasMultiple:!!i.multiple},n=ee({},i,{value:void 0}),zt("invalid",r);break;case"textarea":Ev(r,i),n=Zp(r,i),zt("invalid",r);break;default:n=i}Jp(e,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?u1(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&a1(r,l)):s==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&Tu(r,l):typeof l=="number"&&Tu(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&zt("scroll",r):l!=null&&Zg(r,s,l,o))}switch(e){case"input":mh(r),xv(r,i,!1);break;case"textarea":mh(r),Tv(r);break;case"option":i.value!=null&&r.setAttribute("value",""+ns(i.value));break;case"select":r.multiple=!!i.multiple,s=i.value,s!=null?oa(r,!!i.multiple,s,!1):i.defaultValue!=null&&oa(r,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(r.onclick=Xc)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(r&&t.stateNode!=null)LE(r,t,r.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(H(166));if(e=Qs(Lu.current),Qs(Ui.current),bh(t)){if(i=t.stateNode,e=t.memoizedProps,i[Ni]=t,(s=i.nodeValue!==e)&&(r=Tr,r!==null))switch(r.tag){case 3:wh(i.nodeValue,e,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&wh(i.nodeValue,e,(r.mode&1)!==0)}s&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Ni]=t,t.stateNode=i}return Ge(t),null;case 13:if(Vt(Qt),i=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Yt&&Er!==null&&t.mode&1&&!(t.flags&128))q1(),ba(),t.flags|=98560,s=!1;else if(s=bh(t),i!==null&&i.dehydrated!==null){if(r===null){if(!s)throw Error(H(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Ni]=t}else ba(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),s=!1}else ai!==null&&(Fm(ai),ai=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(r!==null&&r.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(r===null||Qt.current&1?xe===0&&(xe=3):Ly())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return Aa(),Am(r,t),r===null&&Iu(t.stateNode.containerInfo),Ge(t),null;case 10:return gy(t.type._context),Ge(t),null;case 17:return cr(t.type)&&zc(),Ge(t),null;case 19:if(Vt(Qt),s=t.memoizedState,s===null)return Ge(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Dl(s,!1);else{if(xe!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(o=Zc(r),o!==null){for(t.flags|=128,Dl(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)s=e,r=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e=e.sibling;return Xt(Qt,Qt.current&1|2),t.child}r=r.sibling}s.tail!==null&&ue()>Pa&&(t.flags|=128,i=!0,Dl(s,!1),t.lanes=4194304)}else{if(!i)if(r=Zc(o),r!==null){if(t.flags|=128,i=!0,e=r.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Dl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Yt)return Ge(t),null}else 2*ue()-s.renderingStartTime>Pa&&e!==1073741824&&(t.flags|=128,i=!0,Dl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(e=s.last,e!==null?e.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ue(),t.sibling=null,e=Qt.current,Xt(Qt,i?e&1|2:e&1),t):(Ge(t),null);case 22:case 23:return My(),i=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?xr&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function FA(r,t){switch(dy(t),t.tag){case 1:return cr(t.type)&&zc(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return Aa(),Vt(hr),Vt(je),Ey(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return xy(t),null;case 13:if(Vt(Qt),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(H(340));ba()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return Vt(Qt),null;case 4:return Aa(),null;case 10:return gy(t.type._context),null;case 22:case 23:return My(),null;case 24:return null;default:return null}}var Ch=!1,Xe=!1,NA=typeof WeakSet=="function"?WeakSet:Set,J=null;function ra(r,t){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){ie(r,t,i)}else e.current=null}function Cm(r,t,e){try{e()}catch(i){ie(r,t,i)}}var c_=!1;function BA(r,t){if(hm=Gc,r=k1(),hy(r)){if("selectionStart"in r)var e={start:r.selectionStart,end:r.selectionEnd};else t:{e=(e=r.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var o=0,a=-1,l=-1,u=0,h=0,c=r,f=null;e:for(;;){for(var p;c!==e||n!==0&&c.nodeType!==3||(a=o+n),c!==s||i!==0&&c.nodeType!==3||(l=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(p=c.firstChild)!==null;)f=c,c=p;for(;;){if(c===r)break e;if(f===e&&++u===n&&(a=o),f===s&&++h===i&&(l=o),(p=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=p}e=a===-1||l===-1?null:{start:a,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(cm={focusedElem:r,selectionRange:e},Gc=!1,J=t;J!==null;)if(t=J,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,J=r;else for(;J!==null;){t=J;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,T=m.memoizedState,v=t.stateNode,E=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:ni(t.type,x),T);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(w){ie(t,t.return,w)}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}return m=c_,c_=!1,m}function fu(r,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&r)===r){var s=n.destroy;n.destroy=void 0,s!==void 0&&Cm(t,e,s)}n=n.next}while(n!==i)}}function Vd(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&r)===r){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function Pm(r){var t=r.ref;if(t!==null){var e=r.stateNode;switch(r.tag){case 5:r=e;break;default:r=e}typeof t=="function"?t(r):t.current=r}}function FE(r){var t=r.alternate;t!==null&&(r.alternate=null,FE(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[Ni],delete t[Ou],delete t[pm],delete t[vA],delete t[_A])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function NE(r){return r.tag===5||r.tag===3||r.tag===4}function d_(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||NE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Im(r,t,e){var i=r.tag;if(i===5||i===6)r=r.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(r,t):e.insertBefore(r,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(r,e)):(t=e,t.appendChild(r)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Xc));else if(i!==4&&(r=r.child,r!==null))for(Im(r,t,e),r=r.sibling;r!==null;)Im(r,t,e),r=r.sibling}function Rm(r,t,e){var i=r.tag;if(i===5||i===6)r=r.stateNode,t?e.insertBefore(r,t):e.appendChild(r);else if(i!==4&&(r=r.child,r!==null))for(Rm(r,t,e),r=r.sibling;r!==null;)Rm(r,t,e),r=r.sibling}var Ne=null,si=!1;function On(r,t,e){for(e=e.child;e!==null;)BE(r,t,e),e=e.sibling}function BE(r,t,e){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(Dd,e)}catch{}switch(e.tag){case 5:Xe||ra(e,t);case 6:var i=Ne,n=si;Ne=null,On(r,t,e),Ne=i,si=n,Ne!==null&&(si?(r=Ne,e=e.stateNode,r.nodeType===8?r.parentNode.removeChild(e):r.removeChild(e)):Ne.removeChild(e.stateNode));break;case 18:Ne!==null&&(si?(r=Ne,e=e.stateNode,r.nodeType===8?Pf(r.parentNode,e):r.nodeType===1&&Pf(r,e),Au(r)):Pf(Ne,e.stateNode));break;case 4:i=Ne,n=si,Ne=e.stateNode.containerInfo,si=!0,On(r,t,e),Ne=i,si=n;break;case 0:case 11:case 14:case 15:if(!Xe&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cm(e,t,o),n=n.next}while(n!==i)}On(r,t,e);break;case 1:if(!Xe&&(ra(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(a){ie(e,t,a)}On(r,t,e);break;case 21:On(r,t,e);break;case 22:e.mode&1?(Xe=(i=Xe)||e.memoizedState!==null,On(r,t,e),Xe=i):On(r,t,e);break;default:On(r,t,e)}}function f_(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var e=r.stateNode;e===null&&(e=r.stateNode=new NA),t.forEach(function(i){var n=jA.bind(null,r,i);e.has(i)||(e.add(i),i.then(n,n))})}}function Jr(r,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var n=e[i];try{var s=r,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Ne=a.stateNode,si=!1;break t;case 3:Ne=a.stateNode.containerInfo,si=!0;break t;case 4:Ne=a.stateNode.containerInfo,si=!0;break t}a=a.return}if(Ne===null)throw Error(H(160));BE(s,o,n),Ne=null,si=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){ie(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kE(t,r),t=t.sibling}function kE(r,t){var e=r.alternate,i=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Jr(t,r),bi(r),i&4){try{fu(3,r,r.return),Vd(3,r)}catch(x){ie(r,r.return,x)}try{fu(5,r,r.return)}catch(x){ie(r,r.return,x)}}break;case 1:Jr(t,r),bi(r),i&512&&e!==null&&ra(e,e.return);break;case 5:if(Jr(t,r),bi(r),i&512&&e!==null&&ra(e,e.return),r.flags&32){var n=r.stateNode;try{Tu(n,"")}catch(x){ie(r,r.return,x)}}if(i&4&&(n=r.stateNode,n!=null)){var s=r.memoizedProps,o=e!==null?e.memoizedProps:s,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&n1(n,s),tm(a,o);var u=tm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?u1(n,c):h==="dangerouslySetInnerHTML"?a1(n,c):h==="children"?Tu(n,c):Zg(n,h,c,u)}switch(a){case"input":Kp(n,s);break;case"textarea":s1(n,s);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?oa(n,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?oa(n,!!s.multiple,s.defaultValue,!0):oa(n,!!s.multiple,s.multiple?[]:"",!1))}n[Ou]=s}catch(x){ie(r,r.return,x)}}break;case 6:if(Jr(t,r),bi(r),i&4){if(r.stateNode===null)throw Error(H(162));n=r.stateNode,s=r.memoizedProps;try{n.nodeValue=s}catch(x){ie(r,r.return,x)}}break;case 3:if(Jr(t,r),bi(r),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Au(t.containerInfo)}catch(x){ie(r,r.return,x)}break;case 4:Jr(t,r),bi(r);break;case 13:Jr(t,r),bi(r),n=r.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(Ry=ue())),i&4&&f_(r);break;case 22:if(h=e!==null&&e.memoizedState!==null,r.mode&1?(Xe=(u=Xe)||h,Jr(t,r),Xe=u):Jr(t,r),bi(r),i&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!h&&r.mode&1)for(J=r,h=r.child;h!==null;){for(c=J=h;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:fu(4,f,f.return);break;case 1:ra(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(x){ie(i,e,x)}}break;case 5:ra(f,f.return);break;case 22:if(f.memoizedState!==null){m_(c);continue}}p!==null?(p.return=f,J=p):m_(c)}h=h.sibling}t:for(h=null,c=r;;){if(c.tag===5){if(h===null){h=c;try{n=c.stateNode,u?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=l1("display",o))}catch(x){ie(r,r.return,x)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(x){ie(r,r.return,x)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===r)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break t;for(;c.sibling===null;){if(c.return===null||c.return===r)break t;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Jr(t,r),bi(r),i&4&&f_(r);break;case 21:break;default:Jr(t,r),bi(r)}}function bi(r){var t=r.flags;if(t&2){try{t:{for(var e=r.return;e!==null;){if(NE(e)){var i=e;break t}e=e.return}throw Error(H(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Tu(n,""),i.flags&=-33);var s=d_(r);Rm(r,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=d_(r);Im(r,a,o);break;default:throw Error(H(161))}}catch(l){ie(r,r.return,l)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function kA(r,t,e){J=r,DE(r)}function DE(r,t,e){for(var i=(r.mode&1)!==0;J!==null;){var n=J,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||Ch;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Xe;a=Ch;var u=Xe;if(Ch=o,(Xe=l)&&!u)for(J=n;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?g_(n):l!==null?(l.return=o,J=l):g_(n);for(;s!==null;)J=s,DE(s),s=s.sibling;J=n,Ch=a,Xe=u}p_(r)}else n.subtreeFlags&8772&&s!==null?(s.return=n,J=s):p_(r)}}function p_(r){for(;J!==null;){var t=J;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Vd(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Xe)if(e===null)i.componentDidMount();else{var n=t.elementType===t.type?e.memoizedProps:ni(t.type,e.memoizedProps);i.componentDidUpdate(n,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Zv(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Zv(t,o,e)}break;case 5:var a=t.stateNode;if(e===null&&t.flags&4){e=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Au(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Xe||t.flags&512&&Pm(t)}catch(f){ie(t,t.return,f)}}if(t===r){J=null;break}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}}function m_(r){for(;J!==null;){var t=J;if(t===r){J=null;break}var e=t.sibling;if(e!==null){e.return=t.return,J=e;break}J=t.return}}function g_(r){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Vd(4,t)}catch(l){ie(t,e,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){ie(t,n,l)}}var s=t.return;try{Pm(t)}catch(l){ie(t,s,l)}break;case 5:var o=t.return;try{Pm(t)}catch(l){ie(t,o,l)}}}catch(l){ie(t,t.return,l)}if(t===r){J=null;break}var a=t.sibling;if(a!==null){a.return=t.return,J=a;break}J=t.return}}var DA=Math.ceil,td=wn.ReactCurrentDispatcher,Py=wn.ReactCurrentOwner,Gr=wn.ReactCurrentBatchConfig,Ot=0,Oe=null,pe=null,ke=0,xr=0,ia=hs(0),xe=0,ku=null,fo=0,Wd=0,Iy=0,pu=null,or=null,Ry=0,Pa=1/0,rn=null,ed=!1,Om=null,Jn=null,Ph=!1,zn=null,rd=0,mu=0,Mm=null,yc=-1,vc=0;function tr(){return Ot&6?ue():yc!==-1?yc:yc=ue()}function ts(r){return r.mode&1?Ot&2&&ke!==0?ke&-ke:EA.transition!==null?(vc===0&&(vc=E1()),vc):(r=Dt,r!==0||(r=window.event,r=r===void 0?16:P1(r.type)),r):1}function fi(r,t,e,i){if(50<mu)throw mu=0,Mm=null,Error(H(185));Zu(r,e,i),(!(Ot&2)||r!==Oe)&&(r===Oe&&(!(Ot&2)&&(Wd|=e),xe===4&&Hn(r,ke)),dr(r,i),e===1&&Ot===0&&!(t.mode&1)&&(Pa=ue()+500,Xd&&cs()))}function dr(r,t){var e=r.callbackNode;ES(r,t);var i=Uc(r,r===Oe?ke:0);if(i===0)e!==null&&Sv(e),r.callbackNode=null,r.callbackPriority=0;else if(t=i&-i,r.callbackPriority!==t){if(e!=null&&Sv(e),t===1)r.tag===0?xA(y_.bind(null,r)):W1(y_.bind(null,r)),gA(function(){!(Ot&6)&&cs()}),e=null;else{switch(T1(i)){case 1:e=ry;break;case 4:e=_1;break;case 16:e=Dc;break;case 536870912:e=x1;break;default:e=Dc}e=VE(e,UE.bind(null,r))}r.callbackPriority=t,r.callbackNode=e}}function UE(r,t){if(yc=-1,vc=0,Ot&6)throw Error(H(327));var e=r.callbackNode;if(ca()&&r.callbackNode!==e)return null;var i=Uc(r,r===Oe?ke:0);if(i===0)return null;if(i&30||i&r.expiredLanes||t)t=id(r,i);else{t=i;var n=Ot;Ot|=2;var s=HE();(Oe!==r||ke!==t)&&(rn=null,Pa=ue()+500,eo(r,t));do try{HA();break}catch(a){GE(r,a)}while(!0);my(),td.current=s,Ot=n,pe!==null?t=0:(Oe=null,ke=0,t=xe)}if(t!==0){if(t===2&&(n=sm(r),n!==0&&(i=n,t=Lm(r,n))),t===1)throw e=ku,eo(r,0),Hn(r,i),dr(r,ue()),e;if(t===6)Hn(r,i);else{if(n=r.current.alternate,!(i&30)&&!UA(n)&&(t=id(r,i),t===2&&(s=sm(r),s!==0&&(i=s,t=Lm(r,s))),t===1))throw e=ku,eo(r,0),Hn(r,i),dr(r,ue()),e;switch(r.finishedWork=n,r.finishedLanes=i,t){case 0:case 1:throw Error(H(345));case 2:ks(r,or,rn);break;case 3:if(Hn(r,i),(i&130023424)===i&&(t=Ry+500-ue(),10<t)){if(Uc(r,0)!==0)break;if(n=r.suspendedLanes,(n&i)!==i){tr(),r.pingedLanes|=r.suspendedLanes&n;break}r.timeoutHandle=fm(ks.bind(null,r,or,rn),t);break}ks(r,or,rn);break;case 4:if(Hn(r,i),(i&4194240)===i)break;for(t=r.eventTimes,n=-1;0<i;){var o=31-di(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*DA(i/1960))-i,10<i){r.timeoutHandle=fm(ks.bind(null,r,or,rn),i);break}ks(r,or,rn);break;case 5:ks(r,or,rn);break;default:throw Error(H(329))}}}return dr(r,ue()),r.callbackNode===e?UE.bind(null,r):null}function Lm(r,t){var e=pu;return r.current.memoizedState.isDehydrated&&(eo(r,t).flags|=256),r=id(r,t),r!==2&&(t=or,or=e,t!==null&&Fm(t)),r}function Fm(r){or===null?or=r:or.push.apply(or,r)}function UA(r){for(var t=r;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var n=e[i],s=n.getSnapshot;n=n.value;try{if(!mi(s(),n))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(r,t){for(t&=~Iy,t&=~Wd,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var e=31-di(t),i=1<<e;r[e]=-1,t&=~i}}function y_(r){if(Ot&6)throw Error(H(327));ca();var t=Uc(r,0);if(!(t&1))return dr(r,ue()),null;var e=id(r,t);if(r.tag!==0&&e===2){var i=sm(r);i!==0&&(t=i,e=Lm(r,i))}if(e===1)throw e=ku,eo(r,0),Hn(r,t),dr(r,ue()),e;if(e===6)throw Error(H(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,ks(r,or,rn),dr(r,ue()),null}function Oy(r,t){var e=Ot;Ot|=1;try{return r(t)}finally{Ot=e,Ot===0&&(Pa=ue()+500,Xd&&cs())}}function po(r){zn!==null&&zn.tag===0&&!(Ot&6)&&ca();var t=Ot;Ot|=1;var e=Gr.transition,i=Dt;try{if(Gr.transition=null,Dt=1,r)return r()}finally{Dt=i,Gr.transition=e,Ot=t,!(Ot&6)&&cs()}}function My(){xr=ia.current,Vt(ia)}function eo(r,t){r.finishedWork=null,r.finishedLanes=0;var e=r.timeoutHandle;if(e!==-1&&(r.timeoutHandle=-1,mA(e)),pe!==null)for(e=pe.return;e!==null;){var i=e;switch(dy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&zc();break;case 3:Aa(),Vt(hr),Vt(je),Ey();break;case 5:xy(i);break;case 4:Aa();break;case 13:Vt(Qt);break;case 19:Vt(Qt);break;case 10:gy(i.type._context);break;case 22:case 23:My()}e=e.return}if(Oe=r,pe=r=es(r.current,null),ke=xr=t,xe=0,ku=null,Iy=Wd=fo=0,or=pu=null,Zs!==null){for(t=0;t<Zs.length;t++)if(e=Zs[t],i=e.interleaved,i!==null){e.interleaved=null;var n=i.next,s=e.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}e.pending=i}Zs=null}return r}function GE(r,t){do{var e=pe;try{if(my(),pc.current=Jc,Qc){for(var i=te.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Qc=!1}if(co=0,Ie=ve=te=null,du=!1,Fu=0,Py.current=null,e===null||e.return===null){xe=1,ku=t,pe=null;break}t:{var s=r,o=e.return,a=e,l=t;if(t=ke,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=n_(o);if(p!==null){p.flags&=-257,s_(p,o,a,s,t),p.mode&1&&i_(s,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var x=new Set;x.add(l),t.updateQueue=x}else m.add(l);break t}else{if(!(t&1)){i_(s,u,t),Ly();break t}l=Error(H(426))}}else if(Yt&&a.mode&1){var T=n_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),s_(T,o,a,s,t),fy(Ca(l,a));break t}}s=l=Ca(l,a),xe!==4&&(xe=2),pu===null?pu=[s]:pu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=wE(s,l,t);qv(s,v);break t;case 1:a=l;var E=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Jn===null||!Jn.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=bE(s,a,t);qv(s,w);break t}}s=s.return}while(s!==null)}XE(e)}catch(A){t=A,pe===e&&e!==null&&(pe=e=e.return);continue}break}while(!0)}function HE(){var r=td.current;return td.current=Jc,r===null?Jc:r}function Ly(){(xe===0||xe===3||xe===2)&&(xe=4),Oe===null||!(fo&268435455)&&!(Wd&268435455)||Hn(Oe,ke)}function id(r,t){var e=Ot;Ot|=2;var i=HE();(Oe!==r||ke!==t)&&(rn=null,eo(r,t));do try{GA();break}catch(n){GE(r,n)}while(!0);if(my(),Ot=e,td.current=i,pe!==null)throw Error(H(261));return Oe=null,ke=0,xe}function GA(){for(;pe!==null;)$E(pe)}function HA(){for(;pe!==null&&!dS();)$E(pe)}function $E(r){var t=jE(r.alternate,r,xr);r.memoizedProps=r.pendingProps,t===null?XE(r):pe=t,Py.current=null}function XE(r){var t=r;do{var e=t.alternate;if(r=t.return,t.flags&32768){if(e=FA(e,t),e!==null){e.flags&=32767,pe=e;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{xe=6,pe=null;return}}else if(e=LA(e,t,xr),e!==null){pe=e;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=r}while(t!==null);xe===0&&(xe=5)}function ks(r,t,e){var i=Dt,n=Gr.transition;try{Gr.transition=null,Dt=1,$A(r,t,e,i)}finally{Gr.transition=n,Dt=i}return null}function $A(r,t,e,i){do ca();while(zn!==null);if(Ot&6)throw Error(H(327));e=r.finishedWork;var n=r.finishedLanes;if(e===null)return null;if(r.finishedWork=null,r.finishedLanes=0,e===r.current)throw Error(H(177));r.callbackNode=null,r.callbackPriority=0;var s=e.lanes|e.childLanes;if(TS(r,s),r===Oe&&(pe=Oe=null,ke=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Ph||(Ph=!0,VE(Dc,function(){return ca(),null})),s=(e.flags&15990)!==0,e.subtreeFlags&15990||s){s=Gr.transition,Gr.transition=null;var o=Dt;Dt=1;var a=Ot;Ot|=4,Py.current=null,BA(r,e),kE(e,r),lA(cm),Gc=!!hm,cm=hm=null,r.current=e,kA(e),fS(),Ot=a,Dt=o,Gr.transition=s}else r.current=e;if(Ph&&(Ph=!1,zn=r,rd=n),s=r.pendingLanes,s===0&&(Jn=null),gS(e.stateNode),dr(r,ue()),t!==null)for(i=r.onRecoverableError,e=0;e<t.length;e++)n=t[e],i(n.value,{componentStack:n.stack,digest:n.digest});if(ed)throw ed=!1,r=Om,Om=null,r;return rd&1&&r.tag!==0&&ca(),s=r.pendingLanes,s&1?r===Mm?mu++:(mu=0,Mm=r):mu=0,cs(),null}function ca(){if(zn!==null){var r=T1(rd),t=Gr.transition,e=Dt;try{if(Gr.transition=null,Dt=16>r?16:r,zn===null)var i=!1;else{if(r=zn,zn=null,rd=0,Ot&6)throw Error(H(331));var n=Ot;for(Ot|=4,J=r.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:fu(8,h,s)}var c=h.child;if(c!==null)c.return=h,J=c;else for(;J!==null;){h=J;var f=h.sibling,p=h.return;if(FE(h),h===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var m=s.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else t:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fu(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,J=v;break t}J=s.return}}var E=r.current;for(J=E;J!==null;){o=J;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,J=_;else t:for(o=E;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vd(9,a)}}catch(A){ie(a,a.return,A)}if(a===o){J=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,J=w;break t}J=a.return}}if(Ot=n,cs(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(Dd,r)}catch{}i=!0}return i}finally{Dt=e,Gr.transition=t}}return!1}function v_(r,t,e){t=Ca(e,t),t=wE(r,t,1),r=Qn(r,t,1),t=tr(),r!==null&&(Zu(r,1,t),dr(r,t))}function ie(r,t,e){if(r.tag===3)v_(r,r,e);else for(;t!==null;){if(t.tag===3){v_(t,r,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Jn===null||!Jn.has(i))){r=Ca(e,r),r=bE(t,r,1),t=Qn(t,r,1),r=tr(),t!==null&&(Zu(t,1,r),dr(t,r));break}}t=t.return}}function XA(r,t,e){var i=r.pingCache;i!==null&&i.delete(t),t=tr(),r.pingedLanes|=r.suspendedLanes&e,Oe===r&&(ke&e)===e&&(xe===4||xe===3&&(ke&130023424)===ke&&500>ue()-Ry?eo(r,0):Iy|=e),dr(r,t)}function zE(r,t){t===0&&(r.mode&1?(t=vh,vh<<=1,!(vh&130023424)&&(vh=4194304)):t=1);var e=tr();r=vn(r,t),r!==null&&(Zu(r,t,e),dr(r,e))}function zA(r){var t=r.memoizedState,e=0;t!==null&&(e=t.retryLane),zE(r,e)}function jA(r,t){var e=0;switch(r.tag){case 13:var i=r.stateNode,n=r.memoizedState;n!==null&&(e=n.retryLane);break;case 19:i=r.stateNode;break;default:throw Error(H(314))}i!==null&&i.delete(t),zE(r,e)}var jE;jE=function(r,t,e){if(r!==null)if(r.memoizedProps!==t.pendingProps||hr.current)ar=!0;else{if(!(r.lanes&e)&&!(t.flags&128))return ar=!1,MA(r,t,e);ar=!!(r.flags&131072)}else ar=!1,Yt&&t.flags&1048576&&Y1(t,Wc,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;gc(r,t),r=t.pendingProps;var n=wa(t,je.current);ha(t,e),n=wy(null,t,i,r,n,e);var s=by();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cr(i)?(s=!0,jc(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,vy(t),n.updater=zd,t.stateNode=n,n._reactInternals=t,xm(t,i,r,e),t=wm(null,t,i,!0,s,e)):(t.tag=0,Yt&&s&&cy(t),Qe(null,t,n,e),t=t.child),t;case 16:i=t.elementType;t:{switch(gc(r,t),r=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=WA(i),r=ni(i,r),n){case 0:t=Tm(null,t,i,r,e);break t;case 1:t=l_(null,t,i,r,e);break t;case 11:t=o_(null,t,i,r,e);break t;case 14:t=a_(null,t,i,ni(i.type,r),e);break t}throw Error(H(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Tm(r,t,i,n,e);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),l_(r,t,i,n,e);case 3:t:{if(PE(t),r===null)throw Error(H(387));i=t.pendingProps,s=t.memoizedState,n=s.element,Q1(r,t),qc(t,i,null,e);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Ca(Error(H(423)),t),t=u_(r,t,i,e,n);break t}else if(i!==n){n=Ca(Error(H(424)),t),t=u_(r,t,i,e,n);break t}else for(Er=Zn(t.stateNode.containerInfo.firstChild),Tr=t,Yt=!0,ai=null,e=rE(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(ba(),i===n){t=_n(r,t,e);break t}Qe(r,t,i,e)}t=t.child}return t;case 5:return iE(t),r===null&&ym(t),i=t.type,n=t.pendingProps,s=r!==null?r.memoizedProps:null,o=n.children,dm(i,n)?o=null:s!==null&&dm(i,s)&&(t.flags|=32),CE(r,t),Qe(r,t,o,e),t.child;case 6:return r===null&&ym(t),null;case 13:return IE(r,t,e);case 4:return _y(t,t.stateNode.containerInfo),i=t.pendingProps,r===null?t.child=Sa(t,null,i,e):Qe(r,t,i,e),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),o_(r,t,i,n,e);case 7:return Qe(r,t,t.pendingProps,e),t.child;case 8:return Qe(r,t,t.pendingProps.children,e),t.child;case 12:return Qe(r,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Xt(Yc,i._currentValue),i._currentValue=o,s!==null)if(mi(s.value,o)){if(s.children===n.children&&!hr.current){t=_n(r,t,e);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=fn(-1,e&-e),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=e,l=s.alternate,l!==null&&(l.lanes|=e),vm(s.return,e,t),a.lanes|=e;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),vm(o,e,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qe(r,t,n.children,e),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,ha(t,e),n=Hr(n),i=i(n),t.flags|=1,Qe(r,t,i,e),t.child;case 14:return i=t.type,n=ni(i,t.pendingProps),n=ni(i.type,n),a_(r,t,i,n,e);case 15:return SE(r,t,t.type,t.pendingProps,e);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),gc(r,t),t.tag=1,cr(i)?(r=!0,jc(t)):r=!1,ha(t,e),tE(t,i,n),xm(t,i,n,e),wm(null,t,i,!0,r,e);case 19:return RE(r,t,e);case 22:return AE(r,t,e)}throw Error(H(156,t.tag))};function VE(r,t){return v1(r,t)}function VA(r,t,e,i){this.tag=r,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(r,t,e,i){return new VA(r,t,e,i)}function Fy(r){return r=r.prototype,!(!r||!r.isReactComponent)}function WA(r){if(typeof r=="function")return Fy(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Jg)return 11;if(r===ty)return 14}return 2}function es(r,t){var e=r.alternate;return e===null?(e=kr(r.tag,t,r.key,r.mode),e.elementType=r.elementType,e.type=r.type,e.stateNode=r.stateNode,e.alternate=r,r.alternate=e):(e.pendingProps=t,e.type=r.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=r.flags&14680064,e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=r.sibling,e.index=r.index,e.ref=r.ref,e}function _c(r,t,e,i,n,s){var o=2;if(i=r,typeof r=="function")Fy(r)&&(o=1);else if(typeof r=="string")o=5;else t:switch(r){case Wo:return ro(e.children,n,s,t);case Qg:o=8,n|=8;break;case zp:return r=kr(12,e,t,n|2),r.elementType=zp,r.lanes=s,r;case jp:return r=kr(13,e,t,n),r.elementType=jp,r.lanes=s,r;case Vp:return r=kr(19,e,t,n),r.elementType=Vp,r.lanes=s,r;case e1:return Yd(e,n,s,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Jx:o=10;break t;case t1:o=9;break t;case Jg:o=11;break t;case ty:o=14;break t;case Bn:o=16,i=null;break t}throw Error(H(130,r==null?r:typeof r,""))}return t=kr(o,e,t,n),t.elementType=r,t.type=i,t.lanes=s,t}function ro(r,t,e,i){return r=kr(7,r,i,t),r.lanes=e,r}function Yd(r,t,e,i){return r=kr(22,r,i,t),r.elementType=e1,r.lanes=e,r.stateNode={isHidden:!1},r}function Bf(r,t,e){return r=kr(6,r,null,t),r.lanes=e,r}function kf(r,t,e){return t=kr(4,r.children!==null?r.children:[],r.key,t),t.lanes=e,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function YA(r,t,e,i,n){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yf(0),this.expirationTimes=yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yf(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Ny(r,t,e,i,n,s,o,a,l){return r=new YA(r,t,e,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=kr(3,null,null,t),r.current=s,s.stateNode=r,s.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},vy(s),r}function KA(r,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:i==null?null:""+i,children:r,containerInfo:t,implementation:e}}function WE(r){if(!r)return ss;r=r._reactInternals;t:{if(_o(r)!==r||r.tag!==1)throw Error(H(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(cr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(H(171))}if(r.tag===1){var e=r.type;if(cr(e))return V1(r,e,t)}return t}function YE(r,t,e,i,n,s,o,a,l){return r=Ny(e,i,!0,r,n,s,o,a,l),r.context=WE(null),e=r.current,i=tr(),n=ts(e),s=fn(i,n),s.callback=t??null,Qn(e,s,n),r.current.lanes=n,Zu(r,n,i),dr(r,i),r}function Kd(r,t,e,i){var n=t.current,s=tr(),o=ts(n);return e=WE(e),t.context===null?t.context=e:t.pendingContext=e,t=fn(s,o),t.payload={element:r},i=i===void 0?null:i,i!==null&&(t.callback=i),r=Qn(n,t,o),r!==null&&(fi(r,n,o,s),fc(r,n,o)),o}function nd(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function __(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var e=r.retryLane;r.retryLane=e!==0&&e<t?e:t}}function By(r,t){__(r,t),(r=r.alternate)&&__(r,t)}function qA(){return null}var KE=typeof reportError=="function"?reportError:function(r){console.error(r)};function ky(r){this._internalRoot=r}qd.prototype.render=ky.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(H(409));Kd(r,t,null,null)};qd.prototype.unmount=ky.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;po(function(){Kd(null,r,null,null)}),t[yn]=null}};function qd(r){this._internalRoot=r}qd.prototype.unstable_scheduleHydration=function(r){if(r){var t=S1();r={blockedOn:null,target:r,priority:t};for(var e=0;e<Gn.length&&t!==0&&t<Gn[e].priority;e++);Gn.splice(e,0,r),e===0&&C1(r)}};function Dy(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Zd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function x_(){}function ZA(r,t,e,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var u=nd(o);s.call(u)}}var o=YE(t,i,r,0,null,!1,!1,"",x_);return r._reactRootContainer=o,r[yn]=o.current,Iu(r.nodeType===8?r.parentNode:r),po(),o}for(;n=r.lastChild;)r.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var u=nd(l);a.call(u)}}var l=Ny(r,0,!1,null,null,!1,!1,"",x_);return r._reactRootContainer=l,r[yn]=l.current,Iu(r.nodeType===8?r.parentNode:r),po(function(){Kd(t,l,e,i)}),l}function Qd(r,t,e,i,n){var s=e._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=nd(o);a.call(l)}}Kd(t,o,r,n)}else o=ZA(e,t,r,n,i);return nd(o)}w1=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var e=Zl(t.pendingLanes);e!==0&&(iy(t,e|1),dr(t,ue()),!(Ot&6)&&(Pa=ue()+500,cs()))}break;case 13:po(function(){var i=vn(r,1);if(i!==null){var n=tr();fi(i,r,1,n)}}),By(r,1)}};ny=function(r){if(r.tag===13){var t=vn(r,134217728);if(t!==null){var e=tr();fi(t,r,134217728,e)}By(r,134217728)}};b1=function(r){if(r.tag===13){var t=ts(r),e=vn(r,t);if(e!==null){var i=tr();fi(e,r,t,i)}By(r,t)}};S1=function(){return Dt};A1=function(r,t){var e=Dt;try{return Dt=r,t()}finally{Dt=e}};rm=function(r,t,e){switch(t){case"input":if(Kp(r,e),t=e.name,e.type==="radio"&&t!=null){for(e=r;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==r&&i.form===r.form){var n=$d(i);if(!n)throw Error(H(90));i1(i),Kp(i,n)}}}break;case"textarea":s1(r,e);break;case"select":t=e.value,t!=null&&oa(r,!!e.multiple,t,!1)}};d1=Oy;f1=po;var QA={usingClientEntryPoint:!1,Events:[Ju,Zo,$d,h1,c1,Oy]},Ul={findFiberByHostInstance:qs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},JA={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=g1(r),r===null?null:r.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||qA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Dd=Ih.inject(JA),Di=Ih}catch{}}Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QA;Ar.createPortal=function(r,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dy(t))throw Error(H(200));return KA(r,t,null,e)};Ar.createRoot=function(r,t){if(!Dy(r))throw Error(H(299));var e=!1,i="",n=KE;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Ny(r,1,!1,null,null,e,!1,i,n),r[yn]=t.current,Iu(r.nodeType===8?r.parentNode:r),new ky(t)};Ar.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(H(188)):(r=Object.keys(r).join(","),Error(H(268,r)));return r=g1(t),r=r===null?null:r.stateNode,r};Ar.flushSync=function(r){return po(r)};Ar.hydrate=function(r,t,e){if(!Zd(t))throw Error(H(200));return Qd(null,r,t,!0,e)};Ar.hydrateRoot=function(r,t,e){if(!Dy(r))throw Error(H(405));var i=e!=null&&e.hydratedSources||null,n=!1,s="",o=KE;if(e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=YE(t,null,r,1,e??null,n,!1,s,o),r[yn]=t.current,Iu(r),i)for(r=0;r<i.length;r++)e=i[r],n=e._getVersion,n=n(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n);return new qd(t)};Ar.render=function(r,t,e){if(!Zd(t))throw Error(H(200));return Qd(null,r,t,!1,e)};Ar.unmountComponentAtNode=function(r){if(!Zd(r))throw Error(H(40));return r._reactRootContainer?(po(function(){Qd(null,null,r,!1,function(){r._reactRootContainer=null,r[yn]=null})}),!0):!1};Ar.unstable_batchedUpdates=Oy;Ar.unstable_renderSubtreeIntoContainer=function(r,t,e,i){if(!Zd(e))throw Error(H(200));if(r==null||r._reactInternals===void 0)throw Error(H(38));return Qd(r,t,e,!1,i)};Ar.version="18.2.0-next-9e3b772b8-20220608";function qE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qE)}catch(r){console.error(r)}}qE(),Gx.exports=Ar;var tC=Gx.exports,E_=tC;$p.createRoot=E_.createRoot,$p.hydrateRoot=E_.hydrateRoot;var xo=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(xo||{}),ZE=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(ZE||{}),Nm=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Nm||{}),ht=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(ht||{}),Bi=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Bi||{}),$=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))($||{}),da=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(da||{}),ot=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(ot||{}),q=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(q||{}),un=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(un||{}),rs=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(rs||{}),Hi=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Hi||{}),lr=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(lr||{}),Li=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Li||{}),Uy=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(Uy||{}),Dr=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(Dr||{}),ye=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(ye||{}),fe=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(fe||{}),Gi=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Gi||{});const eC={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},Z={ADAPTER:eC,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Df=/iPhone/i,T_=/iPod/i,w_=/iPad/i,b_=/\biOS-universal(?:.+)Mac\b/i,Uf=/\bAndroid(?:.+)Mobile\b/i,S_=/Android/i,Fo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Rh=/Silk/i,Ji=/Windows Phone/i,A_=/\bWindows(?:.+)ARM\b/i,C_=/BlackBerry/i,P_=/BB10/i,I_=/Opera Mini/i,R_=/\b(CriOS|Chrome)(?:.+)Mobile/i,O_=/Mobile(?:.+)Firefox\b/i,M_=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function rC(r){return function(t){return t.test(r)}}function Bm(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var n=rC(e),s={apple:{phone:n(Df)&&!n(Ji),ipod:n(T_),tablet:!n(Df)&&(n(w_)||M_(t))&&!n(Ji),universal:n(b_),device:(n(Df)||n(T_)||n(w_)||n(b_)||M_(t))&&!n(Ji)},amazon:{phone:n(Fo),tablet:!n(Fo)&&n(Rh),device:n(Fo)||n(Rh)},android:{phone:!n(Ji)&&n(Fo)||!n(Ji)&&n(Uf),tablet:!n(Ji)&&!n(Fo)&&!n(Uf)&&(n(Rh)||n(S_)),device:!n(Ji)&&(n(Fo)||n(Rh)||n(Uf)||n(S_))||n(/\bokhttp\b/i)},windows:{phone:n(Ji),tablet:n(A_),device:n(Ji)||n(A_)},other:{blackberry:n(C_),blackberry10:n(P_),opera:n(I_),firefox:n(O_),chrome:n(R_),device:n(C_)||n(P_)||n(I_)||n(O_)||n(R_)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const iC=Bm.default??Bm,hn=iC(globalThis.navigator);Z.RETINA_PREFIX=/@([0-9\.]+)x/;Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var QE={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new n(h,c||l,f),m=e?e+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)t.call(h,c)&&u.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=e?e+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,p=c.length,m=new Array(p);f<p;f++)m[f]=c[f].fn;return m},a.prototype.listenerCount=function(u){var h=e?e+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,f,p,m){var x=e?e+u:u;if(!this._events[x])return!1;var T=this._events[x],v=arguments.length,E,_;if(T.fn){switch(T.once&&this.removeListener(u,T.fn,void 0,!0),v){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,h),!0;case 3:return T.fn.call(T.context,h,c),!0;case 4:return T.fn.call(T.context,h,c,f),!0;case 5:return T.fn.call(T.context,h,c,f,p),!0;case 6:return T.fn.call(T.context,h,c,f,p,m),!0}for(_=1,E=new Array(v-1);_<v;_++)E[_-1]=arguments[_];T.fn.apply(T.context,E)}else{var w=T.length,A;for(_=0;_<w;_++)switch(T[_].once&&this.removeListener(u,T[_].fn,void 0,!0),v){case 1:T[_].fn.call(T[_].context);break;case 2:T[_].fn.call(T[_].context,h);break;case 3:T[_].fn.call(T[_].context,h,c);break;case 4:T[_].fn.call(T[_].context,h,c,f);break;default:if(!E)for(A=1,E=new Array(v-1);A<v;A++)E[A-1]=arguments[A];T[_].fn.apply(T[_].context,E)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,f){var p=e?e+u:u;if(!this._events[p])return this;if(!h)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===h&&(!f||m.once)&&(!c||m.context===c)&&o(this,p);else{for(var x=0,T=[],v=m.length;x<v;x++)(m[x].fn!==h||f&&!m[x].once||c&&m[x].context!==c)&&T.push(m[x]);T.length?this._events[p]=T.length===1?T[0]:T:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(QE);var nC=QE.exports;const eh=ls(nC);var Gy={exports:{}};Gy.exports=Jd;Gy.exports.default=Jd;function Jd(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,s=JE(r,0,n,e,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,f,p;if(i&&(s=uC(r,t,s,e)),r.length>80*e){a=u=r[0],l=h=r[1];for(var m=e;m<n;m+=e)c=r[m],f=r[m+1],c<a&&(a=c),f<l&&(l=f),c>u&&(u=c),f>h&&(h=f);p=Math.max(u-a,h-l),p=p!==0?32767/p:0}return Du(s,o,e,a,l,p,0),o}function JE(r,t,e,i,n){var s,o;if(n===Um(r,t,e,i)>0)for(s=t;s<e;s+=i)o=L_(s,r[s],r[s+1],o);else for(s=e-i;s>=t;s-=i)o=L_(s,r[s],r[s+1],o);return o&&tf(o,o.next)&&(Gu(o),o=o.next),o}function mo(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(tf(e,e.next)||Jt(e.prev,e,e.next)===0)){if(Gu(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Du(r,t,e,i,n,s,o){if(r){!o&&s&&pC(r,i,n,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?oC(r,i,n,s):sC(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(u.i/e|0),Gu(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=aC(mo(r),t,e),Du(r,t,e,i,n,s,2)):o===2&&lC(r,t,e,i,n,s):Du(mo(r),t,e,i,n,s,1);break}}}}function sC(r){var t=r.prev,e=r,i=r.next;if(Jt(t,e,i)>=0)return!1;for(var n=t.x,s=e.x,o=i.x,a=t.y,l=e.y,u=i.y,h=n<s?n<o?n:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,f=n>s?n>o?n:o:s>o?s:o,p=a>l?a>u?a:u:l>u?l:u,m=i.next;m!==t;){if(m.x>=h&&m.x<=f&&m.y>=c&&m.y<=p&&na(n,a,s,l,o,u,m.x,m.y)&&Jt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function oC(r,t,e,i){var n=r.prev,s=r,o=r.next;if(Jt(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,h=n.y,c=s.y,f=o.y,p=a<l?a<u?a:u:l<u?l:u,m=h<c?h<f?h:f:c<f?c:f,x=a>l?a>u?a:u:l>u?l:u,T=h>c?h>f?h:f:c>f?c:f,v=km(p,m,t,e,i),E=km(x,T,t,e,i),_=r.prevZ,w=r.nextZ;_&&_.z>=v&&w&&w.z<=E;){if(_.x>=p&&_.x<=x&&_.y>=m&&_.y<=T&&_!==n&&_!==o&&na(a,h,l,c,u,f,_.x,_.y)&&Jt(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=p&&w.x<=x&&w.y>=m&&w.y<=T&&w!==n&&w!==o&&na(a,h,l,c,u,f,w.x,w.y)&&Jt(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=v;){if(_.x>=p&&_.x<=x&&_.y>=m&&_.y<=T&&_!==n&&_!==o&&na(a,h,l,c,u,f,_.x,_.y)&&Jt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=E;){if(w.x>=p&&w.x<=x&&w.y>=m&&w.y<=T&&w!==n&&w!==o&&na(a,h,l,c,u,f,w.x,w.y)&&Jt(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function aC(r,t,e){var i=r;do{var n=i.prev,s=i.next.next;!tf(n,s)&&tT(n,i,i.next,s)&&Uu(n,s)&&Uu(s,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),Gu(i),Gu(i.next),i=r=s),i=i.next}while(i!==r);return mo(i)}function lC(r,t,e,i,n,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&yC(o,a)){var l=eT(o,a);o=mo(o,o.next),l=mo(l,l.next),Du(o,t,e,i,n,s,0),Du(l,t,e,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function uC(r,t,e,i){var n=[],s,o,a,l,u;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:r.length,u=JE(r,a,l,i,!1),u===u.next&&(u.steiner=!0),n.push(gC(u));for(n.sort(hC),s=0;s<n.length;s++)e=cC(n[s],e);return e}function hC(r,t){return r.x-t.x}function cC(r,t){var e=dC(r,t);if(!e)return t;var i=eT(e,r);return mo(i,i.next),mo(e,e.next)}function dC(r,t){var e=t,i=r.x,n=r.y,s=-1/0,o;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var a=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>s&&(s=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,f;e=o;do i>=e.x&&e.x>=u&&i!==e.x&&na(n<h?i:s,n,u,h,n<h?s:i,n,e.x,e.y)&&(f=Math.abs(n-e.y)/(i-e.x),Uu(e,r)&&(f<c||f===c&&(e.x>o.x||e.x===o.x&&fC(o,e)))&&(o=e,c=f)),e=e.next;while(e!==l);return o}function fC(r,t){return Jt(r.prev,r,t.prev)<0&&Jt(t.next,r,r.next)<0}function pC(r,t,e,i){var n=r;do n.z===0&&(n.z=km(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,mC(n)}function mC(r){var t,e,i,n,s,o,a,l,u=1;do{for(e=r,r=null,s=null,o=0;e;){for(o++,i=e,a=0,t=0;t<u&&(a++,i=i.nextZ,!!i);t++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;e=i}s.nextZ=null,u*=2}while(o>1);return r}function km(r,t,e,i,n){return r=(r-e)*n|0,t=(t-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function gC(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function na(r,t,e,i,n,s,o,a){return(n-o)*(t-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(s-a)>=(n-o)*(i-a)}function yC(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!vC(r,t)&&(Uu(r,t)&&Uu(t,r)&&_C(r,t)&&(Jt(r.prev,r,t.prev)||Jt(r,t.prev,t))||tf(r,t)&&Jt(r.prev,r,r.next)>0&&Jt(t.prev,t,t.next)>0)}function Jt(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function tf(r,t){return r.x===t.x&&r.y===t.y}function tT(r,t,e,i){var n=Mh(Jt(r,t,e)),s=Mh(Jt(r,t,i)),o=Mh(Jt(e,i,r)),a=Mh(Jt(e,i,t));return!!(n!==s&&o!==a||n===0&&Oh(r,e,t)||s===0&&Oh(r,i,t)||o===0&&Oh(e,r,i)||a===0&&Oh(e,t,i))}function Oh(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Mh(r){return r>0?1:r<0?-1:0}function vC(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&tT(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function Uu(r,t){return Jt(r.prev,r,r.next)<0?Jt(r,t,r.next)>=0&&Jt(r,r.prev,t)>=0:Jt(r,t,r.prev)<0||Jt(r,r.next,t)<0}function _C(r,t){var e=r,i=!1,n=(r.x+t.x)/2,s=(r.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function eT(r,t){var e=new Dm(r.i,r.x,r.y),i=new Dm(t.i,t.x,t.y),n=r.next,s=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function L_(r,t,e,i){var n=new Dm(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Gu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Dm(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Jd.deviation=function(r,t,e,i){var n=t&&t.length,s=n?t[0]*e:r.length,o=Math.abs(Um(r,0,s,e));if(n)for(var a=0,l=t.length;a<l;a++){var u=t[a]*e,h=a<l-1?t[a+1]*e:r.length;o-=Math.abs(Um(r,u,h,e))}var c=0;for(a=0;a<i.length;a+=3){var f=i[a]*e,p=i[a+1]*e,m=i[a+2]*e;c+=Math.abs((r[f]-r[m])*(r[p+1]-r[f+1])-(r[f]-r[p])*(r[m+1]-r[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Um(r,t,e,i){for(var n=0,s=t,o=e-i;s<e;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}Jd.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var o=0;o<t;o++)e.vertices.push(r[n][s][o]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e};var xC=Gy.exports;const EC=ls(xC);var sd={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */sd.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,n=r&&!r.nodeType&&r,s=typeof me=="object"&&me;(s.global===s||s.window===s||s.self===s)&&(e=s);var o,a=2147483647,l=36,u=1,h=26,c=38,f=700,p=72,m=128,x="-",T=/^xn--/,v=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-u,A=Math.floor,M=String.fromCharCode,I;function P(L){throw new RangeError(_[L])}function U(L,D){for(var nt=L.length,_t=[];nt--;)_t[nt]=D(L[nt]);return _t}function B(L,D){var nt=L.split("@"),_t="";nt.length>1&&(_t=nt[0]+"@",L=nt[1]),L=L.replace(E,".");var yt=L.split("."),Ut=U(yt,D).join(".");return _t+Ut}function st(L){for(var D=[],nt=0,_t=L.length,yt,Ut;nt<_t;)yt=L.charCodeAt(nt++),yt>=55296&&yt<=56319&&nt<_t?(Ut=L.charCodeAt(nt++),(Ut&64512)==56320?D.push(((yt&1023)<<10)+(Ut&1023)+65536):(D.push(yt),nt--)):D.push(yt);return D}function X(L){return U(L,function(D){var nt="";return D>65535&&(D-=65536,nt+=M(D>>>10&1023|55296),D=56320|D&1023),nt+=M(D),nt}).join("")}function O(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:l}function G(L,D){return L+22+75*(L<26)-((D!=0)<<5)}function tt(L,D,nt){var _t=0;for(L=nt?A(L/f):L>>1,L+=A(L/D);L>w*h>>1;_t+=l)L=A(L/w);return A(_t+(w+1)*L/(L+c))}function at(L){var D=[],nt=L.length,_t,yt=0,Ut=m,It=p,Bt,Y,ne,Kt,pt,Gt,Ht,vt,Te;for(Bt=L.lastIndexOf(x),Bt<0&&(Bt=0),Y=0;Y<Bt;++Y)L.charCodeAt(Y)>=128&&P("not-basic"),D.push(L.charCodeAt(Y));for(ne=Bt>0?Bt+1:0;ne<nt;){for(Kt=yt,pt=1,Gt=l;ne>=nt&&P("invalid-input"),Ht=O(L.charCodeAt(ne++)),(Ht>=l||Ht>A((a-yt)/pt))&&P("overflow"),yt+=Ht*pt,vt=Gt<=It?u:Gt>=It+h?h:Gt-It,!(Ht<vt);Gt+=l)Te=l-vt,pt>A(a/Te)&&P("overflow"),pt*=Te;_t=D.length+1,It=tt(yt-Kt,_t,Kt==0),A(yt/_t)>a-Ut&&P("overflow"),Ut+=A(yt/_t),yt%=_t,D.splice(yt++,0,Ut)}return X(D)}function et(L){var D,nt,_t,yt,Ut,It,Bt,Y,ne,Kt,pt,Gt=[],Ht,vt,Te,ir;for(L=st(L),Ht=L.length,D=m,nt=0,Ut=p,It=0;It<Ht;++It)pt=L[It],pt<128&&Gt.push(M(pt));for(_t=yt=Gt.length,yt&&Gt.push(x);_t<Ht;){for(Bt=a,It=0;It<Ht;++It)pt=L[It],pt>=D&&pt<Bt&&(Bt=pt);for(vt=_t+1,Bt-D>A((a-nt)/vt)&&P("overflow"),nt+=(Bt-D)*vt,D=Bt,It=0;It<Ht;++It)if(pt=L[It],pt<D&&++nt>a&&P("overflow"),pt==D){for(Y=nt,ne=l;Kt=ne<=Ut?u:ne>=Ut+h?h:ne-Ut,!(Y<Kt);ne+=l)ir=Y-Kt,Te=l-Kt,Gt.push(M(G(Kt+ir%Te,0))),Y=A(ir/Te);Gt.push(M(G(Y,0))),Ut=tt(nt,vt,_t==yt),nt=0,++_t}++nt,++D}return Gt.join("")}function N(L){return B(L,function(D){return T.test(D)?at(D.slice(4).toLowerCase()):D})}function Q(L){return B(L,function(D){return v.test(D)?"xn--"+et(D):D})}if(o={version:"1.4.1",ucs2:{decode:st,encode:X},decode:at,encode:et,toASCII:Q,toUnicode:N},i&&n)if(r.exports==i)n.exports=o;else for(I in o)o.hasOwnProperty(I)&&(i[I]=o[I]);else e.punycode=o})(me)})(sd,sd.exports);var TC=sd.exports,wC=Error,bC=EvalError,SC=RangeError,AC=ReferenceError,rT=SyntaxError,rh=TypeError,CC=URIError,PC=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==n||o.enumerable!==!0)return!1}return!0},F_=typeof Symbol<"u"&&Symbol,IC=PC,RC=function(){return typeof F_!="function"||typeof Symbol!="function"||typeof F_("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:IC()},Gf={__proto__:null,foo:{}},OC=Object,MC=function(){return{__proto__:Gf}.foo===Gf.foo&&!(Gf instanceof OC)},LC="Function.prototype.bind called on incompatible ",FC=Object.prototype.toString,NC=Math.max,BC="[object Function]",N_=function(t,e){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var s=0;s<e.length;s+=1)i[s+t.length]=e[s];return i},kC=function(t,e){for(var i=[],n=e||0,s=0;n<t.length;n+=1,s+=1)i[s]=t[n];return i},DC=function(r,t){for(var e="",i=0;i<r.length;i+=1)e+=r[i],i+1<r.length&&(e+=t);return e},UC=function(t){var e=this;if(typeof e!="function"||FC.apply(e)!==BC)throw new TypeError(LC+e);for(var i=kC(arguments,1),n,s=function(){if(this instanceof n){var h=e.apply(this,N_(i,arguments));return Object(h)===h?h:this}return e.apply(t,N_(i,arguments))},o=NC(0,e.length-i.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(n=Function("binder","return function ("+DC(a,",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var u=function(){};u.prototype=e.prototype,n.prototype=new u,u.prototype=null}return n},GC=UC,Hy=Function.prototype.bind||GC,HC=Function.prototype.call,$C=Object.prototype.hasOwnProperty,XC=Hy,zC=XC.call(HC,$C),At,jC=wC,VC=bC,WC=SC,YC=AC,Ia=rT,fa=rh,KC=CC,iT=Function,Hf=function(r){try{return iT('"use strict"; return ('+r+").constructor;")()}catch{}},io=Object.getOwnPropertyDescriptor;if(io)try{io({},"")}catch{io=null}var $f=function(){throw new fa},qC=io?function(){try{return arguments.callee,$f}catch{try{return io(arguments,"callee").get}catch{return $f}}}():$f,No=RC(),ZC=MC(),Pe=Object.getPrototypeOf||(ZC?function(r){return r.__proto__}:null),Uo={},QC=typeof Uint8Array>"u"||!Pe?At:Pe(Uint8Array),no={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?At:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?At:ArrayBuffer,"%ArrayIteratorPrototype%":No&&Pe?Pe([][Symbol.iterator]()):At,"%AsyncFromSyncIteratorPrototype%":At,"%AsyncFunction%":Uo,"%AsyncGenerator%":Uo,"%AsyncGeneratorFunction%":Uo,"%AsyncIteratorPrototype%":Uo,"%Atomics%":typeof Atomics>"u"?At:Atomics,"%BigInt%":typeof BigInt>"u"?At:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?At:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?At:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?At:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":jC,"%eval%":eval,"%EvalError%":VC,"%Float32Array%":typeof Float32Array>"u"?At:Float32Array,"%Float64Array%":typeof Float64Array>"u"?At:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?At:FinalizationRegistry,"%Function%":iT,"%GeneratorFunction%":Uo,"%Int8Array%":typeof Int8Array>"u"?At:Int8Array,"%Int16Array%":typeof Int16Array>"u"?At:Int16Array,"%Int32Array%":typeof Int32Array>"u"?At:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":No&&Pe?Pe(Pe([][Symbol.iterator]())):At,"%JSON%":typeof JSON=="object"?JSON:At,"%Map%":typeof Map>"u"?At:Map,"%MapIteratorPrototype%":typeof Map>"u"||!No||!Pe?At:Pe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?At:Promise,"%Proxy%":typeof Proxy>"u"?At:Proxy,"%RangeError%":WC,"%ReferenceError%":YC,"%Reflect%":typeof Reflect>"u"?At:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?At:Set,"%SetIteratorPrototype%":typeof Set>"u"||!No||!Pe?At:Pe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?At:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":No&&Pe?Pe(""[Symbol.iterator]()):At,"%Symbol%":No?Symbol:At,"%SyntaxError%":Ia,"%ThrowTypeError%":qC,"%TypedArray%":QC,"%TypeError%":fa,"%Uint8Array%":typeof Uint8Array>"u"?At:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?At:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?At:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?At:Uint32Array,"%URIError%":KC,"%WeakMap%":typeof WeakMap>"u"?At:WeakMap,"%WeakRef%":typeof WeakRef>"u"?At:WeakRef,"%WeakSet%":typeof WeakSet>"u"?At:WeakSet};if(Pe)try{null.error}catch(r){var JC=Pe(Pe(r));no["%Error.prototype%"]=JC}var tP=function r(t){var e;if(t==="%AsyncFunction%")e=Hf("async function () {}");else if(t==="%GeneratorFunction%")e=Hf("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Hf("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&Pe&&(e=Pe(n.prototype))}return no[t]=e,e},B_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ih=Hy,od=zC,eP=ih.call(Function.call,Array.prototype.concat),rP=ih.call(Function.apply,Array.prototype.splice),k_=ih.call(Function.call,String.prototype.replace),ad=ih.call(Function.call,String.prototype.slice),iP=ih.call(Function.call,RegExp.prototype.exec),nP=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,sP=/\\(\\)?/g,oP=function(t){var e=ad(t,0,1),i=ad(t,-1);if(e==="%"&&i!=="%")throw new Ia("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Ia("invalid intrinsic syntax, expected opening `%`");var n=[];return k_(t,nP,function(s,o,a,l){n[n.length]=a?k_(l,sP,"$1"):o||s}),n},aP=function(t,e){var i=t,n;if(od(B_,i)&&(n=B_[i],i="%"+n[0]+"%"),od(no,i)){var s=no[i];if(s===Uo&&(s=tP(i)),typeof s>"u"&&!e)throw new fa("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new Ia("intrinsic "+t+" does not exist!")},ka=function(t,e){if(typeof t!="string"||t.length===0)throw new fa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new fa('"allowMissing" argument must be a boolean');if(iP(/^%?[^%]*%?$/,t)===null)throw new Ia("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=oP(t),n=i.length>0?i[0]:"",s=aP("%"+n+"%",e),o=s.name,a=s.value,l=!1,u=s.alias;u&&(n=u[0],rP(i,eP([0,1],u)));for(var h=1,c=!0;h<i.length;h+=1){var f=i[h],p=ad(f,0,1),m=ad(f,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Ia("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(l=!0),n+="."+f,o="%"+n+"%",od(no,o))a=no[o];else if(a!=null){if(!(f in a)){if(!e)throw new fa("base intrinsic for "+t+" exists, but the property is not available.");return}if(io&&h+1>=i.length){var x=io(a,f);c=!!x,c&&"get"in x&&!("originalValue"in x.get)?a=x.get:a=a[f]}else c=od(a,f),a=a[f];c&&!l&&(no[o]=a)}}return a},nT={exports:{}},Xf,D_;function $y(){if(D_)return Xf;D_=1;var r=ka,t=r("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Xf=t,Xf}var lP=ka,xc=lP("%Object.getOwnPropertyDescriptor%",!0);if(xc)try{xc([],"length")}catch{xc=null}var sT=xc,U_=$y(),uP=rT,Bo=rh,G_=sT,hP=function(t,e,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Bo("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Bo("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Bo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Bo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Bo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Bo("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!G_&&G_(t,e);if(U_)U_(t,e,{configurable:o===null&&l?l.configurable:!o,enumerable:n===null&&l?l.enumerable:!n,value:i,writable:s===null&&l?l.writable:!s});else if(a||!n&&!s&&!o)t[e]=i;else throw new uP("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Gm=$y(),oT=function(){return!!Gm};oT.hasArrayLengthDefineBug=function(){if(!Gm)return null;try{return Gm([],"length",{value:1}).length!==1}catch{return!0}};var cP=oT,dP=ka,H_=hP,fP=cP(),$_=sT,X_=rh,pP=dP("%Math.floor%"),mP=function(t,e){if(typeof t!="function")throw new X_("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||pP(e)!==e)throw new X_("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,s=!0;if("length"in t&&$_){var o=$_(t,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(s=!1)}return(n||s||!i)&&(fP?H_(t,"length",e,!0,!0):H_(t,"length",e)),t};(function(r){var t=Hy,e=ka,i=mP,n=rh,s=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||t.call(o,s),l=$y(),u=e("%Math.max%");r.exports=function(f){if(typeof f!="function")throw new n("a function is required");var p=a(t,o,arguments);return i(p,1+u(0,f.length-(arguments.length-1)),!0)};var h=function(){return a(t,s,arguments)};l?l(r.exports,"apply",{value:h}):r.exports.apply=h})(nT);var gP=nT.exports,aT=ka,lT=gP,yP=lT(aT("String.prototype.indexOf")),vP=function(t,e){var i=aT(t,!!e);return typeof i=="function"&&yP(t,".prototype.")>-1?lT(i):i};const _P={},xP=Object.freeze(Object.defineProperty({__proto__:null,default:_P},Symbol.toStringTag,{value:"Module"})),EP=Nb(xP);var Xy=typeof Map=="function"&&Map.prototype,zf=Object.getOwnPropertyDescriptor&&Xy?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ld=Xy&&zf&&typeof zf.get=="function"?zf.get:null,z_=Xy&&Map.prototype.forEach,zy=typeof Set=="function"&&Set.prototype,jf=Object.getOwnPropertyDescriptor&&zy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ud=zy&&jf&&typeof jf.get=="function"?jf.get:null,j_=zy&&Set.prototype.forEach,TP=typeof WeakMap=="function"&&WeakMap.prototype,gu=TP?WeakMap.prototype.has:null,wP=typeof WeakSet=="function"&&WeakSet.prototype,yu=wP?WeakSet.prototype.has:null,bP=typeof WeakRef=="function"&&WeakRef.prototype,V_=bP?WeakRef.prototype.deref:null,SP=Boolean.prototype.valueOf,AP=Object.prototype.toString,CP=Function.prototype.toString,PP=String.prototype.match,jy=String.prototype.slice,jn=String.prototype.replace,IP=String.prototype.toUpperCase,W_=String.prototype.toLowerCase,uT=RegExp.prototype.test,Y_=Array.prototype.concat,Fi=Array.prototype.join,RP=Array.prototype.slice,K_=Math.floor,Hm=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Vf=Object.getOwnPropertySymbols,$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ra||!0)?Symbol.toStringTag:null,hT=Object.prototype.propertyIsEnumerable,q_=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Z_(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||uT.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-K_(-r):K_(r);if(i!==r){var n=String(i),s=jy.call(t,n.length+1);return jn.call(n,e,"$&_")+"."+jn.call(jn.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return jn.call(t,e,"$&_")}var Xm=EP,Q_=Xm.custom,J_=dT(Q_)?Q_:null,OP=function r(t,e,i,n){var s=e||{};if(Dn(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Dn(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Dn(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Dn(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Dn(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return pT(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?Z_(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return a?Z_(t,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=h&&h>0&&typeof t=="object")return zm(t)?"[Array]":"[Object]";var c=KP(s,i);if(typeof n>"u")n=[];else if(fT(n,t)>=0)return"[Circular]";function f(O,G,tt){if(G&&(n=RP.call(n),n.push(G)),tt){var at={depth:s.depth};return Dn(s,"quoteStyle")&&(at.quoteStyle=s.quoteStyle),r(O,at,i+1,n)}return r(O,s,i+1,n)}if(typeof t=="function"&&!t0(t)){var p=GP(t),m=Lh(t,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Fi.call(m,", ")+" }":"")}if(dT(t)){var x=Ra?jn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):$m.call(t);return typeof t=="object"&&!Ra?Gl(x):x}if(VP(t)){for(var T="<"+W_.call(String(t.nodeName)),v=t.attributes||[],E=0;E<v.length;E++)T+=" "+v[E].name+"="+cT(MP(v[E].value),"double",s);return T+=">",t.childNodes&&t.childNodes.length&&(T+="..."),T+="</"+W_.call(String(t.nodeName))+">",T}if(zm(t)){if(t.length===0)return"[]";var _=Lh(t,f);return c&&!YP(_)?"["+jm(_,c)+"]":"[ "+Fi.call(_,", ")+" ]"}if(FP(t)){var w=Lh(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!hT.call(t,"cause")?"{ ["+String(t)+"] "+Fi.call(Y_.call("[cause]: "+f(t.cause),w),", ")+" }":w.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Fi.call(w,", ")+" }"}if(typeof t=="object"&&o){if(J_&&typeof t[J_]=="function"&&Xm)return Xm(t,{depth:h-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(HP(t)){var A=[];return z_&&z_.call(t,function(O,G){A.push(f(G,t,!0)+" => "+f(O,t))}),e0("Map",ld.call(t),A,c)}if(zP(t)){var M=[];return j_&&j_.call(t,function(O){M.push(f(O,t))}),e0("Set",ud.call(t),M,c)}if($P(t))return Wf("WeakMap");if(jP(t))return Wf("WeakSet");if(XP(t))return Wf("WeakRef");if(BP(t))return Gl(f(Number(t)));if(DP(t))return Gl(f(Hm.call(t)));if(kP(t))return Gl(SP.call(t));if(NP(t))return Gl(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===me)return"{ [object globalThis] }";if(!LP(t)&&!t0(t)){var I=Lh(t,f),P=q_?q_(t)===Object.prototype:t instanceof Object||t.constructor===Object,U=t instanceof Object?"":"null prototype",B=!P&&Ve&&Object(t)===t&&Ve in t?jy.call(ds(t),8,-1):U?"Object":"",st=P||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",X=st+(B||U?"["+Fi.call(Y_.call([],B||[],U||[]),": ")+"] ":"");return I.length===0?X+"{}":c?X+"{"+jm(I,c)+"}":X+"{ "+Fi.call(I,", ")+" }"}return String(t)};function cT(r,t,e){var i=(e.quoteStyle||t)==="double"?'"':"'";return i+r+i}function MP(r){return jn.call(String(r),/"/g,"&quot;")}function zm(r){return ds(r)==="[object Array]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function LP(r){return ds(r)==="[object Date]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function t0(r){return ds(r)==="[object RegExp]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function FP(r){return ds(r)==="[object Error]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function NP(r){return ds(r)==="[object String]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function BP(r){return ds(r)==="[object Number]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function kP(r){return ds(r)==="[object Boolean]"&&(!Ve||!(typeof r=="object"&&Ve in r))}function dT(r){if(Ra)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!$m)return!1;try{return $m.call(r),!0}catch{}return!1}function DP(r){if(!r||typeof r!="object"||!Hm)return!1;try{return Hm.call(r),!0}catch{}return!1}var UP=Object.prototype.hasOwnProperty||function(r){return r in this};function Dn(r,t){return UP.call(r,t)}function ds(r){return AP.call(r)}function GP(r){if(r.name)return r.name;var t=PP.call(CP.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function fT(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function HP(r){if(!ld||!r||typeof r!="object")return!1;try{ld.call(r);try{ud.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function $P(r){if(!gu||!r||typeof r!="object")return!1;try{gu.call(r,gu);try{yu.call(r,yu)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function XP(r){if(!V_||!r||typeof r!="object")return!1;try{return V_.call(r),!0}catch{}return!1}function zP(r){if(!ud||!r||typeof r!="object")return!1;try{ud.call(r);try{ld.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function jP(r){if(!yu||!r||typeof r!="object")return!1;try{yu.call(r,yu);try{gu.call(r,gu)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function VP(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function pT(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return pT(jy.call(r,0,t.maxStringLength),t)+i}var n=jn.call(jn.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,WP);return cT(n,"single",t)}function WP(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+IP.call(t.toString(16))}function Gl(r){return"Object("+r+")"}function Wf(r){return r+" { ? }"}function e0(r,t,e,i){var n=i?jm(e,i):Fi.call(e,", ");return r+" ("+t+") {"+n+"}"}function YP(r){for(var t=0;t<r.length;t++)if(fT(r[t],`
`)>=0)return!1;return!0}function KP(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=Fi.call(Array(r.indent+1)," ");else return null;return{base:e,prev:Fi.call(Array(t+1),e)}}function jm(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+Fi.call(r,","+e)+`
`+t.prev}function Lh(r,t){var e=zm(r),i=[];if(e){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=Dn(r,n)?t(r[n],r):""}var s=typeof Vf=="function"?Vf(r):[],o;if(Ra){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in r)Dn(r,l)&&(e&&String(Number(l))===l&&l<r.length||Ra&&o["$"+l]instanceof Symbol||(uT.call(/[^\w$]/,l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if(typeof Vf=="function")for(var u=0;u<s.length;u++)hT.call(r,s[u])&&i.push("["+t(s[u])+"]: "+t(r[s[u]],r));return i}var mT=ka,Da=vP,qP=OP,ZP=rh,Fh=mT("%WeakMap%",!0),Nh=mT("%Map%",!0),QP=Da("WeakMap.prototype.get",!0),JP=Da("WeakMap.prototype.set",!0),tI=Da("WeakMap.prototype.has",!0),eI=Da("Map.prototype.get",!0),rI=Da("Map.prototype.set",!0),iI=Da("Map.prototype.has",!0),Vy=function(r,t){for(var e=r,i;(i=e.next)!==null;e=i)if(i.key===t)return e.next=i.next,i.next=r.next,r.next=i,i},nI=function(r,t){var e=Vy(r,t);return e&&e.value},sI=function(r,t,e){var i=Vy(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},oI=function(r,t){return!!Vy(r,t)},aI=function(){var t,e,i,n={assert:function(s){if(!n.has(s))throw new ZP("Side channel does not contain "+qP(s))},get:function(s){if(Fh&&s&&(typeof s=="object"||typeof s=="function")){if(t)return QP(t,s)}else if(Nh){if(e)return eI(e,s)}else if(i)return nI(i,s)},has:function(s){if(Fh&&s&&(typeof s=="object"||typeof s=="function")){if(t)return tI(t,s)}else if(Nh){if(e)return iI(e,s)}else if(i)return oI(i,s);return!1},set:function(s,o){Fh&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new Fh),JP(t,s,o)):Nh?(e||(e=new Nh),rI(e,s,o)):(i||(i={key:{},next:null}),sI(i,s,o))}};return n},lI=String.prototype.replace,uI=/%20/g,Yf={RFC1738:"RFC1738",RFC3986:"RFC3986"},Wy={default:Yf.RFC3986,formatters:{RFC1738:function(r){return lI.call(r,uI,"+")},RFC3986:function(r){return String(r)}},RFC1738:Yf.RFC1738,RFC3986:Yf.RFC3986},hI=Wy,Kf=Object.prototype.hasOwnProperty,Ys=Array.isArray,Si=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),cI=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Ys(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);e.obj[e.prop]=n}}},gT=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)typeof t[n]<"u"&&(i[n]=t[n]);return i},dI=function r(t,e,i){if(!e)return t;if(typeof e!="object"){if(Ys(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Kf.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var n=t;return Ys(t)&&!Ys(e)&&(n=gT(t,i)),Ys(t)&&Ys(e)?(e.forEach(function(s,o){if(Kf.call(t,o)){var a=t[o];a&&typeof a=="object"&&s&&typeof s=="object"?t[o]=r(a,s,i):t.push(s)}else t[o]=s}),t):Object.keys(e).reduce(function(s,o){var a=e[o];return Kf.call(s,o)?s[o]=r(s[o],a,i):s[o]=a,s},n)},fI=function(t,e){return Object.keys(e).reduce(function(i,n){return i[n]=e[n],i},t)},pI=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},mI=function(t,e,i,n,s){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var u=o.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===hI.RFC1738&&(u===40||u===41)){a+=o.charAt(l);continue}if(u<128){a=a+Si[u];continue}if(u<2048){a=a+(Si[192|u>>6]+Si[128|u&63]);continue}if(u<55296||u>=57344){a=a+(Si[224|u>>12]+Si[128|u>>6&63]+Si[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|o.charCodeAt(l)&1023),a+=Si[240|u>>18]+Si[128|u>>12&63]+Si[128|u>>6&63]+Si[128|u&63]}return a},gI=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],n=0;n<e.length;++n)for(var s=e[n],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&i.indexOf(h)===-1&&(e.push({obj:o,prop:u}),i.push(h))}return cI(e),t},yI=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},vI=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},_I=function(t,e){return[].concat(t,e)},xI=function(t,e){if(Ys(t)){for(var i=[],n=0;n<t.length;n+=1)i.push(e(t[n]));return i}return e(t)},yT={arrayToObject:gT,assign:fI,combine:_I,compact:gI,decode:pI,encode:mI,isBuffer:vI,isRegExp:yI,maybeMap:xI,merge:dI},vT=aI,Ec=yT,vu=Wy,EI=Object.prototype.hasOwnProperty,r0={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},sn=Array.isArray,TI=Array.prototype.push,_T=function(r,t){TI.apply(r,sn(t)?t:[t])},wI=Date.prototype.toISOString,i0=vu.default,He={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ec.encode,encodeValuesOnly:!1,format:i0,formatter:vu.formatters[i0],indices:!1,serializeDate:function(t){return wI.call(t)},skipNulls:!1,strictNullHandling:!1},bI=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},qf={},SI=function r(t,e,i,n,s,o,a,l,u,h,c,f,p,m,x,T){for(var v=t,E=T,_=0,w=!1;(E=E.get(qf))!==void 0&&!w;){var A=E.get(t);if(_+=1,typeof A<"u"){if(A===_)throw new RangeError("Cyclic object value");w=!0}typeof E.get(qf)>"u"&&(_=0)}if(typeof l=="function"?v=l(e,v):v instanceof Date?v=c(v):i==="comma"&&sn(v)&&(v=Ec.maybeMap(v,function(at){return at instanceof Date?c(at):at})),v===null){if(s)return a&&!m?a(e,He.encoder,x,"key",f):e;v=""}if(bI(v)||Ec.isBuffer(v)){if(a){var M=m?e:a(e,He.encoder,x,"key",f);return[p(M)+"="+p(a(v,He.encoder,x,"value",f))]}return[p(e)+"="+p(String(v))]}var I=[];if(typeof v>"u")return I;var P;if(i==="comma"&&sn(v))m&&a&&(v=Ec.maybeMap(v,a)),P=[{value:v.length>0?v.join(",")||null:void 0}];else if(sn(l))P=l;else{var U=Object.keys(v);P=u?U.sort(u):U}for(var B=n&&sn(v)&&v.length===1?e+"[]":e,st=0;st<P.length;++st){var X=P[st],O=typeof X=="object"&&typeof X.value<"u"?X.value:v[X];if(!(o&&O===null)){var G=sn(v)?typeof i=="function"?i(B,X):B:B+(h?"."+X:"["+X+"]");T.set(t,_);var tt=vT();tt.set(qf,T),_T(I,r(O,G,i,n,s,o,i==="comma"&&m&&sn(v)?null:a,l,u,h,c,f,p,m,x,tt))}}return I},AI=function(t){if(!t)return He;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||He.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=vu.default;if(typeof t.format<"u"){if(!EI.call(vu.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var n=vu.formatters[i],s=He.filter;return(typeof t.filter=="function"||sn(t.filter))&&(s=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:He.addQueryPrefix,allowDots:typeof t.allowDots>"u"?He.allowDots:!!t.allowDots,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:He.charsetSentinel,delimiter:typeof t.delimiter>"u"?He.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:He.encode,encoder:typeof t.encoder=="function"?t.encoder:He.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:He.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:He.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:He.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:He.strictNullHandling}},CI=function(r,t){var e=r,i=AI(t),n,s;typeof i.filter=="function"?(s=i.filter,e=s("",e)):sn(i.filter)&&(s=i.filter,n=s);var o=[];if(typeof e!="object"||e===null)return"";var a;t&&t.arrayFormat in r0?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var l=r0[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&t&&t.commaRoundTrip;n||(n=Object.keys(e)),i.sort&&n.sort(i.sort);for(var h=vT(),c=0;c<n.length;++c){var f=n[c];i.skipNulls&&e[f]===null||_T(o,SI(e[f],f,l,u,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,h))}var p=o.join(i.delimiter),m=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""},Oa=yT,Vm=Object.prototype.hasOwnProperty,PI=Array.isArray,Ce={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Oa.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},II=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},xT=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},RI="utf8=%26%2310003%3B",OI="utf8=%E2%9C%93",MI=function(t,e){var i={__proto__:null},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,o=n.split(e.delimiter,s),a=-1,l,u=e.charset;if(e.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===OI?u="utf-8":o[l]===RI&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),f=c===-1?h.indexOf("="):c+1,p,m;f===-1?(p=e.decoder(h,Ce.decoder,u,"key"),m=e.strictNullHandling?null:""):(p=e.decoder(h.slice(0,f),Ce.decoder,u,"key"),m=Oa.maybeMap(xT(h.slice(f+1),e),function(x){return e.decoder(x,Ce.decoder,u,"value")})),m&&e.interpretNumericEntities&&u==="iso-8859-1"&&(m=II(m)),h.indexOf("[]=")>-1&&(m=PI(m)?[m]:m),Vm.call(i,p)?i[p]=Oa.combine(i[p],m):i[p]=m}return i},LI=function(r,t,e,i){for(var n=i?t:xT(t,e),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&e.parseArrays)o=[].concat(n);else{o=e.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(l,10);!e.parseArrays&&l===""?o={0:n}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(o=[],o[u]=n):l!=="__proto__"&&(o[l]=n)}n=o}return n},FI=function(t,e,i,n){if(t){var s=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!i.plainObjects&&Vm.call(Object.prototype,u)&&!i.allowPrototypes)return;h.push(u)}for(var c=0;i.depth>0&&(l=a.exec(s))!==null&&c<i.depth;){if(c+=1,!i.plainObjects&&Vm.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;h.push(l[1])}return l&&h.push("["+s.slice(l.index)+"]"),LI(h,e,i,n)}},NI=function(t){if(!t)return Ce;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Ce.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?Ce.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ce.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ce.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ce.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ce.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ce.comma,decoder:typeof t.decoder=="function"?t.decoder:Ce.decoder,delimiter:typeof t.delimiter=="string"||Oa.isRegExp(t.delimiter)?t.delimiter:Ce.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ce.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ce.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ce.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ce.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ce.strictNullHandling}},BI=function(r,t){var e=NI(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?MI(r,e):r,n=e.plainObjects?Object.create(null):{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],l=FI(a,i[a],e,typeof r=="string");n=Oa.merge(n,l,e)}return e.allowSparse===!0?n:Oa.compact(n)},kI=CI,DI=BI,UI=Wy,GI={formats:UI,parse:DI,stringify:kI},HI=TC;function pn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var $I=/^([a-z0-9.+-]+:)/i,XI=/:[0-9]*$/,zI=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,jI=["<",">",'"',"`"," ","\r",`
`,"	"],VI=["{","}","|","\\","^","`"].concat(jI),Wm=["'"].concat(VI),n0=["%","/","?",";","#"].concat(Wm),s0=["/","?","#"],WI=255,o0=/^[+a-z0-9A-Z_-]{0,63}$/,YI=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,KI={javascript:!0,"javascript:":!0},Ym={javascript:!0,"javascript:":!0},pa={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Km=GI;function ET(r,t,e){if(r&&typeof r=="object"&&r instanceof pn)return r;var i=new pn;return i.parse(r,t,e),i}pn.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(n);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=zI.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Km.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=$I.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(e||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&Ym[u])&&(a=a.substr(2),this.slashes=!0)}if(!Ym[u]&&(c||u&&!pa[u])){for(var f=-1,p=0;p<s0.length;p++){var m=a.indexOf(s0[p]);m!==-1&&(f===-1||m<f)&&(f=m)}var x,T;f===-1?T=a.lastIndexOf("@"):T=a.lastIndexOf("@",f),T!==-1&&(x=a.slice(0,T),a=a.slice(T+1),this.auth=decodeURIComponent(x)),f=-1;for(var p=0;p<n0.length;p++){var m=a.indexOf(n0[p]);m!==-1&&(f===-1||m<f)&&(f=m)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var E=this.hostname.split(/\./),p=0,_=E.length;p<_;p++){var w=E[p];if(w&&!w.match(o0)){for(var A="",M=0,I=w.length;M<I;M++)w.charCodeAt(M)>127?A+="x":A+=w[M];if(!A.match(o0)){var P=E.slice(0,p),U=E.slice(p+1),B=w.match(YI);B&&(P.push(B[1]),U.unshift(B[2])),U.length&&(a="/"+U.join(".")+a),this.hostname=P.join(".");break}}}this.hostname.length>WI?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=HI.toASCII(this.hostname));var st=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+st,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!KI[h])for(var p=0,_=Wm.length;p<_;p++){var O=Wm[p];if(a.indexOf(O)!==-1){var G=encodeURIComponent(O);G===O&&(G=escape(O)),a=a.split(O).join(G)}}var tt=a.indexOf("#");tt!==-1&&(this.hash=a.substr(tt),a=a.slice(0,tt));var at=a.indexOf("?");if(at!==-1?(this.search=a.substr(at),this.query=a.substr(at+1),t&&(this.query=Km.parse(this.query)),a=a.slice(0,at)):t&&(this.search="",this.query={}),a&&(this.pathname=a),pa[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var st=this.pathname||"",et=this.search||"";this.path=st+et}return this.href=this.format(),this};pn.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Km.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||pa[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+n+e+o+i};pn.prototype.resolve=function(r){return this.resolveObject(ET(r,!1,!0)).format()};pn.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new pn;t.parse(r,!1,!0),r=t}for(var e=new pn,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];e[s]=this[s]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=r[l])}return pa[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!pa[r.protocol]){for(var u=Object.keys(r),h=0;h<u.length;h++){var c=u[h];e[c]=r[c]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!Ym[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),e.pathname=_.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var f=e.pathname||"",p=e.search||"";e.path=f+p}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var m=e.pathname&&e.pathname.charAt(0)==="/",x=r.host||r.pathname&&r.pathname.charAt(0)==="/",T=x||m||e.host&&r.pathname,v=T,E=e.pathname&&e.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],w=e.protocol&&!pa[e.protocol];if(w&&(e.hostname="",e.port=null,e.host&&(E[0]===""?E[0]=e.host:E.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),T=T&&(_[0]===""||E[0]==="")),x)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,E=_;else if(_.length)E||(E=[]),E.pop(),E=E.concat(_),e.search=r.search,e.query=r.query;else if(r.search!=null){if(w){e.host=E.shift(),e.hostname=e.host;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!E.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var M=E.slice(-1)[0],I=(e.host||r.host||E.length>1)&&(M==="."||M==="..")||M==="",P=0,U=E.length;U>=0;U--)M=E[U],M==="."?E.splice(U,1):M===".."?(E.splice(U,1),P++):P&&(E.splice(U,1),P--);if(!T&&!v)for(;P--;P)E.unshift("..");T&&E[0]!==""&&(!E[0]||E[0].charAt(0)!=="/")&&E.unshift(""),I&&E.join("/").substr(-1)!=="/"&&E.push("");var B=E[0]===""||E[0]&&E[0].charAt(0)==="/";if(w){e.hostname=B?"":E.length?E.shift():"",e.host=e.hostname;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return T=T||e.host&&E.length,T&&!B&&E.unshift(""),E.length>0?e.pathname=E.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};pn.prototype.parseHost=function(){var r=this.host,t=XI.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var qI=ET;const a0={};function bt(r,t,e=3){if(a0[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),a0[t]=!0}function ti(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Hl(r){return r.split("?")[0].split("#")[0]}function ZI(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function QI(r,t,e){return r.replace(new RegExp(ZI(t),"g"),e)}function JI(r,t){let e="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),n=a,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,n=a,s=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+=`/${r.slice(n+1,a)}`:e=r.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return e}const Ee={toPosix(r){return QI(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){ti(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(ti(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=Hl(this.toPosix(t??Z.ADAPTER.getBaseUrl())),n=Hl(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Ee.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(ti(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=JI(r,!1),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return ti(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(ti(i),i.length>0)if(t===void 0)t=i;else{const n=r[e-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(ti(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,n=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!n){i=a;break}}else n=!1;return i===-1?e?"/":this.isUrl(o)?s+r:s:e&&i===1?"//":s+r.slice(0,i)},rootname(r){ti(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){ti(r),t&&ti(t),r=Hl(this.toPosix(r));let e=0,i=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let o=t.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!n){e=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){e=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(e,i)},extname(r){ti(r),r=Hl(this.toPosix(r));let t=-1,e=0,i=-1,n=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!n){e=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){ti(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=Hl(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let n;t.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,o=0,a=-1,l=!0,u=r.length-1,h=0;for(;u>=n;--u){if(e=r.charCodeAt(u),e===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),e===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?t.base=t.name=r.slice(1,a):t.base=t.name=r.slice(o,a)):(o===0&&i?(t.name=r.slice(1,s),t.base=r.slice(1,a)):(t.name=r.slice(o,s),t.base=r.slice(o,a)),t.ext=r.slice(s,a)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Zf;async function tR(){return Zf??(Zf=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return lr.UNPACK;const t=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return lr.UNPACK;const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.deleteFramebuffer(i),r.deleteTexture(e),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?lr.PMA:lr.UNPACK})()),Zf}let Qf;function eR(){return typeof Qf>"u"&&(Qf=function(){var t;const r={stencil:!0,failIfMajorPerformanceCaveat:Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Z.ADAPTER.getWebGLRenderingContext())return!1;const e=Z.ADAPTER.createCanvas();let i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);const n=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),Qf}var rR={grad:.9,turn:360,rad:360/(2*Math.PI)},tn=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Re=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Ur=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},TT=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},l0=function(r){return{r:Ur(r.r,0,255),g:Ur(r.g,0,255),b:Ur(r.b,0,255),a:Ur(r.a)}},Jf=function(r){return{r:Re(r.r),g:Re(r.g),b:Re(r.b),a:Re(r.a,3)}},iR=/^#([0-9a-f]{3,8})$/i,Bh=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},wT=function(r){var t=r.r,e=r.g,i=r.b,n=r.a,s=Math.max(t,e,i),o=s-Math.min(t,e,i),a=o?s===t?(e-i)/o:s===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},bT=function(r){var t=r.h,e=r.s,i=r.v,n=r.a;t=t/360*6,e/=100,i/=100;var s=Math.floor(t),o=i*(1-e),a=i*(1-(t-s)*e),l=i*(1-(1-t+s)*e),u=s%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:n}},u0=function(r){return{h:TT(r.h),s:Ur(r.s,0,100),l:Ur(r.l,0,100),a:Ur(r.a)}},h0=function(r){return{h:Re(r.h),s:Re(r.s),l:Re(r.l),a:Re(r.a,3)}},c0=function(r){return bT((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},_u=function(r){return{h:(t=wT(r)).h,s:(n=(200-(e=t.s))*(i=t.v)/100)>0&&n<200?e*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,e,i,n},nR=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sR=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oR=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aR=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qm={string:[[function(r){var t=iR.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Re(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Re(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=oR.exec(r)||aR.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:l0({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=nR.exec(r)||sR.exec(r);if(!t)return null;var e,i,n=u0({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(rR[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return c0(n)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,n=r.a,s=n===void 0?1:n;return tn(t)&&tn(e)&&tn(i)?l0({r:Number(t),g:Number(e),b:Number(i),a:Number(s)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,n=r.a,s=n===void 0?1:n;if(!tn(t)||!tn(e)||!tn(i))return null;var o=u0({h:Number(t),s:Number(e),l:Number(i),a:Number(s)});return c0(o)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,n=r.a,s=n===void 0?1:n;if(!tn(t)||!tn(e)||!tn(i))return null;var o=function(a){return{h:TT(a.h),s:Ur(a.s,0,100),v:Ur(a.v,0,100),a:Ur(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(s)});return bT(o)},"hsv"]]},d0=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},lR=function(r){return typeof r=="string"?d0(r.trim(),qm.string):typeof r=="object"&&r!==null?d0(r,qm.object):[null,void 0]},tp=function(r,t){var e=_u(r);return{h:e.h,s:Ur(e.s+100*t,0,100),l:e.l,a:e.a}},ep=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},f0=function(r,t){var e=_u(r);return{h:e.h,s:e.s,l:Ur(e.l+100*t,0,100),a:e.a}},Zm=function(){function r(t){this.parsed=lR(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Re(ep(this.rgba),2)},r.prototype.isDark=function(){return ep(this.rgba)<.5},r.prototype.isLight=function(){return ep(this.rgba)>=.5},r.prototype.toHex=function(){return t=Jf(this.rgba),e=t.r,i=t.g,n=t.b,o=(s=t.a)<1?Bh(Re(255*s)):"","#"+Bh(e)+Bh(i)+Bh(n)+o;var t,e,i,n,s,o},r.prototype.toRgb=function(){return Jf(this.rgba)},r.prototype.toRgbString=function(){return t=Jf(this.rgba),e=t.r,i=t.g,n=t.b,(s=t.a)<1?"rgba("+e+", "+i+", "+n+", "+s+")":"rgb("+e+", "+i+", "+n+")";var t,e,i,n,s},r.prototype.toHsl=function(){return h0(_u(this.rgba))},r.prototype.toHslString=function(){return t=h0(_u(this.rgba)),e=t.h,i=t.s,n=t.l,(s=t.a)<1?"hsla("+e+", "+i+"%, "+n+"%, "+s+")":"hsl("+e+", "+i+"%, "+n+"%)";var t,e,i,n,s},r.prototype.toHsv=function(){return t=wT(this.rgba),{h:Re(t.h),s:Re(t.s),v:Re(t.v),a:Re(t.a,3)};var t},r.prototype.invert=function(){return Ai({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),Ai(tp(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),Ai(tp(this.rgba,-t))},r.prototype.grayscale=function(){return Ai(tp(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),Ai(f0(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),Ai(f0(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?Ai({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Re(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=_u(this.rgba);return typeof t=="number"?Ai({h:t,s:e.s,l:e.l,a:e.a}):Re(e.h)},r.prototype.isEqual=function(t){return this.toHex()===Ai(t).toHex()},r}(),Ai=function(r){return r instanceof Zm?r:new Zm(r)},p0=[],uR=function(r){r.forEach(function(t){p0.indexOf(t)<0&&(t(Zm,qm),p0.push(t))})};function hR(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in e)i[e[n]]=n;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,f="black";if(!s.length)for(var p in e)s[p]=new r(e[p]).toRgb();for(var m in e){var x=(a=h,l=s[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));x<c&&(c=x,f=m)}return f}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new r(l).toRgb():null},"name"])}uR([hR]);const Go=class Tc{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Tc)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,s)=>n===e[s]);if(t!==null&&e!==null){const n=Object.keys(t),s=Object.keys(e);return n.length!==s.length?!1:n.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,n]=this._components;return{r:t,g:e,b:i,a:n}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,i,n]=this._components;return t[0]=e,t[1]=i,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,n,s]=Tc.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return e&&(i=i*t+.5|0,n=n*t+.5|0,s=s*t+.5|0),(t*255<<24)+(i<<16)+(n<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,n,s]=this._components;return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}normalize(t){let e,i,n,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,n=(o&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,n,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,n,s=255]=t,e/=255,i/=255,n/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Tc.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=Ai(t);o.isValid()&&({r:e,g:i,b:n,a:s}=o.rgba,e/=255,i/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((n,s)=>{t[s]=Math.min(Math.max(n,e),i)}),t)}};Go.shared=new Go,Go.temp=new Go,Go.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let jt=Go;function cR(r){return bt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),jt.shared.setValue(r).toHex()}function dR(r){return bt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),jt.shared.setValue(r).toNumber()}function fR(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[ht.NORMAL_NPM]=ht.NORMAL,r[ht.ADD_NPM]=ht.ADD,r[ht.SCREEN_NPM]=ht.SCREEN,t[ht.NORMAL]=ht.NORMAL_NPM,t[ht.ADD]=ht.ADD_NPM,t[ht.SCREEN]=ht.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const ST=fR();function AT(r,t){return ST[t?1:0][r]}function pR(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function CT(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function hd(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function m0(r){return!(r&r-1)&&!!r}function g0(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function ma(r,t,e){const i=r.length;let n;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}function Vn(r){return r===0?0:r<0?-1:1}let mR=0;function go(){return++mR}const Qm=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Qm.EMPTY=new Qm(0,0,0,0);let y0=Qm;const v0={},Ci=Object.create(null),Mn=Object.create(null);class gR{constructor(t,e,i){this._canvas=Z.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||Z.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function _0(r,t,e){for(let i=0,n=4*e*t;i<t;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function x0(r,t,e,i,n){const s=4*t;for(let o=i,a=i*s+4*e;o<=n;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function yR(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,t,e).data;let s=0,o=0,a=t-1,l=e-1;for(;o<e&&_0(n,t,o);)++o;if(o===e)return y0.EMPTY;for(;_0(n,t,l);)--l;for(;x0(n,t,s,o,l);)++s;for(;x0(n,t,a,o,l);)--a;return++a,++l,new y0(s,o,a,l)}function vR(r){const t=yR(r),{width:e,height:i}=t;let n=null;if(!t.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:n}}function _R(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function xn(r,t=1){var i;const e=(i=Z.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var V=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(V||{});const Jm=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},E0=(r,t)=>Jm(r).priority??t,rt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Jm).forEach(t=>{t.type.forEach(e=>{var i,n;return(n=(i=this._removeHandlers)[e])==null?void 0:n.call(i,t)})}),this},add(...r){return r.map(Jm).forEach(t=>{t.type.forEach(e=>{var s,o;const i=this._addHandlers,n=this._queue;i[e]?(s=i[e])==null||s.call(i,t):(n[e]=n[e]||[],(o=n[e])==null||o.push(t))})}),this},handle(r,t,e){var o;const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,n[r]=e;const s=this._queue;return s[r]&&((o=s[r])==null||o.forEach(a=>t(a)),delete s[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((n,s)=>E0(s,e)-E0(n,e)))},i=>{const n=t.indexOf(i.ref);n!==-1&&t.splice(n,1)})}};let tg=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}};const xR=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function ER(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function TR(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=xR.replace(/%forloop%/gi,ER(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const rp=0,ip=1,np=2,sp=3,op=4,ap=5;let fs=class PT{constructor(){this.data=0,this.blendMode=ht.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<rp)}set blend(t){!!(this.data&1<<rp)!==t&&(this.data^=1<<rp)}get offsets(){return!!(this.data&1<<ip)}set offsets(t){!!(this.data&1<<ip)!==t&&(this.data^=1<<ip)}get culling(){return!!(this.data&1<<np)}set culling(t){!!(this.data&1<<np)!==t&&(this.data^=1<<np)}get depthTest(){return!!(this.data&1<<sp)}set depthTest(t){!!(this.data&1<<sp)!==t&&(this.data^=1<<sp)}get depthMask(){return!!(this.data&1<<ap)}set depthMask(t){!!(this.data&1<<ap)!==t&&(this.data^=1<<ap)}get clockwiseFrontFace(){return!!(this.data&1<<op)}set clockwiseFrontFace(t){!!(this.data&1<<op)!==t&&(this.data^=1<<op)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ht.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new PT;return t.depthTest=!1,t.blend=!0,t}};fs.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const eg=[];function IT(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=eg.length-1;i>=0;--i){const n=eg[i];if(n.test&&n.test(r,e))return new n(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}let pi=class{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,f=h.length;c<f;c++)h[c][u](t,e,i,n,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(pi.prototype,{dispatch:{value:pi.prototype.emit},run:{value:pi.prototype.emit}});let Hu=class{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new pi("setRealSize"),this.onUpdate=new pi("update"),this.onError=new pi("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}},ef=class extends Hu{constructor(t,e){const{width:i,height:n}=e||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===lr.UNPACK);const s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}};const wR={scaleMode:un.NEAREST,alphaMode:lr.NPM},rg=class Ho extends eh{constructor(t=null,e=null){super(),e=Object.assign({},Ho.defaultOptions,e);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:h,type:c,target:f,resolution:p,resourceOptions:m}=e;t&&!(t instanceof Hu)&&(t=IT(t,m),t.internal=!0),this.resolution=p||Z.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=h,this.type=c,this.target=f,this.alphaMode=i,this.uid=go(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=m0(this.realWidth)&&m0(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Mn[this.cacheId],delete Ci[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Ho.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=Z.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${go()}`}s=t._pixiId}let o=Mn[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Ho(t,e),o.cacheId=s,Ho.addToCache(o,s)),o}static fromBuffer(t,e,i,n){t=t||new Float32Array(e*i*4);const s=new ef(t,{width:e,height:i,...n==null?void 0:n.resourceOptions});let o,a;return t instanceof Float32Array?(o=$.RGBA,a=ot.FLOAT):t instanceof Int32Array?(o=$.RGBA_INTEGER,a=ot.INT):t instanceof Uint32Array?(o=$.RGBA_INTEGER,a=ot.UNSIGNED_INT):t instanceof Int16Array?(o=$.RGBA_INTEGER,a=ot.SHORT):t instanceof Uint16Array?(o=$.RGBA_INTEGER,a=ot.UNSIGNED_SHORT):t instanceof Int8Array?(o=$.RGBA,a=ot.BYTE):(o=$.RGBA,a=ot.UNSIGNED_BYTE),s.internal=!0,new Ho(s,Object.assign({},wR,{type:a,format:o},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Mn[e]&&Mn[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Mn[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Mn[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Mn[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Mn[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};rg.defaultOptions={mipmap:Hi.POW2,anisotropicLevel:0,scaleMode:un.LINEAR,wrapMode:rs.CLAMP,alphaMode:lr.UNPACK,target:da.TEXTURE_2D,format:$.RGBA,type:ot.UNSIGNED_BYTE},rg._globalBatch=0;let mt=rg,ig=class{constructor(){this.texArray=null,this.blend=0,this.type=Bi.TRIANGLES,this.start=0,this.size=0,this.data=null}},bR=0,_e=class RT{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=bR++,this.disposeRunner=new pi("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Gi.ELEMENT_ARRAY_BUFFER:Gi.ARRAY_BUFFER}get index(){return this.type===Gi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new RT(t)}},T0=class OT{constructor(t,e=0,i=!1,n=ot.FLOAT,s,o,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,n,s){return new OT(t,e,i,n,s)}};const SR={Float32Array,Uint32Array,Int32Array,Uint8Array};function AR(r,t){let e=0,i=0;const n={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;const s=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=t[l],h=r[l],c=CT(h);n[c]||(n[c]=new SR[c](s)),o=n[c];for(let f=0;f<h.length;f++){const p=(f/u|0)*i+a,m=f%u;o[p+m]=h[f]}a+=u}return new Float32Array(s)}const w0={5126:4,5123:2,5121:1};let CR=0;const PR={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let nh=class ng{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=CR++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new pi("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,n=!1,s,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof _e||(e instanceof Array&&(e=new Float32Array(e)),e=new _e(e));const u=t.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],e,i,n,s);return this}let h=this.buffers.indexOf(e);return h===-1&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new T0(h,i,n,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof _e||(t instanceof Array&&(t=new Uint16Array(t)),t=new _e(t)),t.type=Gi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new _e;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),e.push(s.size*w0[s.type]/4),s.buffer=0}for(i.data=AR(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ng;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new _e(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new T0(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Gi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ng,i=[],n=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new PR[CT(o.buffers[a].data)](n[a]),e.buffers[a]=new _e(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=Gi.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const f=o.attributes[c];(f.buffer|0)===h&&(l+=f.size*w0[f.type]/4)}for(let c=0;c<t.length;c++){const f=t[c].indexBuffer.data;for(let p=0;p<f.length;p++)e.indexBuffer.data[p+u]+=a;a+=t[c].buffers[h].data.length/l,u+=f.length}}return e}},MT=class extends nh{constructor(t=!1){super(),this._buffer=new _e(null,t,!1),this._indexBuffer=new _e(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ot.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ot.FLOAT).addAttribute("aColor",this._buffer,4,!0,ot.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ot.FLOAT).addIndex(this._indexBuffer)}};const cd=Math.PI*2,IR=180/Math.PI,RR=Math.PI/180;var Be=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Be||{});let Lt=class LT{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new LT(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}};Lt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const kh=[new Lt,new Lt,new Lt,new Lt];let Et=class sg{constructor(t=0,e=0,i=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Be.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new sg(0,0,0,0)}clone(){return new sg(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const P=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=P)return!1;const U=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>U}const i=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=i||o<=s)return!1;const a=kh[0].set(t.left,t.top),l=kh[1].set(t.left,t.bottom),u=kh[2].set(t.right,t.top),h=kh[3].set(t.right,t.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(c===0||(e.apply(a,a),e.apply(l,l),e.apply(u,u),e.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=i||Math.min(a.x,l.x,u.x,h.x)>=n||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const f=c*(l.y-a.y),p=c*(a.x-l.x),m=f*i+p*s,x=f*n+p*s,T=f*i+p*o,v=f*n+p*o;if(Math.max(m,x,T,v)<=f*a.x+p*a.y||Math.min(m,x,T,v)>=f*h.x+p*h.y)return!1;const E=c*(a.y-u.y),_=c*(u.x-a.x),w=E*i+_*s,A=E*n+_*s,M=E*i+_*o,I=E*n+_*o;return!(Math.max(w,A,M,I)<=E*a.x+_*a.y||Math.min(w,A,M,I)>=E*h.x+_*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this}};Et.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class rf{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=Be.CIRC}clone(){return new rf(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i}getBounds(){return new Et(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}rf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class nf{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n,this.type=Be.ELIP}clone(){return new nf(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new Et(this.x-this.width,this.y-this.height,this.width,this.height)}}nf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class so{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let n=0,s=e.length;n<s;n++)i.push(e[n].x,e[n].y);e=i}this.points=e,this.type=Be.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new so(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>e!=h>e&&t<(u-a)*((e-l)/(h-l))+a&&(i=!i)}return i}}so.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`};class sf{constructor(t=0,e=0,i=0,n=0,s=20){this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=Be.RREC}clone(){return new sf(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let n=t-(this.x+i),s=e-(this.y+i);const o=i*i;if(n*n+s*s<=o||(n=t-(this.x+this.width-i),n*n+s*s<=o)||(s=e-(this.y+this.height-i),n*n+s*s<=o)||(n=t-(this.x+i),n*n+s*s<=o))return!0}return!1}}sf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let he=class wc{constructor(t=1,e=0,i=0,n=1,s=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,n,s,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Lt;const i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Lt;const i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}setTransform(t,e,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,e),u=Math.abs(a+l);return u<1e-5||Math.abs(cd-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new wc;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new wc}static get TEMP_MATRIX(){return new wc}};he.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ds=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Us=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Gs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],og=[],FT=[],Dh=Math.sign;function OR(){for(let r=0;r<16;r++){const t=[];og.push(t);for(let e=0;e<16;e++){const i=Dh(Ds[r]*Ds[e]+Gs[r]*Us[e]),n=Dh(Us[r]*Ds[e]+Hs[r]*Us[e]),s=Dh(Ds[r]*Gs[e]+Gs[r]*Hs[e]),o=Dh(Us[r]*Gs[e]+Hs[r]*Hs[e]);for(let a=0;a<16;a++)if(Ds[a]===i&&Us[a]===n&&Gs[a]===s&&Hs[a]===o){t.push(a);break}}}for(let r=0;r<16;r++){const t=new he;t.set(Ds[r],Us[r],Gs[r],Hs[r],0,0),FT.push(t)}}OR();const qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ds[r],uY:r=>Us[r],vX:r=>Gs[r],vY:r=>Hs[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>og[r][t],sub:(r,t)=>og[r][qt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?qt.S:qt.N:Math.abs(t)*2<=Math.abs(r)?r>0?qt.E:qt.W:t>0?r>0?qt.SE:qt.SW:r>0?qt.NE:qt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const n=FT[qt.inv(t)];n.tx=e,n.ty=i,r.append(n)}};let Js=class NT{constructor(t,e,i=0,n=0){this._x=i,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new NT(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}};Js.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const ag=class{constructor(){this.worldTransform=new he,this.localTransform=new he,this.position=new Js(this.onChange,this,0,0),this.scale=new Js(this.onChange,this,1,1),this.pivot=new Js(this.onChange,this,0,0),this.skew=new Js(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};ag.IDENTITY=new ag;let Yy=ag;Yy.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var MR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,LR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function b0(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function lp(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function BT(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return lp(2*t);case"bvec3":return lp(3*t);case"bvec4":return lp(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ga=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],FR={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},NR={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function BR(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=t[n];if(!s){((i=r.uniforms[n])==null?void 0:i.group)===!0&&(r.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=r.uniforms[n];let a=!1;for(let l=0;l<ga.length;l++)if(ga[l].test(s,o)){e.push(ga[l].code(n,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?FR:NR)[s.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const kT={};let ko=kT;function kR(){if(ko===kT||ko!=null&&ko.isContextLost()){const r=Z.ADAPTER.createCanvas();let t;Z.PREFER_ENV>=xo.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),ko=t}return ko}let Uh;function DR(){if(!Uh){Uh=Dr.MEDIUM;const r=kR();if(r&&r.getShaderPrecisionFormat){const t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(Uh=t.precision?Dr.HIGH:Dr.MEDIUM)}}return Uh}function S0(r,t){const e=r.getShaderSource(t).split(`
`).map((u,h)=>`${h}: ${u}`),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},o=n.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{e[u-1]=`%c${e[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function UR(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||S0(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||S0(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const GR={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function DT(r){return GR[r]}let Gh=null;const A0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function UT(r,t){if(!Gh){const e=Object.keys(A0);Gh={};for(let i=0;i<e.length;++i){const n=e[i];Gh[r[n]]=A0[n]}}return Gh[t]}function C0(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===Dr.HIGH&&e!==Dr.HIGH&&(i=Dr.MEDIUM),`precision ${i} float;
${r}`}else if(e!==Dr.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let $l;function HR(){if(typeof $l=="boolean")return $l;try{$l=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{$l=!1}return $l}let $R=0;const Hh={},lg=class $o{constructor(t,e,i="pixi-shader",n={}){this.extra={},this.id=$R++,this.vertexSrc=t||$o.defaultVertexSrc,this.fragmentSrc=e||$o.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Hh[i]?(Hh[i]++,i+=`-${Hh[i]}`):Hh[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=C0(this.vertexSrc,$o.defaultVertexPrecision,Dr.HIGH),this.fragmentSrc=C0(this.fragmentSrc,$o.defaultFragmentPrecision,DR())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return LR}static get defaultFragmentSrc(){return MR}static from(t,e,i){const n=t+e;let s=v0[n];return s||(v0[n]=s=new $o(t,e,i)),s}};lg.defaultVertexPrecision=Dr.HIGH,lg.defaultFragmentPrecision=hn.apple.device?Dr.HIGH:Dr.MEDIUM;let cn=lg,XR=0,oo=class bc{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=XR++,this.static=!!e,this.ubo=!!i,t instanceof _e?(this.buffer=t,this.buffer.type=Gi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new _e(new Float32Array(1)),this.buffer.type=Gi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new bc(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new bc(t,e,i)}static uboFrom(t,e){return new bc(t,e??!0,!0)}},is=class GT{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof oo?this.uniformGroup=e:this.uniformGroup=new oo(e):this.uniformGroup=new oo({}),this.disposeRunner=new pi("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const n=e.uniforms[i];if(n.group===!0&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const n=cn.from(t,e);return new GT(n,i)}},zR=class{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=s;this.defaultGroupCache[t]=oo.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new cn(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new he,default:this.defaultGroupCache[t]};return new is(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}},ug=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}};function jR(){return!hn.apple.device}function VR(r){let t=!0;const e=Z.ADAPTER.getNavigator();if(hn.tablet||hn.phone){if(hn.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(hn.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}let of=class{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}};var WR=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,YR=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Jl=class ri extends of{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=MT,this.vertexSize=6,this.state=fs.for2d(),this.size=ri.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??VR(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??jR(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return bt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return YR}static get defaultFragmentTemplate(){return WR}setShaderGenerator({vertex:t=ri.defaultVertexSrc,fragment:e=ri.defaultFragmentTemplate}={}){this.shaderGenerator=new zR(t,e)}contextChange(){const t=this.renderer.gl;Z.PREFER_ENV===xo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ri.defaultMaxTextures),this.maxTextures=TR(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=ri,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new ig);for(;e.length<n;)e.push(new ug);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=ri._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++mt._globalBatch,l=0,u=i[0],h=0;n.copyBoundTextures(s,e);for(let c=0;c<this._bufferSize;++c){const f=t[c];t[c]=null,f._batchEnabled!==a&&(u.count>=e&&(n.boundArray(u,s,a,e),this.buildDrawCalls(u,h,c),h=c,u=i[++l],++a),f._batchEnabled=a,f.touched=o,u.elements[u.count++]=f)}u.count>0&&(n.boundArray(u,s,a,e),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(let c=0;c<s.length;c++)s[c]=null;mt._globalBatch=a}buildDrawCalls(t,e,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=ri._drawCallPool;let u=this._dcIndex,h=this._aIndex,c=this._iIndex,f=l[u];f.start=this._iIndex,f.texArray=t;for(let p=e;p<i;++p){const m=n[p],x=m._texture.baseTexture,T=ST[x.alphaMode?1:0][m.blendMode];n[p]=null,e<p&&f.blend!==T&&(f.size=c-f.start,e=p,f=l[++u],f.texArray=t,f.start=c),this.packInterleavedGeometry(m,s,o,h,c),h+=m.vertexData.length/2*a,c+=m.indices.length,f.blend=T}e<i&&(f.size=c-f.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;ri.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,n=ri._drawCallPool;let s=null;for(let o=0;o<t;o++){const{texArray:a,type:l,size:u,start:h,blend:c}=n[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=c,i.set(this.state),e.drawElements(l,u,e.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),ri.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=hd(Math.ceil(t/8)),i=g0(e),n=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new tg(n*this.vertexSize*4)),s}getIndexBuffer(t){const e=hd(Math.ceil(t/12)),i=g0(e),n=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(t,e,i,n,s){const{uint32View:o,float32View:a}=e,l=n/this.vertexSize,u=t.uvs,h=t.indices,c=t.vertexData,f=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),m=jt.shared.setValue(t._tintRGB).toPremultiplied(p,t._texture.baseTexture.alphaMode>0);for(let x=0;x<c.length;x+=2)a[n++]=c[x],a[n++]=c[x+1],a[n++]=u[x],a[n++]=u[x+1],o[n++]=m,a[n++]=f;for(let x=0;x<h.length;x++)i[s++]=l+h[x]}};Jl.defaultBatchSize=4096,Jl.extension={name:"batch",type:V.RendererPlugin},Jl._drawCallPool=[],Jl._textureArrayPool=[];let $s=Jl;rt.add($s);var KR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,qR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const hg=class tu extends is{constructor(t,e,i){const n=cn.from(t||tu.defaultVertexSrc,e||tu.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=tu.defaultResolution,this.multisample=tu.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new fs}apply(t,e,i,n,s){t.applyFilter(this,e,i,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return qR}static get defaultFragmentSrc(){return KR}};hg.defaultResolution=1,hg.defaultMultisample=fe.NONE;let Je=hg;class dd{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new jt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:n}=t,s=i??e;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}dd.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},dd.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"background"};rt.add(dd);let HT=class{constructor(t){this.renderer=t,this.emptyRenderer=new of(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,i,n){const{elements:s,ids:o,count:a}=t;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<n&&e[c]===h){o[u]=c;continue}for(;l<n;){const f=e[l];if(f&&f._batchEnabled===i&&f._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,e[l]=h;break}}}destroy(){this.renderer=null}};HT.extension={type:V.RendererSystem,name:"batch"};rt.add(HT);let P0=0,fd=class{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=P0++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=P0++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(Z.PREFER_ENV>=xo.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};fd.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},fd.extension={type:V.RendererSystem,name:"context"};rt.add(fd);let cg=class{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new pi("disposeFramebuffer"),this.multisample=fe.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new mt(null,{scaleMode:un.NEAREST,resolution:1,mipmap:Hi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new mt(null,{scaleMode:un.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Hi.OFF,format:$.DEPTH_COMPONENT,type:ot.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}},$T=class extends mt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];t={width:e,height:i,scaleMode:n,resolution:s}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=fe.NONE),super(null,t),this.mipmap=Hi.OFF,this.valid=!0,this._clear=new jt([0,0,0,0]),this.framebuffer=new cg(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}},En=class extends Hu{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,n=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(i,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=_R(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,n){const s=t.gl,o=e.realWidth,a=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===lr.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,n):(i.width=o,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}},XT=class extends En{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;En.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Z.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===lr.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=e._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}},Ky=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const n=e.width,s=e.height;if(i){const o=t.width/2/n,a=t.height/2/s,l=t.x/n+o,u=t.y/s+a;i=qt.add(i,qt.NW),this.x0=l+o*qt.uX(i),this.y0=u+a*qt.uY(i),i=qt.add(i,2),this.x1=l+o*qt.uX(i),this.y1=u+a*qt.uY(i),i=qt.add(i,2),this.x2=l+o*qt.uX(i),this.y2=u+a*qt.uY(i),i=qt.add(i,2),this.x3=l+o*qt.uX(i),this.y3=u+a*qt.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};Ky.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const I0=new Ky;function $h(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}let Pt=class $t extends eh{constructor(t,e,i,n,s,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Et(0,0,1,1)),t instanceof $t&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=I0,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Lt(o.x,o.y):new Lt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&Ci[e.url]&&$t.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,$t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new $t(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===I0&&(this._uvs=new Ky),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=Z.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof mt){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${go()}`,mt.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${go()}`}s=t._pixiId}let o=Ci[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof mt)?(e.resolution||(e.resolution=xn(t)),o=new $t(new mt(t,e)),o.baseTexture.cacheId=s,mt.addToCache(o.baseTexture,s),$t.addToCache(o,s)):!o&&t instanceof mt&&(o=new $t(t),$t.addToCache(o,s)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=$t.from(t,Object.assign({resourceOptions:i},e),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,i,n){return new $t(mt.fromBuffer(t,e,i,n))}static fromLoader(t,e,i,n){const s=new mt(t,Object.assign({scaleMode:mt.defaultOptions.scaleMode,resolution:xn(e)},n)),{resource:o}=s;o instanceof XT&&(o.url=e);const a=new $t(s);return i||(i=e),mt.addToCache(a.baseTexture,i),$t.addToCache(a,i),i!==e&&(mt.addToCache(a.baseTexture,e),$t.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Ci[e]&&Ci[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),Ci[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Ci[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Ci[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)Ci[t.textureCacheIds[e]]===t&&delete Ci[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:n,height:s}=t,o=e+n>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,h=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return $t._EMPTY||($t._EMPTY=new $t(new mt),$h($t._EMPTY),$h($t._EMPTY.baseTexture)),$t._EMPTY}static get WHITE(){if(!$t._WHITE){const t=Z.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),$t._WHITE=new $t(mt.from(t)),$h($t._WHITE),$h($t._WHITE.baseTexture)}return $t._WHITE}},sh=class zT extends Pt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new zT(new $T(t))}},jT=class{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=fe.NONE){const n=new $T(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new sh(n)}getOptimalTexture(t,e,i=1,n=fe.NONE){let s;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=hd(t),e=hd(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(t,e,i){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||fe.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}};jT.SCREEN_KEY=-1;let ZR=class extends nh{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}},VT=class extends nh{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new _e(this.vertices),this.uvBuffer=new _e(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}},QR=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=fe.NONE,this.sourceFrame=new Et,this.destinationFrame=new Et,this.bindingSourceFrame=new Et,this.bindingDestinationFrame=new Et,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};const Xh=[new Lt,new Lt,new Lt,new Lt],up=new he;let WT=class{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new jT,this.statePool=[],this.quad=new ZR,this.quadUv=new VT,this.tempRect=new Et,this.activeState={},this.globalUniforms=new oo({outputFrame:new Et,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new QR,o=i.renderTexture;let a,l;if(o.current){const T=o.current;a=T.resolution,l=T.multisample}else a=i.resolution,l=i.multisample;let u=e[0].resolution||a,h=e[0].multisample??l,c=e[0].padding,f=e[0].autoFit,p=e[0].legacy??!0;for(let T=1;T<e.length;T++){const v=e[T];u=Math.min(u,v.resolution||a),h=Math.min(h,v.multisample??l),c=this.useMaxPadding?Math.max(c,v.padding):c+v.padding,f=f&&v.autoFit,p=p||(v.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=u,s.multisample=h,s.legacy=p,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(c);const m=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(up.copyFrom(i.projection.transform).invert(),m),f?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const x=this.tempRect;x.x=0,x.y=0,x.width=s.sourceFrame.width,x.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,x),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){const u=n.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,Li.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let u=e.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,e.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,e.resolution),h.filterFrame=u.filterFrame),i[c].apply(this,u,h,Li.CLEAR,e);const f=u;u=h,h=f}i[c].apply(this,u,l.renderTexture,Li.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=Li.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(e===Li.CLEAR||e===Li.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Bi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Bi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=e._texture,o=t.set(n.width,0,0,n.height,i.x,i.y),a=e.worldTransform.copyTo(he.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,n=fe.NONE){return this.texturePool.getOptimalTexture(t,e,i,n)}getFilterTexture(t,e,i){if(typeof t=="number"){const s=t;t=e,e=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||fe.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=Xh[0],n=Xh[1],s=Xh[2],o=Xh[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(o,o);const a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),u=Math.max(i.x,n.x,s.x,o.x),h=Math.max(i.y,n.y,s.y,o.y);e.x=a,e.y=l,e.width=u-a,e.height=h-l}roundFrame(t,e,i,n,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?up.copyFrom(s):up.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}};WT.extension={type:V.RendererSystem,name:"filter"};rt.add(WT);let JR=class{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=fe.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};const tO=new Et;let YT=class{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new cg(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Et,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Z.PREFER_ENV===xo.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,n){const s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,n,s=Nm.COLOR|Nm.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,n),o.clear(s)}initFramebuffer(t){const{gl:e}=this,i=new JR(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const n=t.colorTextures;let s=n.length;e.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):t.depth&&t.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):t.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,u,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,u,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,n.stencil)}else n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=fe.NONE;if(t<=1||e===null)return i;for(let n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=fe.NONE),i}blit(t,e,i){const{current:n,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const h=n.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new cg(n.width,n.height),l.blitFramebuffer.addColorTexture(0,h)),t=l.blitFramebuffer,t.colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=tO,e.width=n.width,e.height=n.height),i||(i=e);const u=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,n=t.height,s=this.gl,o=e.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):t.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,l,i,n):s.renderbufferStorage(s.RENDERBUFFER,l,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Et}destroy(){this.renderer=null}};YT.extension={type:V.RendererSystem,name:"framebuffer"};rt.add(YT);const hp={5126:4,5123:2,5121:1};let KT=class{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;Z.PREFER_ENV===xo.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=n=>i.bindVertexArrayOES(n),t.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,o,a,l)=>i.drawElementsInstancedANGLE(n,s,o,a,l),t.drawArraysInstanced=(n,s,o,a)=>i.drawArraysInstancedANGLE(n,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const n=t.buffers[i];e.update(n)}}checkCompatibility(t,e){const i=t.attributes,n=e.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const i=t.attributes,n=e.attributeData,s=["g",t.id];for(const o in i)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(t,e,i=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=t.buffers,f=t.attributes,p={},m={};for(const x in c)p[x]=0,m[x]=0;for(const x in f)!f[x].size&&a.attributeData[x]?f[x].size=a.attributeData[x].size:f[x].size||console.warn(`PIXI Geometry attribute '${x}' size cannot be determined (likely the bound shader does not have the attribute)`),p[f[x].buffer]+=f[x].size*hp[f[x].type];for(const x in f){const T=f[x],v=T.size;T.stride===void 0&&(p[T.buffer]===v*hp[T.type]?T.stride=0:T.stride=p[T.buffer]),T.start===void 0&&(T.start=m[T.buffer],m[T.buffer]+=v*hp[T.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let x=0;x<c.length;x++){const T=c[x];o.bind(T),i&&T._glBuffers[s].refCount++}return this.activateVao(t,a),u[a.id]=h,u[l]=h,n.bindVertexArray(null),o.unbind(Gi.ARRAY_BUFFER),h}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(s[l],e))}if(!e){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],f=c._glBuffers[n];if(e.attributeData[u]){l!==f&&(s.bind(c),l=f);const p=e.attributeData[u].location;if(i.enableVertexAttribArray(p),i.vertexAttribPointer(p,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(p,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(t,e||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,i,e||o.getSize(),n||1):s.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};KT.extension={type:V.RendererSystem,name:"geometry"};rt.add(KT);const R0=new he;let qT=class{constructor(t,e){this._texture=t,this.mapCoord=new he,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],o=t[n+1];e[n]=s*i.a+o*i.c+i.tx,e[n+1]=s*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=e.orig,s=e.trim;s&&(R0.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(R0));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}};var eO=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,rO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;let iO=class extends Je{constructor(t,e,i){let n=null;typeof t!="string"&&e===void 0&&i===void 0&&(n=t,t=void 0,e=void 0,i=void 0),super(t||rO,e||eO,i),this.maskSprite=n,this.maskMatrix=new he}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new qT(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))}},nO=class{constructor(t=null){this.type=ye.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Je.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ye.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}},ZT=class{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const s=this.maskDataPool.pop()||new nO;s.pooled=!0,s.maskObject=e,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==ye.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case ye.SCISSOR:this.renderer.scissor.push(i);break;case ye.STENCIL:this.renderer.stencil.push(i);break;case ye.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case ye.COLOR:this.pushColorMask(i);break}i.type===ye.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case ye.SCISSOR:this.renderer.scissor.pop(e);break;case ye.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ye.SPRITE:this.popSpriteMask(e);break;case ye.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===ye.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=ye.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=ye.SCISSOR:t.type=ye.STENCIL:t.type=ye.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new iO])),n[0].resolution=t.resolution,n[0].multisample=t.multisample,n[0].maskSprite=e;const s=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=s,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}};ZT.extension={type:V.RendererSystem,name:"mask"};rt.add(ZT);let QT=class{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};const O0=new he,M0=[],JT=class Sc extends QT{constructor(t){super(t),this.glConst=Z.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:n}=this,s=n.renderTexture,o=i.getBounds(!0,M0.pop()??new Et);this.roundFrameToPixels(o,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:n,d:s}=t;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Sc.isMatrixRotated(e.worldTransform)||Sc.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,n,s){Sc.isMatrixRotated(s)||(s=s?O0.copyFrom(s):O0.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&M0.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};JT.extension={type:V.RendererSystem,name:"scissor"};let sO=JT;rt.add(sO);let tw=class extends QT{constructor(t){super(t),this.glConst=Z.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(t._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(i._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}};tw.extension={type:V.RendererSystem,name:"stencil"};rt.add(tw);class ew{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return bt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return bt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return bt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}ew.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"_plugin"};rt.add(ew);let rw=class{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new he,this.transform=null}update(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,i,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=o*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-o-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}};rw.extension={type:V.RendererSystem,name:"projection"};rt.add(rw);const oO=new Yy,L0=new Et;class iw{constructor(t){this.renderer=t,this._tempMatrix=new he}generateTexture(t,e){const{region:i,...n}=e||{},s=(i==null?void 0:i.copyTo(L0))||t.getLocalBounds(L0,!0),o=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),n.width=s.width,n.height=s.height,n.resolution=o,n.multisample??(n.multisample=this.renderer.multisample);const a=sh.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=t.transform;return t.transform=oO,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}}iw.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"textureGenerator"};rt.add(iw);const Rs=new Et,Xl=new Et;let nw=class{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Et,this.destinationFrame=new Et,this.viewportFrame=new Et}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const n=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,e||(Rs.width=t.frame.width,Rs.height=t.frame.height,e=Rs),i||(Xl.x=t.frame.x,Xl.y=t.frame.y,Xl.width=e.width,Xl.height=e.height,i=Xl),o=s.framebuffer):(a=n.resolution,e||(Rs.width=n._view.screen.width,Rs.height=n._view.screen.height,e=Rs),i||(i=Rs,i.width=e.width,i.height=e.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=jt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:c}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,c)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};nw.extension={type:V.RendererSystem,name:"renderTexture"};rt.add(nw);let aO=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function lO(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=t.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const o=UT(t,s.type),a={type:o,name:s.name,size:DT(o),location:t.getAttribLocation(r,s.name)};e[s.name]=a}return e}function uO(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=t.getActiveUniform(r,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=UT(t,s.type);e[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:BT(l,s.size)}}return e}function hO(r,t){var a;const e=b0(r,r.VERTEX_SHADER,t.vertexSrc),i=b0(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i);const s=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||UR(r,n,e,i),t.attributeData=lO(n,r),t.uniformData=uO(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const l=Object.keys(t.attributeData);l.sort((u,h)=>u>h?1:-1);for(let u=0;u<l.length;u++)t.attributeData[l[u]].location=u,r.bindAttribLocation(n,u,l[u]);r.linkProgram(n)}r.deleteShader(e),r.deleteShader(i);const o={};for(const l in t.uniformData){const u=t.uniformData[l];o[l]={location:r.getUniformLocation(n,l),value:BT(u.type,u.size)}}return new aO(n,o)}function cO(r,t,e,i,n){e.buffer.update(n)}const dO={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},sw={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function fO(r){const t=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let e=0,i=0,n=0;for(let s=0;s<t.length;s++){const o=t[s];if(e=sw[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,n+=a}i+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,i=e):(o.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function pO(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,n)=>i.index-n.index),e}function mO(r,t){if(!r.autoManage)return{size:0,syncFunc:cO};const e=pO(r.uniforms,t),{uboElements:i,size:n}=fO(e),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<ga.length;c++){const f=ga[c];if(f.codeUbo&&f.test(a.data,l)){s.push(`offset = ${a.offset/4};`,ga[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=DT(a.data.type),f=Math.max(sw[a.data.type]/16,1),p=c/f,m=(4-p%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${p}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const c=dO[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let gO=0;const zh={textureCount:0,uboCount:0};let ow=class{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=gO++}systemCheck(){if(!HR())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(zh.textureCount=0,zh.uboCount=0,this.syncUniformGroup(t.uniformGroup,zh)),n}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=BR(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,zh,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=mO(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const n=t.uniforms,s=[`${i}-`];for(const o in n)s.push(o),e[o]&&s.push(e[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,n=hO(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};ow.extension={type:V.RendererSystem,name:"shader"};rt.add(ow);class pd{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.0 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}pd.defaultOptions={hello:!1},pd.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"startup"};rt.add(pd);function yO(r,t=[]){return t[ht.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.ADD]=[r.ONE,r.ONE],t[ht.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.NONE]=[0,0],t[ht.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ht.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ht.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ht.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ht.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ht.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ht.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ht.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ht.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ht.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const vO=0,_O=1,xO=2,EO=3,TO=4,wO=5,aw=class dg{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ht.NONE,this._blendEq=!1,this.map=[],this.map[vO]=this.setBlend,this.map[_O]=this.setOffset,this.map[xO]=this.setCullFace,this.map[EO]=this.setDepthTest,this.map[TO]=this.setFrontFace,this.map[wO]=this.setDepthMask,this.checks=[],this.defaultState=new fs,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=yO(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(dg.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(dg.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};aw.extension={type:V.RendererSystem,name:"state"};let bO=aw;rt.add(bO);class SO extends eh{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),i=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of i)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new pi(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=i.find(o=>this._systemsHash[o]===n);n[t.name](e[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const eu=class Ac{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Ac.defaultMaxIdle,this.checkCountMax=Ac.defaultCheckCountMax,this.mode=Ac.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Uy.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let n=0;n<e.length;n++){const s=e[n];s.resource&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<e.length;s++)e[s]!==null&&(e[n++]=e[s]);e.length=n}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};eu.defaultMode=Uy.AUTO,eu.defaultMaxIdle=60*60,eu.defaultCheckCountMax=60*10,eu.extension={type:V.RendererSystem,name:"textureGC"};let Xs=eu;rt.add(Xs);let cp=class{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ot.UNSIGNED_BYTE,this.internalFormat=$.RGBA,this.samplerType=0}};function AO(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:q.FLOAT,[r.RGBA]:q.FLOAT,[r.ALPHA]:q.FLOAT,[r.LUMINANCE]:q.FLOAT,[r.LUMINANCE_ALPHA]:q.FLOAT,[r.R8]:q.FLOAT,[r.R8_SNORM]:q.FLOAT,[r.RG8]:q.FLOAT,[r.RG8_SNORM]:q.FLOAT,[r.RGB8]:q.FLOAT,[r.RGB8_SNORM]:q.FLOAT,[r.RGB565]:q.FLOAT,[r.RGBA4]:q.FLOAT,[r.RGB5_A1]:q.FLOAT,[r.RGBA8]:q.FLOAT,[r.RGBA8_SNORM]:q.FLOAT,[r.RGB10_A2]:q.FLOAT,[r.RGB10_A2UI]:q.FLOAT,[r.SRGB8]:q.FLOAT,[r.SRGB8_ALPHA8]:q.FLOAT,[r.R16F]:q.FLOAT,[r.RG16F]:q.FLOAT,[r.RGB16F]:q.FLOAT,[r.RGBA16F]:q.FLOAT,[r.R32F]:q.FLOAT,[r.RG32F]:q.FLOAT,[r.RGB32F]:q.FLOAT,[r.RGBA32F]:q.FLOAT,[r.R11F_G11F_B10F]:q.FLOAT,[r.RGB9_E5]:q.FLOAT,[r.R8I]:q.INT,[r.R8UI]:q.UINT,[r.R16I]:q.INT,[r.R16UI]:q.UINT,[r.R32I]:q.INT,[r.R32UI]:q.UINT,[r.RG8I]:q.INT,[r.RG8UI]:q.UINT,[r.RG16I]:q.INT,[r.RG16UI]:q.UINT,[r.RG32I]:q.INT,[r.RG32UI]:q.UINT,[r.RGB8I]:q.INT,[r.RGB8UI]:q.UINT,[r.RGB16I]:q.INT,[r.RGB16UI]:q.UINT,[r.RGB32I]:q.INT,[r.RGB32UI]:q.UINT,[r.RGBA8I]:q.INT,[r.RGBA8UI]:q.UINT,[r.RGBA16I]:q.INT,[r.RGBA16UI]:q.UINT,[r.RGBA32I]:q.INT,[r.RGBA32UI]:q.UINT,[r.DEPTH_COMPONENT16]:q.FLOAT,[r.DEPTH_COMPONENT24]:q.FLOAT,[r.DEPTH_COMPONENT32F]:q.FLOAT,[r.DEPTH_STENCIL]:q.FLOAT,[r.DEPTH24_STENCIL8]:q.FLOAT,[r.DEPTH32F_STENCIL8]:q.FLOAT}:t={[r.RGB]:q.FLOAT,[r.RGBA]:q.FLOAT,[r.ALPHA]:q.FLOAT,[r.LUMINANCE]:q.FLOAT,[r.LUMINANCE_ALPHA]:q.FLOAT,[r.DEPTH_STENCIL]:q.FLOAT},t}function CO(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[ot.UNSIGNED_BYTE]:{[$.RGBA]:r.RGBA8,[$.RGB]:r.RGB8,[$.RG]:r.RG8,[$.RED]:r.R8,[$.RGBA_INTEGER]:r.RGBA8UI,[$.RGB_INTEGER]:r.RGB8UI,[$.RG_INTEGER]:r.RG8UI,[$.RED_INTEGER]:r.R8UI,[$.ALPHA]:r.ALPHA,[$.LUMINANCE]:r.LUMINANCE,[$.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ot.BYTE]:{[$.RGBA]:r.RGBA8_SNORM,[$.RGB]:r.RGB8_SNORM,[$.RG]:r.RG8_SNORM,[$.RED]:r.R8_SNORM,[$.RGBA_INTEGER]:r.RGBA8I,[$.RGB_INTEGER]:r.RGB8I,[$.RG_INTEGER]:r.RG8I,[$.RED_INTEGER]:r.R8I},[ot.UNSIGNED_SHORT]:{[$.RGBA_INTEGER]:r.RGBA16UI,[$.RGB_INTEGER]:r.RGB16UI,[$.RG_INTEGER]:r.RG16UI,[$.RED_INTEGER]:r.R16UI,[$.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[ot.SHORT]:{[$.RGBA_INTEGER]:r.RGBA16I,[$.RGB_INTEGER]:r.RGB16I,[$.RG_INTEGER]:r.RG16I,[$.RED_INTEGER]:r.R16I},[ot.UNSIGNED_INT]:{[$.RGBA_INTEGER]:r.RGBA32UI,[$.RGB_INTEGER]:r.RGB32UI,[$.RG_INTEGER]:r.RG32UI,[$.RED_INTEGER]:r.R32UI,[$.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[ot.INT]:{[$.RGBA_INTEGER]:r.RGBA32I,[$.RGB_INTEGER]:r.RGB32I,[$.RG_INTEGER]:r.RG32I,[$.RED_INTEGER]:r.R32I},[ot.FLOAT]:{[$.RGBA]:r.RGBA32F,[$.RGB]:r.RGB32F,[$.RG]:r.RG32F,[$.RED]:r.R32F,[$.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[ot.HALF_FLOAT]:{[$.RGBA]:r.RGBA16F,[$.RGB]:r.RGB16F,[$.RG]:r.RG16F,[$.RED]:r.R16F},[ot.UNSIGNED_SHORT_5_6_5]:{[$.RGB]:r.RGB565},[ot.UNSIGNED_SHORT_4_4_4_4]:{[$.RGBA]:r.RGBA4},[ot.UNSIGNED_SHORT_5_5_5_1]:{[$.RGBA]:r.RGB5_A1},[ot.UNSIGNED_INT_2_10_10_10_REV]:{[$.RGBA]:r.RGB10_A2,[$.RGBA_INTEGER]:r.RGB10_A2UI},[ot.UNSIGNED_INT_10F_11F_11F_REV]:{[$.RGB]:r.R11F_G11F_B10F},[ot.UNSIGNED_INT_5_9_9_9_REV]:{[$.RGB]:r.RGB9_E5},[ot.UNSIGNED_INT_24_8]:{[$.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[ot.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[$.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[ot.UNSIGNED_BYTE]:{[$.RGBA]:r.RGBA,[$.RGB]:r.RGB,[$.ALPHA]:r.ALPHA,[$.LUMINANCE]:r.LUMINANCE,[$.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ot.UNSIGNED_SHORT_5_6_5]:{[$.RGB]:r.RGB},[ot.UNSIGNED_SHORT_4_4_4_4]:{[$.RGBA]:r.RGBA},[ot.UNSIGNED_SHORT_5_5_5_1]:{[$.RGBA]:r.RGBA}},t}let lw=class{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new mt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=CO(t),this.samplerTypes=AO(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new cp(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new cp(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=t-1;s>=0;--s){const o=e[s];o&&o._glTextures[n].samplerType!==q.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new cp(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??q.FLOAT,this.webGLVersion===2&&t.type===ot.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(n=t.resource)==null?void 0:n.upload(i,t,e))e.samplerType!==q.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==s||e.height!==o||e.dirtyId<0)&&(e.width=s,e.height=o,a.texImage2D(t.target,0,e.internalFormat,s,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&ma(this.managedTextures,n,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Hi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=rs.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==Hi.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===un.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===un.LINEAR){const s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===un.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===un.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}};lw.extension={type:V.RendererSystem,name:"texture"};rt.add(lw);class uw{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:n}=this;e&&n.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:n}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[n]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&s.dispose(a,e))}i&&(e||n.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}uw.extension={type:V.RendererSystem,name:"transformFeedback"};rt.add(uw);class md{constructor(t){this.renderer=t}init(t){this.screen=new Et(0,0,t.width,t.height),this.element=t.view||Z.ADAPTER.createCanvas(),this.resolution=t.resolution||Z.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}md.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},md.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"_view"};rt.add(md);Z.PREFER_ENV=xo.WEBGL2;Z.STRICT_TEXTURE_CACHE=!1;Z.RENDER_OPTIONS={...fd.defaultOptions,...dd.defaultOptions,...md.defaultOptions,...pd.defaultOptions};Object.defineProperties(Z,{WRAP_MODE:{get(){return mt.defaultOptions.wrapMode},set(r){bt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),mt.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return mt.defaultOptions.scaleMode},set(r){bt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),mt.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return mt.defaultOptions.mipmap},set(r){bt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),mt.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return mt.defaultOptions.anisotropicLevel},set(r){bt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),mt.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return bt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Je.defaultResolution},set(r){Je.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return bt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Je.defaultMultisample},set(r){Je.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return $s.defaultMaxTextures},set(r){bt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),$s.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return $s.defaultBatchSize},set(r){bt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),$s.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return $s.canUploadSameBuffer},set(r){bt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),$s.canUploadSameBuffer=r}},GC_MODE:{get(){return Xs.defaultMode},set(r){bt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Xs.defaultMode=r}},GC_MAX_IDLE:{get(){return Xs.defaultMaxIdle},set(r){bt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Xs.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Xs.defaultCheckCountMax},set(r){bt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Xs.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return cn.defaultVertexPrecision},set(r){bt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),cn.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return cn.defaultFragmentPrecision},set(r){bt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),cn.defaultFragmentPrecision=r}}});var yo=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(yo||{});let dp=class{constructor(t,e=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}};const hw=class yr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new dp(null,null,1/0),this.deltaMS=1/yr.targetFPMS,this.elapsedMS=1/yr.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=yo.NORMAL){return this._addListener(new dp(t,e,i))}addOnce(t,e,i=yo.NORMAL){return this._addListener(new dp(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*yr.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,yr.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!yr._shared){const t=yr._shared=new yr;t.autoStart=!0,t._protected=!0}return yr._shared}static get system(){if(!yr._system){const t=yr._system=new yr;t.autoStart=!0,t._protected=!0}return yr._system}};hw.targetFPMS=.06;let ur=hw;Object.defineProperties(Z,{TARGET_FPMS:{get(){return ur.targetFPMS},set(r){bt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ur.targetFPMS=r}}});class cw{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,yo.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ur.shared:new ur,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}cw.extension=V.Application;rt.add(cw);const dw=[];rt.handleByList(V.Renderer,dw);function PO(r){for(const t of dw)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var IO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,RO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const OO=IO,fw=RO;class pw{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=fe.HIGH?this.multisample=fe.HIGH:e>=fe.MEDIUM?this.multisample=fe.MEDIUM:e>=fe.LOW?this.multisample=fe.LOW:this.multisample=fe.NONE}destroy(){}}pw.extension={type:V.RendererSystem,name:"_multisample"};rt.add(pw);let MO=class{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}};class mw{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const o=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const s=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,s)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new MO(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}mw.extension={type:V.RendererSystem,name:"buffer"};rt.add(mw);class gw{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let n,s,o,a;if(e&&(n=e.renderTexture,s=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(n||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),n&&(e.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}gw.extension={type:V.RendererSystem,name:"objectRenderer"};rt.add(gw);const Cc=class fg extends SO{constructor(t){super(),this.type=ZE.WEBGL,t=Object.assign({},Z.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new oo({projectionMatrix:new he},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:fg.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(bt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=fg.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:eR()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return bt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return bt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return bt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return bt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){bt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return bt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){bt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return bt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Cc.extension={type:V.Renderer,priority:1},Cc.__plugins={},Cc.__systems={};let qy=Cc;rt.handleByMap(V.RendererPlugin,qy.__plugins);rt.handleByMap(V.RendererSystem,qy.__systems);rt.add(qy);let yw=class extends Hu{constructor(t,e){const{width:i,height:n}=e||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new mt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Hu?this.addResourceAt(t[i],i):this.addResourceAt(IT(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}},LO=class extends yw{constructor(t,e){const{width:i,height:n}=e||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:i,height:n}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=da.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:n,itemDirtyIds:s,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(let l=0;l<n;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0}},FO=class extends En{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}};const vw=class ru extends yw{constructor(t,e){const{width:i,height:n,autoLoad:s,linkBaseTexture:o}=e||{};if(t&&t.length!==ru.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:n});for(let a=0;a<ru.SIDES;a++)this.items[a].target=da.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),s!==!1&&this.load()}bind(t){super.bind(t),t.target=da.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=da.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const n=this.itemDirtyIds;for(let s=0;s<ru.SIDES;s++){const o=this.items[s];(n[s]<o.dirtyId||i.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,i),n[s]=o.dirtyId):n[s]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),n[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ru.SIDES}};vw.SIDES=6;let NO=vw,BO=class iu extends En{constructor(t,e){e=e||{};let i,n,s;typeof t=="string"?(i=iu.EMPTY,n=t,s=!0):(i=t,n=null,s=!1),super(i),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??s,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await Z.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===lr.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return iu._EMPTY=iu._EMPTY??Z.ADAPTER.createCanvas(0,0),iu._EMPTY}};const pg=class Pc extends En{constructor(t,e){e=e||{},super(Z.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Pc.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;En.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*e,s=this._overrideHeight||this._overrideWidth/e*i),n=Math.round(n),s=Math.round(s);const o=this.source;o.width=n,o.height=s,o._pixiId=`canvas_${go()}`,o.getContext("2d").drawImage(t,0,0,e,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(t){const e=Pc.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Pc.SVG_XML.test(t)}};pg.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,pg.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let mg=pg;class kO extends En{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const gg=class yg extends En{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];En.crossOrigin(i,n,e.crossorigin);for(let s=0;s<t.length;++s){const o=document.createElement("source");let{src:a,mime:l}=t[s];if(a=a||t[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);l=l||yg.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),i.appendChild(o)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=ur.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(ur.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ur.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ur.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||yg.TYPES.includes(e)}};gg.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],gg.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let _w=gg;eg.push(BO,XT,FO,_w,kO,mg,ef,NO,LO);class gd{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Et.EMPTY:(t=t||new Et(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:n,c:s,d:o,tx:a,ty:l}=t,u=i*e.x+s*e.y+a,h=n*e.x+o*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s}addFrame(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)}addFrameMatrix(t,e,i,n,s){const o=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,c=t.ty;let f=this.minX,p=this.minY,m=this.maxX,x=this.maxY,T=o*e+l*i+h,v=a*e+u*i+c;f=T<f?T:f,p=v<p?v:p,m=T>m?T:m,x=v>x?v:x,T=o*n+l*i+h,v=a*n+u*i+c,f=T<f?T:f,p=v<p?v:p,m=T>m?T:m,x=v>x?v:x,T=o*e+l*s+h,v=a*e+u*s+c,f=T<f?T:f,p=v<p?v:p,m=T>m?T:m,x=v>x?v:x,T=o*n+l*s+h,v=a*n+u*s+c,f=T<f?T:f,p=v<p?v:p,m=T>m?T:m,x=v>x?v:x,this.minX=f,this.minY=p,this.maxX=m,this.maxY=x}addVertexData(t,e,i){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){const u=t[l],h=t[l+1];n=u<n?u:n,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)}addVerticesMatrix(t,e,i,n,s=0,o=s){const a=t.a,l=t.b,u=t.c,h=t.d,c=t.tx,f=t.ty;let p=this.minX,m=this.minY,x=this.maxX,T=this.maxY;for(let v=i;v<n;v+=2){const E=e[v],_=e[v+1],w=a*E+u*_+c,A=h*_+l*E+f;p=Math.min(p,w-s),x=Math.max(x,w+s),m=Math.min(m,A-o),T=Math.max(T,A+o)}this.minX=p,this.minY=m,this.maxX=x,this.maxY=T}addBounds(t){const e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,n,s,o){t-=s,e-=o,i+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class re extends eh{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Yy,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new gd,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const n=e[i];Object.defineProperty(re.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Et),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Et),t=this._localBoundsRect),this._localBounds||(this._localBounds=new gd);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,n=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new DO),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*IR}set angle(t){this.transform.rotation=t*RR}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class DO extends re{constructor(){super(...arguments),this.sortDirty=null}}re.prototype.displayObjectUpdateTransform=re.prototype.updateTransform;const UO=new he;function GO(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const xw=class vg extends re{constructor(){super(),this.children=[],this.sortableChildren=vg.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);ma(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,ma(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ma(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,n=e,s=n-i;let o;if(s>0&&s<=n){o=this.children.splice(i,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(GO),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let n=0,s=this.children.length;n<s;++n){const o=this.children[n];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==vg.prototype._render&&(i=this.getBounds(!0));const s=t.projection.transform;if(s&&(n?(n=UO.copyFrom(n),n.prepend(s)):n=s),i&&e.intersects(i,n))this._render(t);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}}renderAdvanced(t){var s,o,a;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<e.length;l++)e[l].enabled&&this._enabledFilters.push(e[l])}const n=e&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==ye.NONE));if(n&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(t)}n&&t.batch.flush(),i&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<i.length;++n)i[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};xw.defaultSortableChildren=!1;let br=xw;br.prototype.containerUpdateTransform=br.prototype.updateTransform;Object.defineProperties(Z,{SORTABLE_CHILDREN:{get(){return br.defaultSortableChildren},set(r){bt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),br.defaultSortableChildren=r}}});const zl=new Lt,HO=new Uint16Array([0,1,2,0,2,3]);class Eo extends br{constructor(t){super(),this._anchor=new Js(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new jt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ht.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||Pt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=HO,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Z.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Vn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Vn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,u=this.vertexData,h=t.trim,c=t.orig,f=this._anchor;let p=0,m=0,x=0,T=0;if(h?(m=h.x-f._x*c.width,p=m+h.width,T=h.y-f._y*c.height,x=T+h.height):(m=-f._x*c.width,p=m+c.width,T=-f._y*c.height,x=T+c.height),u[0]=i*m+s*T+a,u[1]=o*T+n*m+l,u[2]=i*p+s*T+a,u[3]=o*T+n*p+l,u[4]=i*p+s*x+a,u[5]=o*x+n*p+l,u[6]=i*m+s*x+a,u[7]=o*x+n*m+l,this._roundPixels){const v=Z.RESOLUTION;for(let E=0;E<u.length;++E)u[E]=Math.round(u[E]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,f=-n._x*i.width,p=f+i.width,m=-n._y*i.height,x=m+i.height;if(e[0]=o*f+l*m+h,e[1]=u*m+a*f+c,e[2]=o*p+l*m+h,e[3]=u*m+a*p+c,e[4]=o*p+l*x+h,e[5]=u*x+a*p+c,e[6]=o*f+l*x+h,e[7]=u*x+a*f+c,this._roundPixels){const T=Z.RESOLUTION;for(let v=0;v<e.length;++v)e[v]=Math.round(e[v]*T)/T}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new gd),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Et),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,zl);const e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x;let s=0;return zl.x>=n&&zl.x<n+e&&(s=-i*this.anchor.y,zl.y>=s&&zl.y<s+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof Pt?t:Pt.from(t,e);return new Eo(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Vn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Vn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Pt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Ew=new he;re.prototype._cacheAsBitmap=!1;re.prototype._cacheData=null;re.prototype._cacheAsBitmapResolution=null;re.prototype._cacheAsBitmapMultisample=null;class $O{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(re.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new $O),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});re.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};re.prototype._initCachedDisplayObject=function(r){var f,p;if((f=this._cacheData)!=null&&f.sprite)return;const t=this.alpha;this.alpha=1,r.batch.flush();const e=this.getLocalBounds(new Et,!0);if((p=this.filters)!=null&&p.length){const m=this.filters[0].padding;e.pad(m)}const i=this.cacheAsBitmapResolution||r.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);const n=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=sh.create({width:e.width,height:e.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${go()}`;this._cacheData.textureCacheId=u,mt.addToCache(l.baseTexture,u),Pt.addToCache(l,u);const h=this.transform.localTransform.copyTo(Ew).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const c=new Eo(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};re.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};re.prototype._initCachedDisplayObjectCanvas=function(r){var h;if((h=this._cacheData)!=null&&h.sprite)return;const t=this.getLocalBounds(new Et,!0),e=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,n=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;t.ceil(s),t.width=Math.max(t.width,1/s),t.height=Math.max(t.height,1/s);const o=sh.create({width:t.width,height:t.height,resolution:s}),a=`cacheAsBitmap_${go()}`;this._cacheData.textureCacheId=a,mt.addToCache(o.baseTexture,a),Pt.addToCache(o,a);const l=Ew;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new Eo(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};re.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};re.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};re.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,mt.removeFromCache(this._cacheData.textureCacheId),Pt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};re.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};re.prototype.name=null;br.prototype.getChildByName=function(r,t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].name===r)return this.children[e];if(t)for(let e=0,i=this.children.length;e<i;e++){const n=this.children[e];if(!n.getChildByName)continue;const s=n.getChildByName(r,!0);if(s)return s}return null};re.prototype.getGlobalPosition=function(r=new Lt,t=!1){return this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};var XO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class zO extends Je{constructor(t=1){super(OO,XO,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const jO={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},VO=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function WO(r){const t=jO[r],e=t.length;let i=VO,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=e&&(o=r-a-1),l=l.replace("%value%",t[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}const YO=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function KO(r,t){const e=Math.ceil(r/2);let i=YO,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}class _g extends Je{constructor(t,e=8,i=4,n=Je.defaultResolution,s=5){const o=KO(s,t),a=WO(s);super(o,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,n);else{const s=t.getFilterTexture(),o=t.renderer;let a=e,l=s;this.state.blend=!1,t.applyFilter(this,a,l,Li.CLEAR);for(let u=1;u<this.passes-1;u++){t.bindAndClear(a,Li.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,n),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class qO extends Je{constructor(t=8,e=4,i=Je.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new _g(!0,t,e,i,n),this.blurYFilter=new _g(!1,t,e,i,n),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,Li.CLEAR),this.blurYFilter.apply(t,a,i,n),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var ZO=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class xg extends Je{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(fw,ZO,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,n,s]=jt.shared.setValue(t).toArray(),o=[i,0,0,0,0,0,n,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),n=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,u=o*(1-i)-a*n,h=o*(1-i)+a*n,c=o*(1-i)+a*n,f=i+o*(1-i),p=o*(1-i)-a*n,m=o*(1-i)-a*n,x=o*(1-i)+a*n,T=i+o*(1-i),v=[l,u,h,0,0,c,f,p,0,0,m,x,T,0,0,0,0,0,1,0];this._loadMatrix(v,e)}contrast(t,e){const i=(t||0)+1,n=-.5*(i-1),s=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(s,e)}saturate(t=0,e){const i=t*2/3+1,n=(i-1)*-.5,s=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(s,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,n,s){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;const o=jt.shared,[a,l,u]=o.setValue(i).toArray(),[h,c,f]=o.setValue(n).toArray(),p=[.3,.59,.11,0,0,a,l,u,t,0,h,c,f,e,0,a-h,l-c,u-f,0,0];this._loadMatrix(p,s)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}xg.prototype.grayscale=xg.prototype.greyscale;var QO=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,JO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class tM extends Je{constructor(t,e){const i=new he;t.renderable=!1,super(JO,QO,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new Lt(e,e)}apply(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,e,i,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var eM=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,rM=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class iM extends Je{constructor(){super(rM,eM)}}var nM=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class sM extends Je{constructor(t=.5,e=Math.random()){super(fw,nM,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const F0={AlphaFilter:zO,BlurFilter:qO,BlurFilterPass:_g,ColorMatrixFilter:xg,DisplacementFilter:tM,FXAAFilter:iM,NoiseFilter:sM};Object.entries(F0).forEach(([r,t])=>{Object.defineProperty(F0,r,{get(){return bt("7.1.0",`filters.${r} has moved to ${r}`),t}})});class oM{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(ur.system.add(this.tickerUpdate,this,yo.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ur.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const $n=new oM;class oh{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=oh.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Lt,this.page=new Lt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class yd extends oh{constructor(){super(...arguments),this.client=new Lt,this.movement=new Lt,this.offset=new Lt,this.global=new Lt,this.screen=new Lt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,n,s,o,a,l,u,h,c,f,p,m,x){throw new Error("Method not implemented.")}}class ii extends yd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ya extends yd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ya.DOM_DELTA_PIXEL=0,ya.DOM_DELTA_LINE=1,ya.DOM_DELTA_PAGE=2;const aM=2048,lM=new Lt,fp=new Lt;class uM{constructor(t){this.dispatch=new eh,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,n)=>i.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,n=e.length;i<n;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){$n.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[i](this.rootTarget,this.rootTarget.eventMode,lM.set(t,e),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(e)?e:[e];for(let s=i.length-1;s>=0;s--)n.forEach(o=>{t.currentTarget=i[s],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let i=0;i<aM&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,n,s,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&($n.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let c=h.length-1;c>=0;c--){const f=h[c],p=this.hitTestMoveRecursive(f,this._isInteractive(e)?e:f.eventMode,i,n,s,o||s(t,i));if(p){if(p.length>0&&!p[p.length-1].parent)continue;const m=t.isInteractive();(p.length>0||m)&&(m&&this._allInteractiveElements.push(t),p.push(t)),this._hitElements.length===0&&(this._hitElements=p),a=!0}}}const l=this._isInteractive(e),u=t.isInteractive();return l&&u&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(t,i)&&n(t,i)?u?[t]:[]:null}hitTestRecursive(t,e,i,n,s){if(this._interactivePrune(t)||s(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&($n.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let u=l.length-1;u>=0;u--){const h=l[u],c=this.hitTestRecursive(h,this._isInteractive(e)?e:h.eventMode,i,n,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const f=t.isInteractive();return(c.length>0||f)&&c.push(t),c}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&n(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,fp),!t.hitArea.contains(fp.x,fp.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var s,o;e=e??t.type;const i=`on${e}`;(o=(s=t.currentTarget)[i])==null||o.call(s,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof ii)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,u;if(!(t instanceof ii)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&s!==e.target){const h=t.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(t,h,s);if(this.dispatchEvent(c,"pointerout"),i&&this.dispatchEvent(c,"mouseout"),!e.composedPath().includes(s)){const f=this.createPointerEvent(t,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!e.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}if(s!==e.target){const h=t.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(e,h);this.dispatchEvent(c,"pointerover"),i&&this.dispatchEvent(c,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==e.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const p=this.clonePointerEvent(e,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),i&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=e.target)==null?void 0:u.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof ii)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof ii)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof ii)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=n.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof ii)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof ya)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const n=this.allocateEvent(ii);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof e=="string"&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(ya);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(ii);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof ii&&e instanceof ii&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof yd&&e instanceof yd&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let n=0,s=i.length;n<s&&!t.propagationImmediatelyStopped;n++)i[n].once&&t.currentTarget.removeListener(e,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,t)}}const hM=1,cM={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Eg=class Tg{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new uM(null),$n.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ii(null),this.rootWheelEvent=new ya(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Tg.defaultEventFeatures},{set:(e,i,n)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),e[i]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,Tg._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,n=e.length;i<n;i++){const s=e[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,$n.pointerMoved();const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let s=0,o=n.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,n[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,$n.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;$n.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;$n.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*s,t.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,n=t.changedTouches.length;i<n;i++){const s=t.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=hM),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=cM[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Eg.extension={name:"events",type:[V.RendererSystem,V.CanvasRendererSystem]},Eg.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let wg=Eg;rt.add(wg);function N0(r){return r==="dynamic"||r==="static"}const dM={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??N0(wg.defaultEventMode)},set interactive(r){bt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??wg.defaultEventMode},set eventMode(r){this._internalInteractive=N0(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof e=="object"?e.signal:void 0,s=typeof e=="object"?e.once===!0:!1,o=typeof t=="function"?void 0:t;r=i?`${r}capture`:r;const a=typeof t=="function"?t:t.handleEvent,l=this;n&&n.addEventListener("abort",()=>{l.off(r,a,o)}),s?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,n)},dispatchEvent(r){if(!(r instanceof oh))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};re.mixin(dM);const fM={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};re.mixin(fM);const pM=9,jh=100,mM=0,gM=0,B0=2,k0=1,yM=-1e3,vM=-1e3,_M=2;class Tw{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(hn.tablet||hn.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${jh}px`,e.style.height=`${jh}px`,e.style.position="absolute",e.style.top=`${mM}px`,e.style.left=`${gM}px`,e.style.zIndex=B0.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${k0}px`,t.style.height=`${k0}px`,t.style.position="absolute",t.style.top=`${yM}px`,t.style.left=`${vM}px`,t.style.zIndex=_M.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(hn.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=n/o*l,h=s/a*l;let c=this.div;c.style.left=`${e}px`,c.style.top=`${i}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,ma(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{c=p._accessibleDiv;let m=p.hitArea;const x=p.worldTransform;p.hitArea?(c.style.left=`${(x.tx+m.x*x.a)*u}px`,c.style.top=`${(x.ty+m.y*x.d)*h}px`,c.style.width=`${m.width*x.a*u}px`,c.style.height=`${m.height*x.d*h}px`):(m=p.getBounds(),this.capHitArea(m),c.style.left=`${m.x*u}px`,c.style.top=`${m.y*h}px`,c.style.width=`${m.width*u}px`,c.style.height=`${m.height*h}px`,c.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(c.title=p.accessibleTitle),c.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&c.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==c.title||p.tabIndex!==c.tabIndex)&&(c.title=p.accessibleTitle,c.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${jh}px`,e.style.height=`${jh}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=B0.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,n=this.renderer.events.rootBoundary,s=Object.assign(new oh(n),{target:i});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>n.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===pM&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Tw.extension={name:"accessibility",type:[V.RendererPlugin,V.CanvasRendererPlugin]};rt.add(Tw);const ww=class bg{constructor(t){this.stage=new br,t=Object.assign({forceCanvas:!1},t),this.renderer=PO(t),bg._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=bg._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};ww._plugins=[];let bw=ww;rt.handleByList(V.Application,bw._plugins);class Sw{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;e=n,i=s}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Sw.extension=V.Application;rt.add(Sw);const D0={loader:V.LoadParser,resolver:V.ResolveParser,cache:V.CacheParser,detection:V.DetectionParser};rt.handle(V.Asset,r=>{const t=r.ref;Object.entries(D0).filter(([e])=>!!t[e]).forEach(([e,i])=>rt.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(D0).filter(e=>!!t[e]).forEach(e=>rt.remove(t[e]))});class xM{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Ua(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function ps(r,t){const e=r.split("?")[0],i=Ee.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const hi=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r),Sg=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function Aw(r,t,e,i,n){const s=t[e];for(let o=0;o<s.length;o++){const a=s[o];e<t.length-1?Aw(r.replace(i[e],a),t,e+1,i,n):n.push(r.replace(i[e],a))}}function EM(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const n=[];e.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),Aw(r,n,0,e,i)}else i.push(r);return i}const vd=r=>!Array.isArray(r);class TM{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=hi(t);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){n=l.getCacheableAssets(i,e);break}}n||(n={},i.forEach(a=>{n[a]=e}));const s=Object.keys(n),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),e instanceof Pt){const a=e;i.forEach(l=>{a.baseTexture!==Pt.EMPTY.baseTexture&&mt.addToCache(a.baseTexture,l),Pt.addToCache(a,l)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Ks=new TM;let wM=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let n=null,s=null;if(e.loadParser&&(s=this._parserHash[e.loadParser],s||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,t,e,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(t,e,this),i.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,n,e,this))&&(n=await u.parse(n,e,this)||n,i.parser=u)}return n})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const n={},s=vd(t),o=hi(t,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const h=Ee.toAbsolute(u.src);if(!n[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),n[u.src]=await this.promiseCache[h].promise,e&&e(++i/a)}catch(c){throw delete this.promiseCache[h],delete n[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?n[o[0].src]:n}async unload(t){const e=hi(t,i=>({alias:[i],src:i})).map(async i=>{var o,a;const n=Ee.toAbsolute(i.src),s=this.promiseCache[n];if(s){const l=await s.promise;delete this.promiseCache[n],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}};var yi=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(yi||{});const bM=".json",SM="application/json",AM={extension:{type:V.LoadParser,priority:yi.Low},name:"loadJson",test(r){return Ua(r,SM)||ps(r,bM)},async load(r){return await(await Z.ADAPTER.fetch(r)).json()}};rt.add(AM);const CM=".txt",PM="text/plain",IM={name:"loadTxt",extension:{type:V.LoadParser,priority:yi.Low},test(r){return Ua(r,PM)||ps(r,CM)},async load(r){return await(await Z.ADAPTER.fetch(r)).text()}};rt.add(IM);const RM=["normal","bold","100","200","300","400","500","600","700","800","900"],OM=[".ttf",".otf",".woff",".woff2"],MM=["font/ttf","font/otf","font/woff","font/woff2"],LM=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function FM(r){const t=Ee.extname(r),e=Ee.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=e.length>0;for(const s of e)if(!s.match(LM)){i=!1;break}let n=e.join(" ");return i||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const NM=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function BM(r){return NM.test(r)?r:encodeURI(r)}const kM={extension:{type:V.LoadParser,priority:yi.Low},name:"loadWebFont",test(r){return Ua(r,MM)||ps(r,OM)},async load(r,t){var i,n,s;const e=Z.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??FM(r),l=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(h=>RM.includes(h)))??["normal"],u=t.data??{};for(let h=0;h<l.length;h++){const c=l[h],f=new FontFace(a,`url(${BM(r)})`,{...u,weight:c});await f.load(),e.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>Z.ADAPTER.getFontFaceSet().delete(t))}};rt.add(kM);const DM=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let va=null,Ag=class extends Worker{constructor(){va||(va=URL.createObjectURL(new Blob([DM],{type:"application/javascript"}))),super(va)}};Ag.revokeObjectURL=function(){va&&(URL.revokeObjectURL(va),va=null)};const UM=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let _a=null;class Cw extends Worker{constructor(){_a||(_a=URL.createObjectURL(new Blob([UM],{type:"application/javascript"}))),super(_a)}}Cw.revokeObjectURL=function(){_a&&(URL.revokeObjectURL(_a),_a=null)};let U0=0,pp;class GM{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const e=new Ag;e.addEventListener("message",i=>{e.terminate(),Ag.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){pp===void 0&&(pp=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<pp&&(this._createdWorkers++,t=new Cw,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[U0]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:U0++,id:i})}}const G0=new GM;function ah(r,t,e){r.resource.internal=!0;const i=new Pt(r),n=()=>{delete t.promiseCache[e],Ks.has(e)&&Ks.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),i}const HM=[".jpeg",".jpg",".png",".webp",".avif"],$M=["image/jpeg","image/png","image/webp","image/avif"];async function XM(r){const t=await Z.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const af={name:"loadTextures",extension:{type:V.LoadParser,priority:yi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Ua(r,$M)||ps(r,HM)},async load(r,t,e){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;i?this.config.preferWorkers&&await G0.isImageBitmapSupported()?n=await G0.loadImageBitmap(r):n=await XM(r):n=await new Promise((l,u)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=r,h.complete?l(h):(h.onload=()=>l(h),h.onerror=c=>u(c))});const s={...t.data};s.resolution??(s.resolution=xn(r)),i&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new mt(n,s);return o.resource.src=r,ah(o,e,r)},unload(r){r.destroy(!0)}};rt.add(af);const zM=".svg",jM="image/svg+xml",VM={extension:{type:V.LoadParser,priority:yi.High},name:"loadSVG",test(r){return Ua(r,jM)||ps(r,zM)},async testParse(r){return mg.test(r)},async parse(r,t,e){var s;const i=new mg(r,(s=t==null?void 0:t.data)==null?void 0:s.resourceOptions);await i.load();const n=new mt(i,{resolution:xn(r),...t==null?void 0:t.data});return n.resource.src=t.src,ah(n,e,t.src)},async load(r,t){return(await Z.ADAPTER.fetch(r)).text()},unload:af.unload};rt.add(VM);const WM=[".mp4",".m4v",".webm",".ogv"],YM=["video/mp4","video/webm","video/ogg"],KM={name:"loadVideo",extension:{type:V.LoadParser,priority:yi.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return Ua(r,YM)||ps(r,WM)},async load(r,t,e){var o;let i;const n=await(await Z.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(n);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new _w(s,a);await l.load();const u=new mt(l,{alphaMode:await tR(),resolution:xn(r),...t==null?void 0:t.data});u.resource.src=r,i=ah(u,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return i},unload(r){r.destroy(!0)}};rt.add(KM);class qM{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:n,srcs:s}=t;return hi(e||i||n||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(n=>{const s=n.src??n.srcs,o=n.alias??n.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(t,o);i.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(t,u));i.push(...l),a=[...o,...l]}this.add({...n,alias:a,src:s})}):Object.keys(e).forEach(n=>{const s=[n,this._createBundleAssetId(t,n)];if(typeof e[n]=="string")this.add({alias:s,src:e[n]});else if(Array.isArray(e[n]))this.add({alias:s,src:e[n]});else{const o=e[n],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}i.push(...s)}),this._bundles[t]=i}add(t,e,i,n,s){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(bt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:i,format:n,loadParser:s})):Array.isArray(t)?o.push(...t):o.push(t);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},hi(o).forEach(l=>{const{src:u,srcs:h}=l;let{data:c,format:f,loadParser:p}=l;const m=hi(u||h).map(v=>typeof v=="string"?EM(v):Array.isArray(v)?v:[v]),x=this.getAlias(l);Array.isArray(x)?x.forEach(a):a(x);const T=[];m.forEach(v=>{v.forEach(E=>{let _={};if(typeof E!="object"){_.src=E;for(let w=0;w<this._parsers.length;w++){const A=this._parsers[w];if(A.test(E)){_=A.parse(E);break}}}else c=E.data??c,f=E.format??f,p=E.loadParser??p,_={..._,...E};if(!x)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:x,data:c,format:f,loadParser:p}),T.push(_)})}),x.forEach(v=>{this._assetMap[v]=T})})}resolveBundle(t){const e=vd(t);t=hi(t);const i={};return t.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(n,l)]=u}i[n]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const n in e)i[n]=e[n].src;return i}return e.src}resolve(t){const e=vd(t);t=hi(t);const i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[n]=s[0]??o}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:n,loadParser:s,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=Ee.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=s??t.loadParser,t.format=o??Ee.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class ZM{constructor(){this._detections=[],this._initialized=!1,this.resolver=new qM,this.loader=new wM,this.cache=Ks,this._backgroundLoader=new xM(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const e=((s=t.texturePreference)==null?void 0:s.resolution)??1,i=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,n,s){this.resolver.add(t,e,i,n,s)}async load(t,e){this._initialized||await this.init();const i=vd(t),n=hi(t).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,e);return i?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},o=Object.keys(n);let a=0,l=0;const u=()=>{e==null||e(++a/l)},h=o.map(c=>{const f=n[c];return l+=Object.keys(f).length,this._mapLoadToResolve(f,u).then(p=>{s[c]=p})});return await Promise.all(h),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ks.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Ks.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[n[l]]=u,Ks.set(h,u)}),o}async unload(t){this._initialized||await this.init();const e=hi(t).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=hi(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Ks.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,n)=>e.indexOf(i)===n),e}get detections(){return this._detections}get preferWorkers(){return af.config.preferWorkers}set preferWorkers(t){bt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const sa=new ZM;rt.handleByList(V.LoadParser,sa.loader.parsers).handleByList(V.ResolveParser,sa.resolver.parsers).handleByList(V.CacheParser,sa.cache.parsers).handleByList(V.DetectionParser,sa.detections);const QM={extension:V.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof Pt),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((n,s)=>{e[i+(s===0?"":s+1)]=n})}),e}};rt.add(QM);async function Pw(r){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const JM={extension:{type:V.DetectionParser,priority:1},test:async()=>Pw("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};rt.add(JM);const t2={extension:{type:V.DetectionParser,priority:0},test:async()=>Pw("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};rt.add(t2);const H0=["png","jpg","jpeg"],e2={extension:{type:V.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...H0],remove:async r=>r.filter(t=>!H0.includes(t))};rt.add(e2);const r2="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Zy(r){return r2?!1:document.createElement("video").canPlayType(r)!==""}const i2={extension:{type:V.DetectionParser,priority:0},test:async()=>Zy("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};rt.add(i2);const n2={extension:{type:V.DetectionParser,priority:0},test:async()=>Zy("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};rt.add(n2);const s2={extension:{type:V.DetectionParser,priority:0},test:async()=>Zy("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};rt.add(s2);const o2={extension:V.ResolveParser,test:af.test,parse:r=>{var t;return{resolution:parseFloat(((t=Z.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:Ee.extname(r).slice(1),src:r}}};rt.add(o2);var Fe=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(Fe||{});const _d={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Pi,Xo;function $0(){Xo={s3tc:Pi.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Pi.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Pi.getExtension("WEBGL_compressed_texture_etc"),etc1:Pi.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Pi.getExtension("WEBGL_compressed_texture_pvrtc")||Pi.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Pi.getExtension("WEBGL_compressed_texture_atc"),astc:Pi.getExtension("WEBGL_compressed_texture_astc"),bptc:Pi.getExtension("EXT_texture_compression_bptc")}}const a2={extension:{type:V.DetectionParser,priority:2},test:async()=>{const r=Z.ADAPTER.createCanvas().getContext("webgl");return r?(Pi=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{Xo||$0();const t=[];for(const e in Xo)Xo[e]&&t.push(e);return[...t,...r]},remove:async r=>(Xo||$0(),r.filter(t=>!(t in Xo)))};rt.add(a2);class l2 extends ef{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,n;typeof t=="string"?(i=t,n=new Uint8Array):(i=null,n=t),super(n,e),this.origin=i,this.buffer=n?new tg(n):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new tg(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class ao extends l2{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=ao._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||ao._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:h}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,l,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=ao._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,i,n,s,o,a){const l=new Array(i);let u=t.byteOffset,h=o,c=a,f=h+n-1&~(n-1),p=c+s-1&~(s-1),m=f*p*_d[e];for(let x=0;x<i;x++)l[x]={levelID:x,levelWidth:i>1?h:f,levelHeight:i>1?c:p,levelBuffer:new Uint8Array(t.buffer,u,m)},u+=m,h=h>>1||1,c=c>>1||1,f=h+n-1&~(n-1),p=c+s-1&~(s-1),m=f*p*_d[e];return l}}const mp=4,Vh=124,u2=32,X0=20,h2=542327876,Wh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},c2={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Yh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},d2=1,f2=2,p2=4,m2=64,g2=512,y2=131072,v2=827611204,_2=861165636,x2=894720068,E2=808540228,T2=4,w2={[v2]:Fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,[_2]:Fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,[x2]:Fe.COMPRESSED_RGBA_S3TC_DXT5_EXT},b2={70:Fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Fe.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Fe.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Fe.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Fe.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Fe.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Fe.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function S2(r){const t=new Uint32Array(r);if(t[0]!==h2)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(r,0,Vh/Uint32Array.BYTES_PER_ELEMENT),i=e[Wh.HEIGHT],n=e[Wh.WIDTH],s=e[Wh.MIPMAP_COUNT],o=new Uint32Array(r,Wh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,u2/Uint32Array.BYTES_PER_ELEMENT),a=o[d2];if(a&p2){const l=o[c2.FOURCC];if(l!==E2){const E=w2[l],_=mp+Vh,w=new Uint8Array(r,_);return[new ao(w,{format:E,width:n,height:i,levels:s})]}const u=mp+Vh,h=new Uint32Array(t.buffer,u,X0/Uint32Array.BYTES_PER_ELEMENT),c=h[Yh.DXGI_FORMAT],f=h[Yh.RESOURCE_DIMENSION],p=h[Yh.MISC_FLAG],m=h[Yh.ARRAY_SIZE],x=b2[c];if(x===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(p===T2)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const T=new Array,v=mp+Vh+X0;if(m===1)T.push(new Uint8Array(r,v));else{const E=_d[x];let _=0,w=n,A=i;for(let I=0;I<s;I++){const P=Math.max(1,w+3&-4),U=Math.max(1,A+3&-4),B=P*U*E;_+=B,w=w>>>1,A=A>>>1}let M=v;for(let I=0;I<m;I++)T.push(new Uint8Array(r,M,_)),M+=_}return T.map(E=>new ao(E,{format:x,width:n,height:i,levels:s}))}throw a&m2?new Error("DDSParser does not support uncompressed texture data."):a&g2?new Error("DDSParser does not supported YUV uncompressed texture data."):a&y2?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&f2?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const z0=[171,75,84,88,32,49,49,187,13,10,26,10],A2=67305985,ei={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Cg=64,j0={[ot.UNSIGNED_BYTE]:1,[ot.UNSIGNED_SHORT]:2,[ot.INT]:4,[ot.UNSIGNED_INT]:4,[ot.FLOAT]:4,[ot.HALF_FLOAT]:8},C2={[$.RGBA]:4,[$.RGB]:3,[$.RG]:2,[$.RED]:1,[$.LUMINANCE]:1,[$.LUMINANCE_ALPHA]:2,[$.ALPHA]:1},P2={[ot.UNSIGNED_SHORT_4_4_4_4]:2,[ot.UNSIGNED_SHORT_5_5_5_1]:2,[ot.UNSIGNED_SHORT_5_6_5]:2};function I2(r,t,e=!1){const i=new DataView(t);if(!R2(r,i))return null;const n=i.getUint32(ei.ENDIANNESS,!0)===A2,s=i.getUint32(ei.GL_TYPE,n),o=i.getUint32(ei.GL_FORMAT,n),a=i.getUint32(ei.GL_INTERNAL_FORMAT,n),l=i.getUint32(ei.PIXEL_WIDTH,n),u=i.getUint32(ei.PIXEL_HEIGHT,n)||1,h=i.getUint32(ei.PIXEL_DEPTH,n)||1,c=i.getUint32(ei.NUMBER_OF_ARRAY_ELEMENTS,n)||1,f=i.getUint32(ei.NUMBER_OF_FACES,n),p=i.getUint32(ei.NUMBER_OF_MIPMAP_LEVELS,n),m=i.getUint32(ei.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const x=4,T=4,v=l+3&-4,E=u+3&-4,_=new Array(c);let w=l*u;s===0&&(w=v*E);let A;if(s!==0?j0[s]?A=j0[s]*C2[o]:A=P2[s]:A=_d[a],A===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const M=e?M2(i,m,n):null;let I=w*A,P=l,U=u,B=v,st=E,X=Cg+m;for(let O=0;O<p;O++){const G=i.getUint32(X,n);let tt=X+4;for(let at=0;at<c;at++){let et=_[at];et||(et=_[at]=new Array(p)),et[O]={levelID:O,levelWidth:p>1||s!==0?P:B,levelHeight:p>1||s!==0?U:st,levelBuffer:new Uint8Array(t,tt,I)},tt+=I}X+=G+4,X=X%4!==0?X+4-X%4:X,P=P>>1||1,U=U>>1||1,B=P+x-1&~(x-1),st=U+T-1&~(T-1),I=B*st*A}return s!==0?{uncompressed:_.map(O=>{let G=O[0].levelBuffer,tt=!1;return s===ot.FLOAT?G=new Float32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4):s===ot.UNSIGNED_INT?(tt=!0,G=new Uint32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)):s===ot.INT&&(tt=!0,G=new Int32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)),{resource:new ef(G,{width:O[0].levelWidth,height:O[0].levelHeight}),type:s,format:tt?O2(o):o}}),kvData:M}:{compressed:_.map(O=>new ao(null,{format:a,width:l,height:u,levels:p,levelBuffers:O})),kvData:M}}function R2(r,t){for(let e=0;e<z0.length;e++)if(t.getUint8(e)!==z0[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function O2(r){switch(r){case $.RGBA:return $.RGBA_INTEGER;case $.RGB:return $.RGB_INTEGER;case $.RG:return $.RG_INTEGER;case $.RED:return $.RED_INTEGER;default:return r}}function M2(r,t,e){const i=new Map;let n=0;for(;n<t;){const s=r.getUint32(Cg+n,e),o=Cg+n+4,a=3-(s+3)%4;if(s===0||s>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),h=new DataView(r.buffer,o+l+1,s-l-1);i.set(u,h),n+=4+s+a}return i}const L2={extension:{type:V.LoadParser,priority:yi.High},name:"loadDDS",test(r){return ps(r,".dds")},async load(r,t,e){const i=await(await Z.ADAPTER.fetch(r)).arrayBuffer(),n=S2(i).map(s=>{const o=new mt(s,{mipmap:Hi.OFF,alphaMode:lr.NO_PREMULTIPLIED_ALPHA,resolution:xn(r),...t.data});return ah(o,e,r)});return n.length===1?n[0]:n},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};rt.add(L2);const F2={extension:{type:V.LoadParser,priority:yi.High},name:"loadKTX",test(r){return ps(r,".ktx")},async load(r,t,e){const i=await(await Z.ADAPTER.fetch(r)).arrayBuffer(),{compressed:n,uncompressed:s,kvData:o}=I2(r,i),a=n??s,l={mipmap:Hi.OFF,alphaMode:lr.NO_PREMULTIPLIED_ALPHA,resolution:xn(r),...t.data},u=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const c=h.resource??h,f=new mt(c,l);return f.ktxKeyValueData=o,ah(f,e,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};rt.add(F2);const N2={extension:V.ResolveParser,test:r=>{const t=Ee.extname(r).slice(1);return["basis","ktx","dds"].includes(t)},parse:r=>{var e,i;const t=Ee.extname(r).slice(1);if(t==="ktx"){const n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx",".bptc.ktx"];if(n.some(s=>r.endsWith(s)))return{resolution:parseFloat(((e=Z.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:n.find(s=>r.endsWith(s)),src:r}}return{resolution:parseFloat(((i=Z.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:t,src:r}}};rt.add(N2);const Kh=new Et,B2=4,Iw=class nu{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,i,n){const s=new Image;return s.src=await this.base64(t,e,i,n),s}async base64(t,e,i,n){const s=this.canvas(t,n);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},e,i)});if(s.toDataURL!==void 0)return s.toDataURL(e,i);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:e,quality:i});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);o&&nu._flipY(i,n,s),a&&nu._unpremultiplyAlpha(i);const l=new gR(n,s,1),u=new ImageData(new Uint8ClampedArray(i.buffer),n,s);return l.context.putImageData(u,0,0),l.canvas}pixels(t,e){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);return o&&nu._flipY(i,n,s),a&&nu._unpremultiplyAlpha(i),i}_rawPixels(t,e){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let n,s=!1,o=!1,a,l=!1;t&&(t instanceof sh?a=t:(a=i.generateTexture(t,{region:e,resolution:i.resolution,multisample:i.multisample}),l=!0,e&&(Kh.width=e.width,Kh.height=e.height,e=Kh)));const u=i.gl;if(a){if(n=a.baseTexture.resolution,e=e??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===$.RGBA,!l){i.renderTexture.bind(a);const p=a.framebuffer.glFramebuffers[i.CONTEXT_UID];p.blitFramebuffer&&i.framebuffer.bind(p.blitFramebuffer)}}else n=i.resolution,e||(e=Kh,e.width=i.width/n,e.height=i.height/n),s=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const h=Math.max(Math.round(e.width*n),1),c=Math.max(Math.round(e.height*n),1),f=new Uint8Array(B2*h*c);return u.readPixels(Math.round(e.x*n),Math.round(e.y*n),h,c,u.RGBA,u.UNSIGNED_BYTE,f),l&&(a==null||a.destroy(!0)),{pixels:f,width:h,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,i){const n=e<<2,s=i>>1,o=new Uint8Array(n);for(let a=0;a<s;a++){const l=a*n,u=(i-a-1)*n;o.set(t.subarray(l,l+n)),t.copyWithin(l,u,u+n),t.set(o,u)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let i=0;i<e;i+=4){const n=t[i+3];if(n!==0){const s=255.001/n;t[i]=t[i]*s+.5,t[i+1]=t[i+1]*s+.5,t[i+2]=t[i+2]*s+.5}}}};Iw.extension={name:"extract",type:V.RendererSystem};let k2=Iw;rt.add(k2);const xd={build(r){const t=r.points;let e,i,n,s,o,a;if(r.type===Be.CIRC){const m=r.shape;e=m.x,i=m.y,o=a=m.radius,n=s=0}else if(r.type===Be.ELIP){const m=r.shape;e=m.x,i=m.y,o=m.width,a=m.height,n=s=0}else{const m=r.shape,x=m.width/2,T=m.height/2;e=m.x+x,i=m.y+T,o=a=Math.max(0,Math.min(m.radius,Math.min(x,T))),n=x-o,s=T-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(n?4:0)+(s?4:0);if(t.length=u,u===0)return;if(l===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=i+s,t[2]=t[4]=e-n,t[5]=t[7]=i-s;return}let h=0,c=l*4+(n?2:0)+2,f=c,p=u;{const m=n+o,x=s,T=e+m,v=e-m,E=i+x;if(t[h++]=T,t[h++]=E,t[--c]=E,t[--c]=v,s){const _=i-x;t[f++]=v,t[f++]=_,t[--p]=_,t[--p]=T}}for(let m=1;m<l;m++){const x=Math.PI/2*(m/l),T=n+Math.cos(x)*o,v=s+Math.sin(x)*a,E=e+T,_=e-T,w=i+v,A=i-v;t[h++]=E,t[h++]=w,t[--c]=w,t[--c]=_,t[f++]=_,t[f++]=A,t[--p]=A,t[--p]=E}{const m=n,x=s+a,T=e+m,v=e-m,E=i+x,_=i-x;t[h++]=T,t[h++]=E,t[--p]=_,t[--p]=T,n&&(t[h++]=v,t[h++]=E,t[--p]=_,t[--p]=v)}},triangulate(r,t){const e=r.points,i=t.points,n=t.indices;if(e.length===0)return;let s=i.length/2;const o=s;let a,l;if(r.type!==Be.RREC){const h=r.shape;a=h.x,l=h.y}else{const h=r.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(e[0],e[1]);for(let h=2;h<e.length;h+=2)i.push(e[h],e[h+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function V0(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let n=0,s=r[e-2],o=r[e-1];n<e;n+=2){const a=r[n],l=r[n+1];i+=(a-s)*(l+o),s=a,o=l}if(!t&&i>0||t&&i<=0){const n=e/2;for(let s=n+n%2;s<e;s+=2){const o=e-s-2,a=e-s-1,l=s,u=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const Rw={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,n=t.points,s=t.indices;if(e.length>=6){V0(e,!1);const o=[];for(let u=0;u<i.length;u++){const h=i[u];V0(h.points,!0),o.push(e.length/2),e=e.concat(h.points)}const a=EC(e,o,2);if(!a)return;const l=n.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<e.length;u++)n.push(e[u])}}},D2={build(r){const t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,o=r.points;o.length=0,n>=0&&s>=0&&o.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},U2={build(r){xd.build(r)},triangulate(r,t){xd.triangulate(r,t)}};var Lr=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Lr||{}),Wn=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Wn||{});const Ma={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class W0{static curveTo(t,e,i,n,s,o){const a=o[o.length-2],l=o[o.length-1]-e,u=a-t,h=n-e,c=i-t,f=Math.abs(l*c-u*h);if(f<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const p=l*l+u*u,m=h*h+c*c,x=l*h+u*c,T=s*Math.sqrt(p)/f,v=s*Math.sqrt(m)/f,E=T*x/p,_=v*x/m,w=T*c+v*u,A=T*h+v*l,M=u*(v+E),I=l*(v+E),P=c*(T+_),U=h*(T+_),B=Math.atan2(I-A,M-w),st=Math.atan2(U-A,P-w);return{cx:w+t,cy:A+e,radius:s,startAngle:B,endAngle:st,anticlockwise:u*h>c*l}}static arc(t,e,i,n,s,o,a,l,u){const h=a-o,c=Ma._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/cd)*40),f=h/(c*2),p=f*2,m=Math.cos(f),x=Math.sin(f),T=c-1,v=T%1/T;for(let E=0;E<=T;++E){const _=E+v*E,w=f+o+p*_,A=Math.cos(w),M=-Math.sin(w);u.push((m*A+x*M)*s+i,(m*-M+x*A)*s+n)}}}class G2{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Qy{static curveLength(t,e,i,n,s,o,a,l){let u=0,h=0,c=0,f=0,p=0,m=0,x=0,T=0,v=0,E=0,_=0,w=t,A=e;for(let M=1;M<=10;++M)h=M/10,c=h*h,f=c*h,p=1-h,m=p*p,x=m*p,T=x*t+3*m*h*i+3*p*c*s+f*a,v=x*e+3*m*h*n+3*p*c*o+f*l,E=w-T,_=A-v,w=T,A=v,u+=Math.sqrt(E*E+_*_);return u}static curveTo(t,e,i,n,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=Ma._segmentsCount(Qy.curveLength(l,u,t,e,i,n,s,o));let c=0,f=0,p=0,m=0,x=0;a.push(l,u);for(let T=1,v=0;T<=h;++T)v=T/h,c=1-v,f=c*c,p=f*c,m=v*v,x=m*v,a.push(p*l+3*f*v*t+3*c*m*i+x*s,p*u+3*f*v*e+3*c*m*n+x*o)}}function Y0(r,t,e,i,n,s,o,a){const l=r-e*n,u=t-i*n,h=r+e*s,c=t+i*s;let f,p;o?(f=i,p=-e):(f=-i,p=e);const m=l+f,x=u+p,T=h+f,v=c+p;return a.push(m,x,T,v),2}function Os(r,t,e,i,n,s,o,a){const l=e-r,u=i-t;let h=Math.atan2(l,u),c=Math.atan2(n-r,s-t);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let f=h;const p=c-h,m=Math.abs(p),x=Math.sqrt(l*l+u*u),T=(15*m*Math.sqrt(x)/Math.PI>>0)+1,v=p/T;if(f+=v,a){o.push(r,t,e,i);for(let E=1,_=f;E<T;E++,_+=v)o.push(r,t,r+Math.sin(_)*x,t+Math.cos(_)*x);o.push(r,t,n,s)}else{o.push(e,i,r,t);for(let E=1,_=f;E<T;E++,_+=v)o.push(r+Math.sin(_)*x,t+Math.cos(_)*x,r,t);o.push(n,s,r,t)}return T*2}function H2(r,t){const e=r.shape;let i=r.points||e.points.slice();const n=t.closePointEps;if(i.length===0)return;const s=r.lineStyle,o=new Lt(i[0],i[1]),a=new Lt(i[i.length-2],i[i.length-1]),l=e.type!==Be.POLY||e.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const et=(o.x+a.x)*.5,N=(a.y+o.y)*.5;i.unshift(et,N),i.push(et,N)}const h=t.points,c=i.length/2;let f=i.length;const p=h.length/2,m=s.width/2,x=m*m,T=s.miterLimit*s.miterLimit;let v=i[0],E=i[1],_=i[2],w=i[3],A=0,M=0,I=-(E-w),P=v-_,U=0,B=0,st=Math.sqrt(I*I+P*P);I/=st,P/=st,I*=m,P*=m;const X=s.alignment,O=(1-X)*2,G=X*2;l||(s.cap===Wn.ROUND?f+=Os(v-I*(O-G)*.5,E-P*(O-G)*.5,v-I*O,E-P*O,v+I*G,E+P*G,h,!0)+2:s.cap===Wn.SQUARE&&(f+=Y0(v,E,I,P,O,G,!0,h))),h.push(v-I*O,E-P*O,v+I*G,E+P*G);for(let et=1;et<c-1;++et){v=i[(et-1)*2],E=i[(et-1)*2+1],_=i[et*2],w=i[et*2+1],A=i[(et+1)*2],M=i[(et+1)*2+1],I=-(E-w),P=v-_,st=Math.sqrt(I*I+P*P),I/=st,P/=st,I*=m,P*=m,U=-(w-M),B=_-A,st=Math.sqrt(U*U+B*B),U/=st,B/=st,U*=m,B*=m;const N=_-v,Q=E-w,L=_-A,D=M-w,nt=N*L+Q*D,_t=Q*L-D*N,yt=_t<0;if(Math.abs(_t)<.001*Math.abs(nt)){h.push(_-I*O,w-P*O,_+I*G,w+P*G),nt>=0&&(s.join===Lr.ROUND?f+=Os(_,w,_-I*O,w-P*O,_-U*O,w-B*O,h,!1)+4:f+=2,h.push(_-U*G,w-B*G,_+U*O,w+B*O));continue}const Ut=(-I+v)*(-P+w)-(-I+_)*(-P+E),It=(-U+A)*(-B+w)-(-U+_)*(-B+M),Bt=(N*It-L*Ut)/_t,Y=(D*Ut-Q*It)/_t,ne=(Bt-_)*(Bt-_)+(Y-w)*(Y-w),Kt=_+(Bt-_)*O,pt=w+(Y-w)*O,Gt=_-(Bt-_)*G,Ht=w-(Y-w)*G,vt=Math.min(N*N+Q*Q,L*L+D*D),Te=yt?O:G,ir=vt+Te*Te*x,zi=ne<=ir;let Me=s.join;if(Me===Lr.MITER&&ne/x>T&&(Me=Lr.BEVEL),zi)switch(Me){case Lr.MITER:{h.push(Kt,pt,Gt,Ht);break}case Lr.BEVEL:{yt?h.push(Kt,pt,_+I*G,w+P*G,Kt,pt,_+U*G,w+B*G):h.push(_-I*O,w-P*O,Gt,Ht,_-U*O,w-B*O,Gt,Ht),f+=2;break}case Lr.ROUND:{yt?(h.push(Kt,pt,_+I*G,w+P*G),f+=Os(_,w,_+I*G,w+P*G,_+U*G,w+B*G,h,!0)+4,h.push(Kt,pt,_+U*G,w+B*G)):(h.push(_-I*O,w-P*O,Gt,Ht),f+=Os(_,w,_-I*O,w-P*O,_-U*O,w-B*O,h,!1)+4,h.push(_-U*O,w-B*O,Gt,Ht));break}}else{switch(h.push(_-I*O,w-P*O,_+I*G,w+P*G),Me){case Lr.MITER:{yt?h.push(Gt,Ht,Gt,Ht):h.push(Kt,pt,Kt,pt),f+=2;break}case Lr.ROUND:{yt?f+=Os(_,w,_+I*G,w+P*G,_+U*G,w+B*G,h,!0)+2:f+=Os(_,w,_-I*O,w-P*O,_-U*O,w-B*O,h,!1)+2;break}}h.push(_-U*O,w-B*O,_+U*G,w+B*G),f+=2}}v=i[(c-2)*2],E=i[(c-2)*2+1],_=i[(c-1)*2],w=i[(c-1)*2+1],I=-(E-w),P=v-_,st=Math.sqrt(I*I+P*P),I/=st,P/=st,I*=m,P*=m,h.push(_-I*O,w-P*O,_+I*G,w+P*G),l||(s.cap===Wn.ROUND?f+=Os(_-I*(O-G)*.5,w-P*(O-G)*.5,_-I*O,w-P*O,_+I*G,w+P*G,h,!1)+2:s.cap===Wn.SQUARE&&(f+=Y0(_,w,I,P,O,G,!1,h)));const tt=t.indices,at=Ma.epsilon*Ma.epsilon;for(let et=p;et<f+p-2;++et)v=h[et*2],E=h[et*2+1],_=h[(et+1)*2],w=h[(et+1)*2+1],A=h[(et+2)*2],M=h[(et+2)*2+1],!(Math.abs(v*(w-M)+_*(M-E)+A*(E-w))<at)&&tt.push(et,et+1,et+2)}function $2(r,t){let e=0;const i=r.shape,n=r.points||i.points,s=i.type!==Be.POLY||i.closeStroke;if(n.length===0)return;const o=t.points,a=t.indices,l=n.length/2,u=o.length/2;let h=u;for(o.push(n[0],n[1]),e=1;e<l;e++)o.push(n[e*2],n[e*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function K0(r,t){r.lineStyle.native?$2(r,t):H2(r,t)}class Jy{static curveLength(t,e,i,n,s,o){const a=t-2*i+s,l=e-2*n+o,u=2*i-2*t,h=2*n-2*e,c=4*(a*a+l*l),f=4*(a*u+l*h),p=u*u+h*h,m=2*Math.sqrt(c+f+p),x=Math.sqrt(c),T=2*c*x,v=2*Math.sqrt(p),E=f/x;return(T*m+x*f*(m-v)+(4*p*c-f*f)*Math.log((2*x+E+m)/(E+v)))/(4*T)}static curveTo(t,e,i,n,s){const o=s[s.length-2],a=s[s.length-1],l=Ma._segmentsCount(Jy.curveLength(o,a,t,e,i,n));let u=0,h=0;for(let c=1;c<=l;++c){const f=c/l;u=o+(t-o)*f,h=a+(e-a)*f,s.push(u+(t+(i-t)*f-u)*f,h+(e+(n-e)*f-h)*f)}}}const gp={[Be.POLY]:Rw,[Be.CIRC]:xd,[Be.ELIP]:xd,[Be.RECT]:D2,[Be.RREC]:U2},q0=[],qh=[];class Ed{constructor(t,e=null,i=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new Ed(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Do=new Lt,Ow=class Mw extends MT{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new gd,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),qh.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),q0.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,n=null){const s=new Ed(t,e,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new Ed(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const n=e[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,Do):Do.copyFrom(t),n.shape.contains(Do.x,Do.y))){let s=!1;if(n.holes){for(let o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(Do.x,Do.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let l=this.shapeIndex;l<e.length;l++){this.shapeIndex++;const u=e[l],h=u.fillStyle,c=u.lineStyle;gp[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||c.visible)&&this.processHoles(u.holes);for(let f=0;f<2;f++){const p=f===0?h:c;if(!p.visible)continue;const m=p.texture.baseTexture,x=this.indices.length,T=this.points.length/2;m.wrapMode=rs.REPEAT,f===0?this.processFill(u):this.processLine(u);const v=this.points.length/2-T;v!==0&&(i&&!this._compareStyles(n,p)&&(i.end(x,T),i=null),i||(i=q0.pop()||new G2,i.begin(p,x,T),this.batches.push(i),n=p),this.addUvs(this.points,t,p.texture,T,v,p.matrix))}}const s=this.indices.length,o=this.points.length/2;if(i&&i.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const n=t[e];for(let s=0;s<n.size;s++){const o=n.start+s;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Mw.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++mt._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),qh.push(this.drawCalls[c]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let n=qh.pop();n||(n=new ig,n.texArray=new ug),n.texArray.count=0,n.start=0,n.size=0,n.type=Bi.TRIANGLES;let s=0,o=null,a=0,l=!1,u=Bi.TRIANGLES,h=0;this.drawCalls.push(n);for(let c=0;c<this.batches.length;c++){const f=this.batches[c],p=8,m=f.style,x=m.texture.baseTexture;l!==!!m.native&&(l=!!m.native,u=l?Bi.LINES:Bi.TRIANGLES,o=null,s=p,t++),o!==x&&(o=x,x._batchEnabled!==t&&(s===p&&(t++,s=0,n.size>0&&(n=qh.pop(),n||(n=new ig,n.texArray=new ug),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=u),x.touched=1,x._batchEnabled=t,x._batchLocation=s,x.wrapMode=rs.REPEAT,n.texArray.elements[n.texArray.count++]=x,s++)),n.size+=f.size,h+=f.size,a=x._batchLocation,this.addColors(e,m.color,m.alpha,f.attribSize,f.attribStart),this.addTextureIds(i,a,f.attribSize,f.attribStart)}mt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(t.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<t.length/2;u++)o[l++]=t[u*2],o[l++]=t[u*2+1],o[l++]=e[u*2],o[l++]=e[u*2+1],a[l++]=i[u],o[l++]=n[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Rw.triangulate(t,this):gp[t.type].triangulate(t,this)}processLine(t){K0(t,this);for(let e=0;e<t.holes.length;e++)K0(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];gp[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const n=t[i*2],s=t[i*2+1];t[i*2]=e.a*n+e.c*s+e.tx,t[i*2+1]=e.b*n+e.d*s+e.ty}}addColors(t,e,i,n,s=0){const o=jt.shared.setValue(e).toLittleEndianNumber(),a=jt.shared.setValue(o).toPremultiplied(i);t.length=Math.max(t.length,s+n);for(let l=0;l<n;l++)t[s+l]=a}addTextureIds(t,e,i,n=0){t.length=Math.max(t.length,n+i);for(let s=0;s<i;s++)t[n+s]=e}addUvs(t,e,i,n,s,o=null){let a=0;const l=e.length,u=i.frame;for(;a<s;){let c=t[(n+a)*2],f=t[(n+a)*2+1];if(o){const p=o.a*c+o.c*f+o.tx;f=o.b*c+o.d*f+o.ty,c=p}a++,e.push(c/u.width,f/u.height)}const h=i.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(e,i,l,s)}adjustUvs(t,e,i,n){const s=e.baseTexture,o=1e-6,a=i+n*2,l=e.frame,u=l.width/s.width,h=l.height/s.height;let c=l.x/l.width,f=l.y/l.height,p=Math.floor(t[i]+o),m=Math.floor(t[i+1]+o);for(let x=i+2;x<a;x+=2)p=Math.min(p,Math.floor(t[x]+o)),m=Math.min(m,Math.floor(t[x+1]+o));c-=p,f-=m;for(let x=i;x<a;x+=2)t[x]=(t[x]+c)*u,t[x+1]=(t[x+1]+f)*h}};Ow.BATCHABLE_SIZE=100;let X2=Ow;class lf{constructor(){this.color=16777215,this.alpha=1,this.texture=Pt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new lf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=Pt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class tv extends lf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Wn.BUTT,this.join=Lr.MITER,this.miterLimit=10}clone(){const t=new tv;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Wn.BUTT,this.join=Lr.MITER,this.miterLimit=10}}const yp={},Pg=class Ic extends br{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new lf,this._lineStyle=new tv,this._matrix=null,this._holeMode=!1,this.state=fs.for2d(),this._geometry=t||new X2,this._geometry.refCount++,this._transformID=-1,this._tintColor=new jt(16777215),this.blendMode=ht.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ic(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,n=.5,s=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:n,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:Pt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Wn.BUTT,join:Lr.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new so,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new so,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==t||s!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Jy.curveTo(t,e,i,n,s),this}bezierCurveTo(t,e,i,n,s,o){return this._initCurve(),Qy.curveTo(t,e,i,n,s,o,this.currentPath.points),this}arcTo(t,e,i,n,s){this._initCurve(t,e);const o=this.currentPath.points,a=W0.curveTo(t,e,i,n,s,o);if(a){const{cx:l,cy:u,radius:h,startAngle:c,endAngle:f,anticlockwise:p}=a;this.arc(l,u,h,c,f,p)}return this}arc(t,e,i,n,s,o=!1){if(n===s)return this;if(!o&&s<=n?s+=cd:o&&n<=s&&(n+=cd),s-n===0)return this;const a=t+Math.cos(n)*i,l=e+Math.sin(n)*i,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),f=Math.abs(h[h.length-1]-l);c<u&&f<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return W0.arc(a,l,t,e,i,n,s,o,h),this}beginFill(t=0,e){return this.beginTextureFill({texture:Pt.WHITE,color:t,alpha:e})}normalizeColor(t){const e=jt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:Pt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,n){return this.drawShape(new Et(t,e,i,n))}drawRoundedRect(t,e,i,n,s){return this.drawShape(new sf(t,e,i,n,s))}drawCircle(t,e,i){return this.drawShape(new rf(t,e,i))}drawEllipse(t,e,i,n){return this.drawShape(new nf(t,e,i,n))}drawPolygon(...t){let e,i=!0;const n=t[0];n.points?(i=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const s=new so(e);return s.closeStroke=i,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Be.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let n=0;n<i;n++){const s=t.batches[n],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:e,indices:u,uvs:l,_batchRGB:jt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=h}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,n=this.worldAlpha,s=e.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,jt.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,i.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:i,type:n,size:s,start:o}=e,a=i.count;for(let l=0;l<a;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(n,s,o)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!yp[i]){const{maxTextures:n}=t.plugins[i],s=new Int32Array(n);for(let l=0;l<n;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new he,default:oo.from({uSamplers:s},!0)},a=t.plugins[i]._shader.program;yp[i]=new is(a,o)}e=yp[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:n,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,e,i,n,s)}containsPoint(t){return this.worldTransform.applyInverse(t,Ic._TEMP_POINT),this._geometry.containsPoint(Ic._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=jt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,u=this._geometry.points,h=this.vertexData;let c=0;for(let f=0;f<u.length;f+=2){const p=u[f],m=u[f+1];h[c++]=i*p+s*m+a,h[c++]=o*m+n*p+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Pg.curves=Ma,Pg._TEMP_POINT=new Lt;let lh=Pg;class z2{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const vp=new Lt,Z0=new so,Lw=class Fw extends br{constructor(t,e,i,n=Bi.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||fs.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Z.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Bi.TRIANGLES&&e.length<Fw.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,u=n.tx,h=n.ty,c=this.vertexData;for(let f=0;f<c.length/2;f++){const p=e[f*2],m=e[f*2+1];c[f*2]=s*p+a*m+u,c[f*2+1]=o*p+l*m+h}if(this._roundPixels){const f=Z.RESOLUTION;for(let p=0;p<c.length;++p)c[p]=Math.round(c[p]*f)/f}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new z2(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,vp);const e=this.geometry.getBuffer("aVertexPosition").data,i=Z0.points,n=this.geometry.getIndex().data,s=n.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=n[a]*2,u=n[a+1]*2,h=n[a+2]*2;if(i[0]=e[l],i[1]=e[l+1],i[2]=e[u],i[3]=e[u+1],i[4]=e[h],i[5]=e[h+1],Z0.contains(vp.x,vp.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Lw.BATCHABLE_SIZE=100;let Q0=Lw;class j2 extends nh{constructor(t,e,i){super();const n=new _e(t),s=new _e(e,!0),o=new _e(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,ot.FLOAT).addAttribute("aTextureCoord",s,2,!1,ot.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var V2=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,W2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class J0 extends is{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:he.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||cn.from(W2,V2),i),this._colorDirty=!1,this.uvMatrix=new qT(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new jt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;jt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class tx{constructor(t,e,i){this.geometry=new nh,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ot.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new _e(pR(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new _e(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new _e(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ot.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ot.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===ot.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===ot.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var Y2=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,K2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Nw extends of{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new he,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ot.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=is.from(K2,Y2,{}),this.state=fs.for2d()}render(t){const e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=AT(t.blendMode,u),s.state.set(this.state);const h=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=jt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let f=!1;for(let p=0,m=0;p<o;p+=n,m+=1){let x=o-p;x>n&&(x=n),m>=a.length&&a.push(this._generateOneMoreBuffer(t));const T=a[m];T.uploadDynamic(e,p,x);const v=t._bufferUpdateIDs[m]||0;f=f||T._updateID<v,f&&(T._updateID=t._updateID,T.uploadStatic(e,p,x)),s.geometry.bind(T.geometry),h.drawElements(h.TRIANGLES,x*6,h.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,n=t._batchSize,s=t._properties;for(let o=0;o<i;o+=n)e.push(new tx(this.properties,s,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new tx(this.properties,i,e)}uploadVertices(t,e,i,n,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<i;++c){const f=t[e+c],p=f._texture,m=f.scale.x,x=f.scale.y,T=p.trim,v=p.orig;T?(l=T.x-f.anchor.x*v.width,a=l+T.width,h=T.y-f.anchor.y*v.height,u=h+T.height):(a=v.width*(1-f.anchor.x),l=v.width*-f.anchor.x,u=v.height*(1-f.anchor.y),h=v.height*-f.anchor.y),n[o]=l*m,n[o+1]=h*x,n[o+s]=a*m,n[o+s+1]=h*x,n[o+s*2]=a*m,n[o+s*2+1]=u*x,n[o+s*3]=l*m,n[o+s*3+1]=u*x,o+=s*4}}uploadPosition(t,e,i,n,s,o){for(let a=0;a<i;a++){const l=t[e+a].position;n[o]=l.x,n[o+1]=l.y,n[o+s]=l.x,n[o+s+1]=l.y,n[o+s*2]=l.x,n[o+s*2+1]=l.y,n[o+s*3]=l.x,n[o+s*3+1]=l.y,o+=s*4}}uploadRotation(t,e,i,n,s,o){for(let a=0;a<i;a++){const l=t[e+a].rotation;n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}uploadUvs(t,e,i,n,s,o){for(let a=0;a<i;++a){const l=t[e+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+s]=l.x1,n[o+s+1]=l.y1,n[o+s*2]=l.x2,n[o+s*2+1]=l.y2,n[o+s*3]=l.x3,n[o+s*3+1]=l.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(t,e,i,n,s,o){for(let a=0;a<i;++a){const l=t[e+a],u=jt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=u,n[o+s]=u,n[o+s*2]=u,n[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Nw.extension={name:"particle",type:V.RendererPlugin};rt.add(Nw);var uf=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(uf||{});const Zh={willReadFrequently:!0},Ii=class it{static get experimentalLetterSpacingSupported(){let t=it._experimentalLetterSpacingSupported;if(t!==void 0){const e=Z.ADAPTER.getCanvasRenderingContext2D().prototype;t=it._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,n,s,o,a,l,u){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(t,e,i,n=it._canvas){i=i??e.wordWrap;const s=e.toFontString(),o=it.measureFont(s);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const a=n.getContext("2d",Zh);a.font=s;const l=(i?it.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let m=0;m<l.length;m++){const x=it._measureText(l[m],e.letterSpacing,a);u[m]=x,h=Math.max(h,x)}let c=h+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance);const f=e.lineHeight||o.fontSize+e.strokeThickness;let p=Math.max(f,o.fontSize+e.strokeThickness*2)+e.leading+(l.length-1)*(f+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new it(t,e,c,p,l,u,f+e.leading,h,o)}static _measureText(t,e,i){let n=!1;it.experimentalLetterSpacingSupported&&(it.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(t).width;return s>0&&(n?s-=e:s+=(it.graphemeSegmenter(t).length-1)*e),s}static wordWrap(t,e,i=it._canvas){const n=i.getContext("2d",Zh);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:h}=e,c=it.collapseSpaces(h),f=it.collapseNewlines(h);let p=!c;const m=e.wordWrapWidth+u,x=it.tokenize(t);for(let T=0;T<x.length;T++){let v=x[T];if(it.isNewline(v)){if(!f){a+=it.addLine(o),p=!c,o="",s=0;continue}v=" "}if(c){const _=it.isBreakingSpace(v),w=it.isBreakingSpace(o[o.length-1]);if(_&&w)continue}const E=it.getFromCache(v,u,l,n);if(E>m)if(o!==""&&(a+=it.addLine(o),o="",s=0),it.canBreakWords(v,e.breakWords)){const _=it.wordWrapSplit(v);for(let w=0;w<_.length;w++){let A=_[w],M=A,I=1;for(;_[w+I];){const U=_[w+I];if(!it.canBreakChars(M,U,v,w,e.breakWords))A+=U;else break;M=U,I++}w+=I-1;const P=it.getFromCache(A,u,l,n);P+s>m&&(a+=it.addLine(o),p=!1,o="",s=0),o+=A,s+=P}}else{o.length>0&&(a+=it.addLine(o),o="",s=0);const _=T===x.length-1;a+=it.addLine(v,!_),p=!1,o="",s=0}else E+s>m&&(p=!1,a+=it.addLine(o),o="",s=0),(o.length>0||!it.isBreakingSpace(v)||p)&&(o+=v,s+=E)}return a+=it.addLine(o,!1),a}static addLine(t,e=!0){return t=it.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,n){let s=i[t];return typeof s!="number"&&(s=it._measureText(t,e,n)+e,i[t]=s),s}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!it.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:it._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:it._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const s=t[n],o=t[n+1];if(it.isBreakingSpace(s,o)||it.isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,n,s){return!0}static wordWrapSplit(t){return it.graphemeSegmenter(t)}static measureFont(t){if(it._fonts[t])return it._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=it._canvas,n=it._context;n.font=t;const s=it.METRICS_STRING+it.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width);let a=Math.ceil(n.measureText(it.BASELINE_SYMBOL).width);const l=Math.ceil(it.HEIGHT_MULTIPLIER*a);if(a=a*it.BASELINE_MULTIPLIER|0,o===0||l===0)return it._fonts[t]=e,e;i.width=o,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);const u=n.getImageData(0,0,o,l).data,h=u.length,c=o*4;let f=0,p=0,m=!1;for(f=0;f<a;++f){for(let x=0;x<c;x+=4)if(u[p+x]!==255){m=!0;break}if(!m)p+=c;else break}for(e.ascent=a-f,p=h-c,m=!1,f=l;f>a;--f){for(let x=0;x<c;x+=4)if(u[p+x]!==255){m=!0;break}if(!m)p-=c;else break}return e.descent=f-a,e.fontSize=e.ascent+e.descent,it._fonts[t]=e,e}static clearMetrics(t=""){t?delete it._fonts[t]:it._fonts={}}static get _canvas(){var t;if(!it.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Zh))!=null&&t.measureText)return it.__canvas=i,i;e=Z.ADAPTER.createCanvas()}catch{e=Z.ADAPTER.createCanvas()}e.width=e.height=10,it.__canvas=e}return it.__canvas}static get _context(){return it.__context||(it.__context=it._canvas.getContext("2d",Zh)),it.__context}};Ii.METRICS_STRING="|q",Ii.BASELINE_SYMBOL="M",Ii.BASELINE_MULTIPLIER=1.4,Ii.HEIGHT_MULTIPLIER=2,Ii.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),Ii.experimentalLetterSpacing=!1,Ii._fonts={},Ii._newlines=[10,13],Ii._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Un=Ii;const q2=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Bw=class su{constructor(t){this.styleID=0,this.reset(),xp(this,t,t)}clone(){const t={};return xp(t,this,su.defaultStyle),new su(t)}reset(){xp(this,su.defaultStyle,su.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=_p(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=_p(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){Z2(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=_p(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!q2.includes(n)&&(n=`"${n}"`),e[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};Bw.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:uf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let $i=Bw;function _p(r){const t=jt.shared,e=i=>{const n=t.setValue(i);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function Z2(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function xp(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const Q2={texture:!0,children:!1,baseTexture:!0},kw=class Ig extends Eo{constructor(t,e,i){let n=!1;i||(i=Z.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=Pt.from(i);s.orig=new Et,s.trim=new Et,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Ig.defaultResolution??Z.RESOLUTION,this._autoResolution=Ig.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Un.experimentalLetterSpacing}static set experimentalLetterSpacing(t){bt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Un.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,n=Un.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,o=n.height,a=n.lines,l=n.lineHeight,u=n.lineWidths,h=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let f,p;const m=e.dropShadow?2:1;for(let x=0;x<m;++x){const T=e.dropShadow&&x===0,v=T?Math.ceil(Math.max(1,o)+e.padding*2):0,E=v*this._resolution;if(T){i.fillStyle="black",i.strokeStyle="black";const w=e.dropShadowColor,A=e.dropShadowBlur*this._resolution,M=e.dropShadowDistance*this._resolution;i.shadowColor=jt.shared.setValue(w).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=A,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*M,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*M+E}else i.fillStyle=this._generateFillStyle(e,a,n),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let _=(l-c.fontSize)/2;l-c.fontSize<0&&(_=0);for(let w=0;w<a.length;w++)f=e.strokeThickness/2,p=e.strokeThickness/2+w*l+c.ascent+_,e.align==="right"?f+=h-u[w]:e.align==="center"&&(f+=(h-u[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[w],f+e.padding,p+e.padding-v,!0),e.fill&&this.drawLetterSpacing(a[w],f+e.padding,p+e.padding-v)}this.updateTexture()}drawLetterSpacing(t,e,i,n=!1){const s=this._style.letterSpacing;let o=!1;if(Un.experimentalLetterSpacingSupported&&(Un.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let a=e;const l=Un.graphemeSegmenter(t);let u=this.context.measureText(t).width,h=0;for(let c=0;c<l.length;++c){const f=l[c];n?this.context.strokeText(f,a,i):this.context.fillText(f,a,i);let p="";for(let m=c+1;m<l.length;++m)p+=l[m];h=this.context.measureText(p).width,a+=u-h+s,u=h}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=vR(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,i=this._style,n=i.trim?0:i.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,h=n.slice(),c=t.fillGradientStops.slice();if(!c.length){const f=h.length+1;for(let p=1;p<f;++p)c.push(p/f)}if(h.unshift(n[0]),c.unshift(0),h.push(n[n.length-1]),c.push(1),t.fillGradientType===uf.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const f=i.fontProperties.fontSize+t.strokeThickness;for(let p=0;p<e.length;p++){const m=i.lineHeight*(p-1)+f,x=i.lineHeight*p;let T=x;p>0&&m>x&&(T=(x+m)/2);const v=x+f,E=i.lineHeight*(p+1);let _=v;p+1<e.length&&E<v&&(_=(v+E)/2);const w=(_-T)/u;for(let A=0;A<h.length;A++){let M=0;typeof c[A]=="number"?M=c[A]:M=A/h.length;let I=Math.min(1,Math.max(0,T/u+M*w));I=Number(I.toFixed(5)),s.addColorStop(I,h[A])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const f=h.length+1;let p=1;for(let m=0;m<h.length;m++){let x;typeof c[m]=="number"?x=c[m]:x=p/f,s.addColorStop(x,h[m]),p++}}return s}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Q2,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Vn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Vn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof $i?this._style=t:this._style=new $i(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};kw.defaultAutoResolution=!0;let ev=kw;class J2{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function tL(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof Pt){const s=r._textures[n].baseTexture;t.includes(s)||(t.push(s),e=!0)}}return e}function eL(r,t){if(r.baseTexture instanceof mt){const e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function rL(r,t){if(r._texture&&r._texture instanceof Pt){const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function iL(r,t){return t instanceof ev?(t.updateText(!0),!0):!1}function nL(r,t){if(t instanceof $i){const e=t.toFontString();return Un.measureFont(e),!0}return!1}function sL(r,t){if(r instanceof ev){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function oL(r,t){return r instanceof $i?(t.includes(r)||t.push(r),!0):!1}const Dw=class Uw{constructor(t){this.limiter=new J2(Uw.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(sL),this.registerFindHook(oL),this.registerFindHook(tL),this.registerFindHook(eL),this.registerFindHook(rL),this.registerUploadHook(iL),this.registerUploadHook(nL)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,ur.system.addOnce(this.tick,this,yo.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)ur.system.addOnce(this.tick,this,yo.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof br)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&ur.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Dw.uploadsPerFrame=4;let Rg=Dw;Object.defineProperties(Z,{UPLOADS_PER_FRAME:{get(){return Rg.uploadsPerFrame},set(r){bt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Rg.uploadsPerFrame=r}}});function Gw(r,t){return t instanceof mt?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function aL(r,t){if(!(t instanceof lh))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let n=0;n<i.length;n++){const{texture:s}=i[n].style;s&&Gw(r,s.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function lL(r,t){return r instanceof lh?(t.push(r),!0):!1}class Hw extends Rg{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(lL),this.registerUploadHook(Gw),this.registerUploadHook(aL)}}Hw.extension={name:"prepare",type:V.RendererSystem};rt.add(Hw);var uL=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,hL=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,cL=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,ex=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,dL=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Qh=new he;class $w extends of{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new VT,this.state=fs.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=is.from(ex,dL,e),this.shader=t.context.webGLVersion>1?is.from(hL,uL,e):is.from(ex,cL,e)}render(t){const e=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,h=t.tileTransform.localTransform,c=t.uvMatrix;let f=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;f&&(l._glTextures[e.CONTEXT_UID]?f=l.wrapMode!==rs.CLAMP:l.wrapMode===rs.CLAMP&&(l.wrapMode=rs.REPEAT));const p=f?this.simpleShader:this.shader,m=a.width,x=a.height,T=t._width,v=t._height;Qh.set(h.a*m/T,h.b*m/v,h.c*x/T,h.d*x/v,h.tx/T,h.ty/v),Qh.invert(),f?Qh.prepend(c.mapCoord):(p.uniforms.uMapCoord=c.mapCoord.toArray(!0),p.uniforms.uClampFrame=c.uClampFrame,p.uniforms.uClampOffset=c.uClampOffset),p.uniforms.uTransform=Qh.toArray(!0),p.uniforms.uColor=jt.shared.setValue(t.tint).premultiply(t.worldAlpha,u).toArray(p.uniforms.uColor),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=a,e.shader.bind(p),e.geometry.bind(i),this.state.blendMode=AT(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}$w.extension={name:"tilingSprite",type:V.RendererPlugin};rt.add($w);const Xw=class ou{constructor(t,e,i){this.linkedSheets=[],(t instanceof mt||t instanceof Pt)&&(t={texture:t,data:e,resolutionFilename:i});const{texture:n,data:s,resolutionFilename:o=null,cachePrefix:a=""}=t;this.cachePrefix=a,this._texture=n instanceof Pt?n:null,this.baseTexture=n instanceof mt?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let i=xn(t,null);return i===null&&(i=typeof e=="number"?e:parseFloat(e??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ou.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=ou.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const n=this._frameKeys[e],s=this._frames[n],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new Et(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new Et(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Et(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Et(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Pt(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),Pt.addToCache(this.textures[n],this.cachePrefix+n.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const n=t[e][i];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ou.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ou.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Xw.BATCH_SIZE=1e3;let rx=Xw;const fL=["jpg","png","jpeg","avif","webp"];function zw(r,t,e){const i={};if(r.forEach(n=>{i[n]=t}),Object.keys(t.textures).forEach(n=>{i[`${t.cachePrefix}${n}`]=t.textures[n]}),!e){const n=Ee.dirname(r[0]);t.linkedSheets.forEach((s,o)=>{Object.assign(i,zw([`${n}/${t.data.meta.related_multi_packs[o]}`],s,!0))})}return i}const pL={extension:V.Asset,cache:{test:r=>r instanceof rx,getCacheableAssets:(r,t)=>zw(r,t,!1)},resolver:{test:r=>{const t=r.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&fL.includes(i)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=Z.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:V.LoadParser,priority:yi.Normal},async testParse(r,t){return Ee.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var h,c;const{texture:i,imageFilename:n,cachePrefix:s}=(t==null?void 0:t.data)??{};let o=Ee.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const f=Sg(o+(n??r.meta.image),t.src);a=(await e.load([f]))[f]}const l=new rx({texture:a.baseTexture,data:r,resolutionFilename:t.src,cachePrefix:s});await l.parse();const u=(h=r==null?void 0:r.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const f=[];for(const m of u){if(typeof m!="string")continue;let x=o+m;(c=t.data)!=null&&c.ignoreMultiPack||(x=Sg(x,t.src),f.push(e.load({src:x,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(f);l.linkedSheets=p,p.forEach(m=>{m.linkedSheets=[l].concat(l.linkedSheets.filter(x=>x!==m))})}return l},unload(r){r.destroy(!0)}}};rt.add(pL);class Td{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Rc{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const o=e[s].match(/^[a-z]+/gm)[0],a=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],f=h[1].replace(/"/gm,""),p=parseFloat(f),m=isNaN(p)?f:p;l[c]=m}i[o].push(l)}const n=new Td;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class Og{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new Td,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<n.length;u++)e.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)e.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e}}class Mg{static test(t){return typeof t=="string"&&t.includes("<font>")?Og.test(Z.ADAPTER.parseXML(t)):!1}static parse(t){return Og.parse(Z.ADAPTER.parseXML(t))}}const Ep=[Rc,Og,Mg];function mL(r){for(let t=0;t<Ep.length;t++)if(Ep[t].test(r))return Ep[t];return null}function gL(r,t,e,i,n,s){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,h=r.width/i-l-u*2,c=r.height/i-l-u*2,f=o.slice(),p=e.fillGradientStops.slice();if(!p.length){const m=f.length+1;for(let x=1;x<m;++x)p.push(x/m)}if(f.unshift(o[0]),p.unshift(0),f.push(o[o.length-1]),p.push(1),e.fillGradientType===uf.LINEAR_VERTICAL){a=t.createLinearGradient(h/2,u,h/2,c+u);let m=0;const x=(s.fontProperties.fontSize+e.strokeThickness)/c;for(let T=0;T<n.length;T++){const v=s.lineHeight*T;for(let E=0;E<f.length;E++){let _=0;typeof p[E]=="number"?_=p[E]:_=E/f.length;const w=v/c+_*x;let A=Math.max(m,w);A=Math.min(A,1),a.addColorStop(A,f[E]),m=A}}}else{a=t.createLinearGradient(u,c/2,h+u,c/2);const m=f.length+1;let x=1;for(let T=0;T<f.length;T++){let v;typeof p[T]=="number"?v=p[T]:v=x/m,a.addColorStop(v,f[T]),x++}}return a}function yL(r,t,e,i,n,s,o){const a=e.text,l=e.fontProperties;t.translate(i,n),t.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=gL(r,t,o,s,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,f=o.dropShadowBlur*s,p=o.dropShadowDistance*s;t.shadowColor=jt.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,h+e.lineHeight-l.descent),o.fill&&t.fillText(a,u,h+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Oc(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function jw(r){return Array.from?Array.from(r):r.split("")}function vL(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...jw(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Fn=class Ri{constructor(t,e,i){var h;const[n]=t.info,[s]=t.common,[o]=t.page,[a]=t.distanceField,l=xn(o.file),u={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<t.page.length;c++){const{id:f,file:p}=t.page[c];u[f]=e instanceof Array?e[c]:e[p],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[f].baseTexture.alphaMode=lr.NO_PREMULTIPLIED_ALPHA,u[f].baseTexture.mipmap=Hi.OFF)}for(let c=0;c<t.char.length;c++){const{id:f,page:p}=t.char[c];let{x:m,y:x,width:T,height:v,xoffset:E,yoffset:_,xadvance:w}=t.char[c];m/=l,x/=l,T/=l,v/=l,E/=l,_/=l,w/=l;const A=new Et(m+u[p].frame.x/l,x+u[p].frame.y/l,T,v);this.chars[f]={xOffset:E,yOffset:_,xAdvance:w,kerning:{},texture:new Pt(u[p].baseTexture,A),page:p}}for(let c=0;c<t.kerning.length;c++){let{first:f,second:p,amount:m}=t.kerning[c];f/=l,p/=l,m/=l,this.chars[p]&&(this.chars[p].kerning[f]=m)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let n;if(t instanceof Td)n=t;else{const o=mL(t);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(t)}e instanceof Pt&&(e=[e]);const s=new Ri(n,e,i);return Ri.available[s.font]=s,s}static uninstall(t){const e=Ri.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Ri.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},Ri.defaultOptions,i),h=vL(n),c=e instanceof $i?e:new $i(e),f=a,p=new Td;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};let m=0,x=0,T,v,E,_=0;const w=[];for(let M=0;M<h.length;M++){T||(T=Z.ADAPTER.createCanvas(),T.width=a,T.height=l,v=T.getContext("2d"),E=new mt(T,{resolution:o,...u}),w.push(new Pt(E)),p.page.push({id:w.length-1,file:""}));const I=h[M],P=Un.measureText(I,c,!1,T),U=P.width,B=Math.ceil(P.height),st=Math.ceil((c.fontStyle==="italic"?2:1)*U);if(x>=l-B*o){if(x===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${I}')`);--M,T=null,v=null,E=null,x=0,m=0,_=0;continue}if(_=Math.max(B+P.fontProperties.descent,_),st*o+m>=f){if(m===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${I}')`);--M,x+=_*o,x=Math.ceil(x),m=0,_=0;continue}yL(T,v,P,m,x,o,c);const X=Oc(P.text);p.char.push({id:X,page:w.length-1,x:m/o,y:x/o,width:st,height:B,xoffset:0,yoffset:0,xadvance:U-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),m+=(st+2*s)*o,m=Math.ceil(m)}if(!(i!=null&&i.skipKerning))for(let M=0,I=h.length;M<I;M++){const P=h[M];for(let U=0;U<I;U++){const B=h[U],st=v.measureText(P).width,X=v.measureText(B).width,O=v.measureText(P+B).width-(st+X);O&&p.kerning.push({first:Oc(P),second:Oc(B),amount:O})}}const A=new Ri(p,w,!0);return Ri.available[t]!==void 0&&Ri.uninstall(t),Ri.available[t]=A,A}};Fn.ALPHA=[["a","z"],["A","Z"]," "],Fn.NUMERIC=[["0","9"]],Fn.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Fn.ASCII=[[" ","~"]],Fn.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Fn.ALPHANUMERIC},Fn.available={};let Nn=Fn;var _L=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,xL=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ix=[],nx=[],sx=[],EL=class Vw extends br{constructor(t,e={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},Vw.styleDefaults,e);if(!Nn.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new jt(n),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Js(()=>{this.dirty=!0},this,0,0),this._roundPixels=Z.ROUND_PIXELS,this.dirty=!0,this._resolution=Z.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var st;const t=Nn.available[this._fontName],e=this.fontSize,i=e/t.size,n=new Lt,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=jw(l),h=this._maxWidth*t.size/e,c=t.distanceFieldType==="none"?ix:nx;let f=null,p=0,m=0,x=0,T=-1,v=0,E=0,_=0,w=0;for(let X=0;X<u.length;X++){const O=u[X],G=Oc(O);if(/(?:\s)/.test(O)&&(T=X,v=p,w++),O==="\r"||O===`
`){o.push(p),a.push(-1),m=Math.max(m,p),++x,++E,n.x=0,n.y+=t.lineHeight,f=null,w=0;continue}const tt=t.chars[G];if(!tt)continue;f&&tt.kerning[f]&&(n.x+=tt.kerning[f]);const at=sx.pop()||{texture:Pt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Lt};at.texture=tt.texture,at.line=x,at.charCode=G,at.position.x=Math.round(n.x+tt.xOffset+this._letterSpacing/2),at.position.y=Math.round(n.y+tt.yOffset),at.prevSpaces=w,s.push(at),p=at.position.x+Math.max(tt.xAdvance-tt.xOffset,tt.texture.orig.width),n.x+=tt.xAdvance+this._letterSpacing,_=Math.max(_,tt.yOffset+tt.texture.height),f=G,T!==-1&&h>0&&n.x>h&&(++E,ma(s,1+T-E,1+X-T),X=T,T=-1,o.push(v),a.push(s.length>0?s[s.length-1].prevSpaces:0),m=Math.max(m,v),x++,n.x=0,n.y+=t.lineHeight,f=null,w=0)}const A=u[u.length-1];A!=="\r"&&A!==`
`&&(/(?:\s)/.test(A)&&(p=v),o.push(p),m=Math.max(m,p),a.push(-1));const M=[];for(let X=0;X<=x;X++){let O=0;this._align==="right"?O=m-o[X]:this._align==="center"?O=(m-o[X])/2:this._align==="justify"&&(O=a[X]<0?0:(m-o[X])/a[X]),M.push(O)}const I=s.length,P={},U=[],B=this._activePagesMeshData;c.push(...B);for(let X=0;X<I;X++){const O=s[X].texture,G=O.baseTexture.uid;if(!P[G]){let tt=c.pop();if(!tt){const et=new j2;let N,Q;t.distanceFieldType==="none"?(N=new J0(Pt.EMPTY),Q=ht.NORMAL):(N=new J0(Pt.EMPTY,{program:cn.from(xL,_L),uniforms:{uFWidth:0}}),Q=ht.NORMAL_NPM);const L=new Q0(et,N);L.blendMode=Q,tt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:L,vertices:null,uvs:null,indices:null}}tt.index=0,tt.indexCount=0,tt.vertexCount=0,tt.uvsCount=0,tt.total=0;const{_textureCache:at}=this;at[G]=at[G]||new Pt(O.baseTexture),tt.mesh.texture=at[G],tt.mesh.tint=this._tintColor.value,U.push(tt),P[G]=tt}P[G].total++}for(let X=0;X<B.length;X++)U.includes(B[X])||this.removeChild(B[X].mesh);for(let X=0;X<U.length;X++)U[X].mesh.parent!==this&&this.addChild(U[X].mesh);this._activePagesMeshData=U;for(const X in P){const O=P[X],G=O.total;if(!(((st=O.indices)==null?void 0:st.length)>6*G)||O.vertices.length<Q0.BATCHABLE_SIZE*2)O.vertices=new Float32Array(4*2*G),O.uvs=new Float32Array(4*2*G),O.indices=new Uint16Array(6*G);else{const tt=O.total,at=O.vertices;for(let et=tt*4*2;et<at.length;et++)at[et]=0}O.mesh.size=6*G}for(let X=0;X<I;X++){const O=s[X];let G=O.position.x+M[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(G=Math.round(G));const tt=G*i,at=O.position.y*i,et=O.texture,N=P[et.baseTexture.uid],Q=et.frame,L=et._uvs,D=N.index++;N.indices[D*6+0]=0+D*4,N.indices[D*6+1]=1+D*4,N.indices[D*6+2]=2+D*4,N.indices[D*6+3]=0+D*4,N.indices[D*6+4]=2+D*4,N.indices[D*6+5]=3+D*4,N.vertices[D*8+0]=tt,N.vertices[D*8+1]=at,N.vertices[D*8+2]=tt+Q.width*i,N.vertices[D*8+3]=at,N.vertices[D*8+4]=tt+Q.width*i,N.vertices[D*8+5]=at+Q.height*i,N.vertices[D*8+6]=tt,N.vertices[D*8+7]=at+Q.height*i,N.uvs[D*8+0]=L.x0,N.uvs[D*8+1]=L.y0,N.uvs[D*8+2]=L.x1,N.uvs[D*8+3]=L.y1,N.uvs[D*8+4]=L.x2,N.uvs[D*8+5]=L.y2,N.uvs[D*8+6]=L.x3,N.uvs[D*8+7]=L.y3}this._textWidth=m*i,this._textHeight=(n.y+t.lineHeight)*i;for(const X in P){const O=P[X];if(this.anchor.x!==0||this.anchor.y!==0){let et=0;const N=this._textWidth*this.anchor.x,Q=this._textHeight*this.anchor.y;for(let L=0;L<O.total;L++)O.vertices[et++]-=N,O.vertices[et++]-=Q,O.vertices[et++]-=N,O.vertices[et++]-=Q,O.vertices[et++]-=N,O.vertices[et++]-=Q,O.vertices[et++]-=N,O.vertices[et++]-=Q}this._maxLineHeight=_*i;const G=O.mesh.geometry.getBuffer("aVertexPosition"),tt=O.mesh.geometry.getBuffer("aTextureCoord"),at=O.mesh.geometry.getIndex();G.data=O.vertices,tt.data=O.uvs,at.data=O.indices,G.update(),tt.update(),at.update()}for(let X=0;X<s.length;X++)sx.push(s[X]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:n}=Nn.available[this._fontName];if(i!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),c=(Math.abs(u)+Math.abs(h))/2,f=this.fontSize/n,p=t._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=c*e*f*p}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Nn.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Nn.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Nn.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=Nn.available[this._fontName].distanceFieldType==="none"?ix:nx;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>e[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=Pt.EMPTY});for(const n in e)e[n].destroy(),delete e[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};EL.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const TL=[".xml",".fnt"],wL={extension:{type:V.LoadParser,priority:yi.Normal},name:"loadBitmapFont",test(r){return TL.includes(Ee.extname(r).toLowerCase())},async testParse(r){return Rc.test(r)||Mg.test(r)},async parse(r,t,e){const i=Rc.test(r)?Rc.parse(r):Mg.parse(r),{src:n}=t,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=Ee.join(Ee.dirname(n),h);c=Sg(c,n),o.push(c)}const a=await e.load(o),l=o.map(u=>a[u]);return Nn.install(i,l,!0)},async load(r,t){return(await Z.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};rt.add(wL);const Lg=class zo extends $i{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new zo(Object.keys(zo.defaultOptions).reduce((e,i)=>({...e,[i]:t[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete zo.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:i}=zo;if(i[t]){const n=i[t];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Z.ADAPTER.fetch(t).then(n=>n.blob()).then(async n=>new Promise((s,o)=>{const a=URL.createObjectURL(n),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(n)})).then(async([n,s])=>{const o=Object.assign({family:Ee.basename(t,Ee.extname(t)),weight:"normal",style:"normal",display:"auto",src:n,dataSrc:s,refs:1,originalUrl:t,fontFace:null},e);i[t]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(i=>!this._overrides.includes(i));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(i=>this._overrides.includes(i));e.length>0&&(this._overrides=this._overrides.filter(i=>!e.includes(i)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=dR(t)),typeof t=="number"?cR(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const s=`${i}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${s} ${t}`}reset(){Object.assign(this,zo.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=Z.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Lg.availableFonts={},Lg.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Tp=Lg;const Jh=class jo extends Eo{constructor(t="",e={}){super(Pt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,n=Pt.from(i,{scaleMode:Z.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new Et,n.trim=new Et,this.texture=n;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=jo.defaultMaxWidth,this.maxHeight=jo.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=jo.defaultAutoResolution,this._resolution=jo.defaultResolution??Z.RESOLUTION,this.text=t,this.style=e}measureText(t){var h,c;const{text:e,style:i,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:i.toCSS(n)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(n)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(t=!0){const{style:e,_image:i,_loadImage:n}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:s,height:o}=this.measureText();i.width=n.width=Math.ceil(Math.max(1,s)),i.height=n.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{n.onload=async()=>{if(a<this._updateID){l();return}await e.onBeforeDraw(),i.src=n.src,n.onload=null,n.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:i,resolution:n}=this,{padding:s}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=i.width/n,e.trim.height=e._frame.height=i.height/n,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,n),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var i,n,s,o,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},jo.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=e,(n=this._svgRoot)==null||n.remove(),this._svgRoot=e,(s=this._domElement)==null||s.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(a=this._styleElement)==null||a.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Vn(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Vn(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof Tp?(this.ownsStyle=!1,this._style=t):t instanceof $i?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Tp.from(t)):(this.ownsStyle=!0,this._style=new Tp(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Jh.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Jh.defaultMaxWidth=2024,Jh.defaultMaxHeight=2024,Jh.defaultAutoResolution=!0;const bL=[{alias:"corner_block",src:"assets/corner_block.png"},{alias:"straight_block",src:"assets/straight_block.png"}],SL=[{alias:"block_success",src:"assets/sounds/block_success.mp3"}];var AL=(r,t={})=>{if(!r)return;const e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=e.parser[t.strictMode?"strict":"loose"].exec(r),n={};let s=14;for(;s--;)n[e.key[s]]=i[s]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(o,a,l){a&&(n[e.q.name][a]=l)}),n};const Ww=ls(AL);class tc{constructor(t,e=!1,i){this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function ox(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}class on{constructor(){this._head=this._tail=void 0}handlers(t=!1){let e=this._head;if(t)return!!e;const i=[];for(;e;)i.push(e),e=e._next;return i}has(t){if(!(t instanceof tc))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}dispatch(){let t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}add(t,e=null){if(typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return ox(this,new tc(t,!1,e))}once(t,e=null){if(typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return ox(this,new tc(t,!0,e))}detach(t){if(!(t instanceof tc))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}detachAll(){let t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function Ms(){}function ax(r,t,e,i){var n=0,s=r.length;(function o(a){if(a||n===s){e&&e(a);return}i?setTimeout(function(){t(r[n++],o)},1):t(r[n++],o)})()}function CL(r){return function(){if(r===null)throw new Error("Callback was already called.");var e=r;r=null,e.apply(this,arguments)}}function PL(r,t){if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var e=0,i={_tasks:[],concurrency:t,saturated:Ms,unsaturated:Ms,buffer:t/4,empty:Ms,drain:Ms,error:Ms,started:!1,paused:!1,push:function(a,l){n(a,!1,l)},kill:function(){e=0,i.drain=Ms,i.started=!1,i._tasks=[]},unshift:function(a,l){n(a,!0,l)},process:function(){for(;!i.paused&&e<i.concurrency&&i._tasks.length;){var a=i._tasks.shift();i._tasks.length===0&&i.empty(),e+=1,e===i.concurrency&&i.saturated(),r(a.data,CL(s(a)))}},length:function(){return i._tasks.length},running:function(){return e},idle:function(){return i._tasks.length+e===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var a=1;a<=i.concurrency;a++)i.process()}}};function n(o,a,l){if(l!=null&&typeof l!="function")throw new Error("task callback must be a function");if(i.started=!0,o==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var u={data:o,callback:typeof l=="function"?l:Ms};a?i._tasks.unshift(u):i._tasks.push(u),setTimeout(function(){return i.process()},1)}function s(o){return function(){e-=1,o.callback.apply(o,arguments),arguments[0]!=null&&i.error(arguments[0],o.data),e<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var wp={};function IL(r,t){var e=this;wp[r.url]?(r.data=wp[r.url],r.complete()):r.onComplete.once(function(){return wp[e.url]=e.data}),t()}function lx(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function Yw(r,t,e){return t&&lx(r.prototype,t),e&&lx(r,e),r}var RL=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),ec=null,OL=0,ux=200,ML=204,LL=1223,FL=2;function NL(){}var ct=function(){r.setExtensionLoadType=function(i,n){hx(r._loadTypeMap,i,n)},r.setExtensionXhrType=function(i,n){hx(r._xhrTypeMap,i,n)};function r(e,i,n){if(typeof e!="string"||typeof i!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,i.indexOf("data:")===0),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=NL,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new on,this.onProgress=new on,this.onComplete=new on,this.onAfterMiddleware=new on}var t=r.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(i){var n=this;if(!this.isLoading){if(this.isComplete){i&&setTimeout(function(){return i(n)},1);return}else i&&this.onComplete.once(i);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:RL&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t._hasFlag=function(i){return(this._flags&i)!==0},t._setFlag=function(i,n){this._flags=n?this._flags|i:this._flags&~i},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(i){this.metadata.loadElement?this.data=this.metadata.loadElement:i==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:i==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(i),this.data===null){this.abort("Unsupported element: "+i);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,s=0;s<this.url.length;++s)this.data.appendChild(this._createSource(i,this.url[s],Array.isArray(n)?n[s]:n));else{var o=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(o)?o[0]:o))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=r.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},t._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout(function(){return i.send()},1)},t._createSource=function(i,n,s){s||(s=i+"/"+this._getExtension(n));var o=document.createElement("source");return o.src=n,o.type=s,o},t._onError=function(i){this.abort("Failed to load element using: "+i.target.nodeName)},t._onProgress=function(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var i=this.xhr;this.abort(bp(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},t._xhrOnTimeout=function(){var i=this.xhr;this.abort(bp(i)+" Request timed out.")},t._xhrOnAbort=function(){var i=this.xhr;this.abort(bp(i)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var i=this.xhr,n="",s=typeof i.status>"u"?ux:i.status;(i.responseType===""||i.responseType==="text"||typeof i.responseType>"u")&&(n=i.responseText),s===OL&&(n.length>0||i.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?s=ux:s===LL&&(s=ML);var o=s/100|0;if(o===FL)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=r.TYPE.JSON}catch(u){this.abort("Error trying to parse loaded json: "+u);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(n,"text/xml")}else{var l=document.createElement("div");l.innerHTML=n,this.data=l}this.type=r.TYPE.XML}catch(u){this.abort("Error trying to parse loaded xml: "+u);return}else this.data=i.response||n;else{this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);return}this.complete()},t._determineCrossOrigin=function(i,n){if(i.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,ec||(ec=document.createElement("a")),ec.href=i,i=Ww(ec.href,{strictMode:!0});var s=!i.port&&n.port===""||i.port===n.port,o=i.protocol?i.protocol+":":"";return i.host!==n.hostname||!s||o!==n.protocol?"anonymous":""},t._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},t._getExtension=function(){var i=this.url,n="";if(this.isDataUrl){var s=i.indexOf("/");n=i.substring(s+1,i.indexOf(";",s))}else{var o=i.indexOf("?"),a=i.indexOf("#"),l=Math.min(o>-1?o:i.length,a>-1?a:i.length);i=i.substring(0,l),n=i.substring(i.lastIndexOf(".")+1)}return n.toLowerCase()},t._getMimeFromXhrType=function(i){switch(i){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Yw(r,[{key:"isDataUrl",get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)}}]),r}();ct.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};ct.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};ct.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};ct.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};ct._loadTypeMap={gif:ct.LOAD_TYPE.IMAGE,png:ct.LOAD_TYPE.IMAGE,bmp:ct.LOAD_TYPE.IMAGE,jpg:ct.LOAD_TYPE.IMAGE,jpeg:ct.LOAD_TYPE.IMAGE,tif:ct.LOAD_TYPE.IMAGE,tiff:ct.LOAD_TYPE.IMAGE,webp:ct.LOAD_TYPE.IMAGE,tga:ct.LOAD_TYPE.IMAGE,svg:ct.LOAD_TYPE.IMAGE,"svg+xml":ct.LOAD_TYPE.IMAGE,mp3:ct.LOAD_TYPE.AUDIO,ogg:ct.LOAD_TYPE.AUDIO,wav:ct.LOAD_TYPE.AUDIO,mp4:ct.LOAD_TYPE.VIDEO,webm:ct.LOAD_TYPE.VIDEO};ct._xhrTypeMap={xhtml:ct.XHR_RESPONSE_TYPE.DOCUMENT,html:ct.XHR_RESPONSE_TYPE.DOCUMENT,htm:ct.XHR_RESPONSE_TYPE.DOCUMENT,xml:ct.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ct.XHR_RESPONSE_TYPE.DOCUMENT,svg:ct.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ct.XHR_RESPONSE_TYPE.DOCUMENT,gif:ct.XHR_RESPONSE_TYPE.BLOB,png:ct.XHR_RESPONSE_TYPE.BLOB,bmp:ct.XHR_RESPONSE_TYPE.BLOB,jpg:ct.XHR_RESPONSE_TYPE.BLOB,jpeg:ct.XHR_RESPONSE_TYPE.BLOB,tif:ct.XHR_RESPONSE_TYPE.BLOB,tiff:ct.XHR_RESPONSE_TYPE.BLOB,webp:ct.XHR_RESPONSE_TYPE.BLOB,tga:ct.XHR_RESPONSE_TYPE.BLOB,json:ct.XHR_RESPONSE_TYPE.JSON,text:ct.XHR_RESPONSE_TYPE.TEXT,txt:ct.XHR_RESPONSE_TYPE.TEXT,ttf:ct.XHR_RESPONSE_TYPE.BUFFER,otf:ct.XHR_RESPONSE_TYPE.BUFFER};ct.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function hx(r,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(r[t]=e)}function bp(r){return r.toString().replace("object ","")}var BL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kL(r){for(var t="",e=0;e<r.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)e<r.length?i[s]=r.charCodeAt(e++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var o=e-(r.length-1);switch(o){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var a=0;a<n.length;++a)t+=BL.charAt(n[a])}return t}var cx=window.URL||window.webkitURL;function DL(r,t){if(!r.data){t();return}if(r.xhr&&r.xhrType===ct.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof r.data=="string"){var e=r.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){r.data=new Image,r.data.src="data:"+e+";base64,"+kL(r.xhr.responseText),r.type=ct.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,t()};return}}else if(r.data.type.indexOf("image")===0){var i=cx.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=i,r.type=ct.TYPE.IMAGE,r.data.onload=function(){cx.revokeObjectURL(i),r.data.onload=null,t()};return}}t()}var UL={caching:IL,parsing:DL},Sp=100,GL=/(#[\w-]+)?$/,mn=function(){function r(e,i){var n=this;e===void 0&&(e=""),i===void 0&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,l){return n._loadResource(a,l)},this._queue=PL(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new on,this.onError=new on,this.onLoad=new on,this.onStart=new on,this.onComplete=new on;for(var s=0;s<r._defaultBeforeMiddleware.length;++s)this.pre(r._defaultBeforeMiddleware[s]);for(var o=0;o<r._defaultAfterMiddleware.length;++o)this.use(r._defaultAfterMiddleware[o])}var t=r.prototype;return t.add=function(i,n,s,o){if(Array.isArray(i)){for(var a=0;a<i.length;++a)this.add(i[a]);return this}if(typeof i=="object"&&(o=n||i.callback||i.onComplete,s=i,n=i.url,i=i.name||i.key||i.url),typeof n!="string"&&(o=s,s=n,n=i),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof s=="function"&&(o=s,s=null),this.loading&&(!s||!s.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(n=this._prepareUrl(n),this.resources[i]=new ct(i,n,s),typeof o=="function"&&this.resources[i].onAfterMiddleware.once(o),this.loading){for(var l=s.parentResource,u=[],h=0;h<l.children.length;++h)l.children[h].isComplete||u.push(l.children[h]);var c=l.progressChunk*(u.length+1),f=c/(u.length+2);l.children.push(this.resources[i]),l.progressChunk=f;for(var p=0;p<u.length;++p)u[p].progressChunk=f;this.resources[i].progressChunk=f}return this._queue.push(this.resources[i]),this},t.pre=function(i){return this._beforeMiddleware.push(i),this},t.use=function(i){return this._afterMiddleware.push(i),this},t.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var i in this.resources){var n=this.resources[i];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},t.load=function(i){if(typeof i=="function"&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,s=Sp/n,o=0;o<this._queue._tasks.length;++o)this._queue._tasks[o].data.progressChunk=s;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(i){var n=Ww(i,{strictMode:!0}),s;if(n.protocol||!n.path||i.indexOf("//")===0?s=i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?s=this.baseUrl+"/"+i:s=this.baseUrl+i,this.defaultQueryString){var o=GL.exec(s)[0];s=s.substr(0,s.length-o.length),s.indexOf("?")!==-1?s+="&"+this.defaultQueryString:s+="?"+this.defaultQueryString,s+=o}return s},t._loadResource=function(i,n){var s=this;i._dequeue=n,ax(this._beforeMiddleware,function(o,a){o.call(s,i,function(){a(i.isComplete?{}:null)})},function(){i.isComplete?s._onLoad(i):(i._onLoadBinding=i.onComplete.once(s._onLoad,s),i.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=Sp,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(i){var n=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),ax(this._afterMiddleware,function(s,o){s.call(n,i,o)},function(){i.onAfterMiddleware.dispatch(i),n.progress=Math.min(Sp,n.progress+i.progressChunk),n.onProgress.dispatch(n,i),i.error?n.onError.dispatch(i.error,n,i):n.onLoad.dispatch(n,i),n._resourcesParsing.splice(n._resourcesParsing.indexOf(i),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},Yw(r,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(i){this._queue.concurrency=i}}]),r}();mn._defaultBeforeMiddleware=[];mn._defaultAfterMiddleware=[];mn.pre=function(t){return mn._defaultBeforeMiddleware.push(t),mn};mn.use=function(t){return mn._defaultAfterMiddleware.push(t),mn};/*!
 * @pixi/settings - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var to=Bm(window.navigator);function HL(r){var t=!0;if(to.tablet||to.phone){if(to.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var i=parseInt(e[1],10);i<11&&(t=!1)}}if(to.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var i=parseInt(e[1],10);i<7&&(t=!1)}}}return t?r:4}function $L(){return!to.apple.device}var xt={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:HL(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:to.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:$L(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/constants - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Tn;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Tn||(Tn={}));var $u;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})($u||($u={}));var wd;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(wd||(wd={}));var ft;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(ft||(ft={}));var Xu;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Xu||(Xu={}));var zu;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(zu||(zu={}));var lo;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(lo||(lo={}));var ci;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(ci||(ci={}));var dn;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(dn||(dn={}));var Fg;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Fg||(Fg={}));var ju;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"})(ju||(ju={}));var os;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(os||(os={}));var Mi;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Mi||(Mi={}));var Ng;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Ng||(Ng={}));var ki;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(ki||(ki={}));var vr;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(vr||(vr={}));var La;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(La||(La={}));var Kw={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new n(h,c||l,f),m=e?e+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)t.call(h,c)&&u.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=e?e+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,p=c.length,m=new Array(p);f<p;f++)m[f]=c[f].fn;return m},a.prototype.listenerCount=function(u){var h=e?e+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,f,p,m){var x=e?e+u:u;if(!this._events[x])return!1;var T=this._events[x],v=arguments.length,E,_;if(T.fn){switch(T.once&&this.removeListener(u,T.fn,void 0,!0),v){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,h),!0;case 3:return T.fn.call(T.context,h,c),!0;case 4:return T.fn.call(T.context,h,c,f),!0;case 5:return T.fn.call(T.context,h,c,f,p),!0;case 6:return T.fn.call(T.context,h,c,f,p,m),!0}for(_=1,E=new Array(v-1);_<v;_++)E[_-1]=arguments[_];T.fn.apply(T.context,E)}else{var w=T.length,A;for(_=0;_<w;_++)switch(T[_].once&&this.removeListener(u,T[_].fn,void 0,!0),v){case 1:T[_].fn.call(T[_].context);break;case 2:T[_].fn.call(T[_].context,h);break;case 3:T[_].fn.call(T[_].context,h,c);break;case 4:T[_].fn.call(T[_].context,h,c,f);break;default:if(!E)for(A=1,E=new Array(v-1);A<v;A++)E[A-1]=arguments[A];T[_].fn.apply(T[_].context,E)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,f){var p=e?e+u:u;if(!this._events[p])return this;if(!h)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===h&&(!f||m.once)&&(!c||m.context===c)&&o(this,p);else{for(var x=0,T=[],v=m.length;x<v;x++)(m[x].fn!==h||f&&!m[x].once||c&&m[x].context!==c)&&T.push(m[x]);T.length?this._events[p]=T.length===1?T[0]:T:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Kw);var XL=Kw.exports;const ms=ls(XL);/*!
 * @pixi/utils - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */xt.RETINA_PREFIX=/@([0-9\.]+)x/;xt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var dx=!1,fx="5.3.12";function zL(r){var t;if(!dx){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+fx+" -  "+r+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,e)}else window.console&&window.console.log("PixiJS "+fx+" - "+r+" - http://www.pixijs.com/");dx=!0}}var Ap;function jL(){return typeof Ap>"u"&&(Ap=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:xt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),Ap}function VL(r,t){return t===void 0&&(t=[]),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function WL(r){var t=r.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function YL(){for(var r=[],t=[],e=0;e<32;e++)r[e]=e,t[e]=e;r[ft.NORMAL_NPM]=ft.NORMAL,r[ft.ADD_NPM]=ft.ADD,r[ft.SCREEN_NPM]=ft.SCREEN,t[ft.NORMAL]=ft.NORMAL_NPM,t[ft.ADD]=ft.ADD_NPM,t[ft.SCREEN]=ft.SCREEN_NPM;var i=[];return i.push(t),i.push(r),i}var KL=YL();function qL(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;var e=r>>16&255,i=r>>8&255,n=r&255;return e=e*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(i<<8)+n}function bd(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function px(r){return!(r&r-1)&&!!r}function mx(r){var t=(r>65535?1:0)<<4;r>>>=t;var e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function ZL(r,t,e){var i=r.length,n;if(!(t>=i||e===0)){e=t+e>i?i-t:e;var s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}}var QL=0;function Sd(){return++QL}var gx={};function qw(r,t,e){if(e===void 0&&(e=3),!gx[t]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+r),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r),console.warn(i))),gx[t]=!0}}var yx={},en=Object.create(null),Ls=Object.create(null);(function(){function r(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||xt.RESOLUTION,this.resize(t,e)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),r})();var rc;function JL(r,t){if(t===void 0&&(t=window.location),r.indexOf("data:")===0)return"";t=t||window.location,rc||(rc=document.createElement("a")),rc.href=r;var e=qI(rc.href),i=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!i||e.protocol!==t.protocol?"anonymous":""}function vx(r,t){var e=xt.RETINA_PREFIX.exec(r);return e?parseFloat(e[1]):t!==void 0?t:1}/*!
 * @pixi/runner - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $e=function(){function r(t){this.items=[],this._name=t,this._aliasCount=0}return r.prototype.emit=function(t,e,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,c=u.items;this._aliasCount++;for(var f=0,p=c.length;f<p;f++)c[f][h](t,e,i,n,s,o,a,l);return c===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},r.prototype.contains=function(t){return this.items.indexOf(t)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties($e.prototype,{dispatch:{value:$e.prototype.emit},run:{value:$e.prototype.emit}});/*!
 * @pixi/ticker - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */xt.TARGET_FPMS=.06;var Ad;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(Ad||(Ad={}));var Cp=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),li=function(){function r(){var t=this;this._head=new Cp(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/xt.TARGET_FPMS,this.elapsedMS=1/xt.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=Ad.NORMAL),this._addListener(new Cp(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=Ad.NORMAL),this._addListener(new Cp(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*xt.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,xt.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var tF=Math.PI*2,Bg;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(Bg||(Bg={}));var Sr=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Bg.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r}(),Cd=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r}(),ic=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),gi=function(){function r(t,e,i,n,s,o){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Cd;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Cd;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,o=-Math.atan2(-n,s),a=Math.atan2(i,e),l=Math.abs(o+a);return l<1e-5||Math.abs(tF-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx,t.position.y=this.ty,t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),zs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],js=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Vs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ws=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],kg=[],Zw=[],nc=Math.sign;function eF(){for(var r=0;r<16;r++){var t=[];kg.push(t);for(var e=0;e<16;e++)for(var i=nc(zs[r]*zs[e]+Vs[r]*js[e]),n=nc(js[r]*zs[e]+Ws[r]*js[e]),s=nc(zs[r]*Vs[e]+Vs[r]*Ws[e]),o=nc(js[r]*Vs[e]+Ws[r]*Ws[e]),a=0;a<16;a++)if(zs[a]===i&&js[a]===n&&Vs[a]===s&&Ws[a]===o){t.push(a);break}}for(var r=0;r<16;r++){var l=new gi;l.set(zs[r],js[r],Vs[r],Ws[r],0,0),Zw.push(l)}}eF();var Zt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return zs[r]},uY:function(r){return js[r]},vX:function(r){return Vs[r]},vY:function(r){return Ws[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return kg[r][t]},sub:function(r,t){return kg[r][Zt.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Zt.S:Zt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Zt.E:Zt.W:t>0?r>0?Zt.SE:Zt.SW:r>0?Zt.NE:Zt.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=Zw[Zt.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new gi,this.localTransform=new gi,this.position=new ic(this.onChange,this,0,0),this.scale=new ic(this.onChange,this,1,1),this.pivot=new ic(this.onChange,this,0,0),this.skew=new ic(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */xt.PREFER_ENV=to.any?Tn.WEBGL:Tn.WEBGL2;xt.STRICT_TEXTURE_CACHE=!1;var Dg=[];function Qw(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=Dg.length-1;n>=0;--n){var s=Dg[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ug=function(r,t){return Ug=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Ug(r,t)};function Tt(r,t){Ug(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Vu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new $e("setRealSize"),this.onUpdate=new $e("update"),this.onError=new $e("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),rv=function(r){Tt(t,r);function t(e,i){var n=this,s=i||{},o=s.width,a=s.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return n=r.call(this,o,a)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===os.UNPACK),n.width===i.width&&n.height===i.height?s.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(n.width=i.width,n.height=i.height,s.texImage2D(i.target,0,n.internalFormat,i.width,i.height,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Vu),rF={scaleMode:dn.NEAREST,format:zu.RGBA,alphaMode:os.NPM},ze=function(r){Tt(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,o=i.mipmap,a=i.anisotropicLevel,l=i.scaleMode,u=i.width,h=i.height,c=i.wrapMode,f=i.format,p=i.type,m=i.target,x=i.resolution,T=i.resourceOptions;return e&&!(e instanceof Vu)&&(e=Qw(e,T),e.internal=!0),n.width=u||0,n.height=h||0,n.resolution=x||xt.RESOLUTION,n.mipmap=o!==void 0?o:xt.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:xt.ANISOTROPIC_LEVEL,n.wrapMode=c||xt.WRAP_MODE,n.scaleMode=l!==void 0?l:xt.SCALE_MODE,n.format=f||zu.RGBA,n.type=p||ci.UNSIGNED_BYTE,n.target=m||lo.TEXTURE_2D,n.alphaMode=s!==void 0?s:os.UNPACK,i.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=i.premultiplyAlpha),n.uid=Sd(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&h>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=e,this.height=i,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=i/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=px(this.realWidth)&&px(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=this.width*i/e,this.height=this.height*i/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ls[this.cacheId],delete en[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=xt.STRICT_TEXTURE_CACHE);var s=typeof e=="string",o=null;s?o=e:(e._pixiId||(e._pixiId="pixiid_"+Sd()),o=e._pixiId);var a=Ls[o];if(s&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||(a=new t(e,i),a.cacheId=o,t.addToCache(a,o)),a},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var o=new rv(e,{width:i,height:n}),a=e instanceof Float32Array?ci.FLOAT:ci.UNSIGNED_BYTE;return new t(o,Object.assign(rF,s||{width:i,height:n,type:a}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),Ls[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),Ls[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=Ls[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete Ls[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete Ls[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(ms),Jw=function(r){Tt(t,r);function t(e,i){var n=this,s=i||{},o=s.width,a=s.height;n=r.call(this,o,a)||this,n.items=[],n.itemDirtyIds=[];for(var l=0;l<e;l++){var u=new ze;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Vu?this.addResourceAt(e[n],n):this.addResourceAt(Qw(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],o=s.realWidth,a=s.realHeight;return e.resize(o,a),Promise.resolve(e)}),this._load},t}(Vu),iF=function(r){Tt(t,r);function t(e,i){var n=this,s=i||{},o=s.width,a=s.height,l,u;return Array.isArray(e)?(l=e,u=e.length):u=e,n=r.call(this,u,{width:o,height:a})||this,l&&n.initFromArray(l,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=lo.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,o=s.length,a=s.itemDirtyIds,l=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.format,this._width,this._height,o,0,i.format,i.type,null);for(var h=0;h<o;h++){var c=l[h];a[h]<c.dirtyId&&(a[h]=c.dirtyId,c.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,i.format,i.type,c.resource.source))}return!0},t}(Jw),as=function(r){Tt(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,o)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=JL(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var o=e.gl,a=i.realWidth,l=i.realHeight;return s=s||this.source,o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===os.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===a&&n.height===l?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,i.type,s):(n.width=a,n.height=l,o.texImage2D(i.target,0,i.format,i.format,i.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Vu),tb=function(r){Tt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.test=function(e){var i=window.OffscreenCanvas;return i&&e instanceof i?!0:e instanceof HTMLCanvasElement},t}(as),nF=function(r){Tt(t,r);function t(e,i){var n=this,s=i||{},o=s.width,a=s.height,l=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:o,height:a})||this;for(var h=0;h<t.SIDES;h++)n.items[h].target=lo.TEXTURE_CUBE_MAP_POSITIVE_X+h;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),l!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=lo.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=lo.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,o=0;o<t.SIDES;o++){var a=this.items[o];s[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(e,a,n),s[o]=a.dirtyId):s[o]<-1&&(e.gl.texImage2D(a.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[o]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Jw),eb=function(r){Tt(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;as.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:xt.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,i.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=i.premultiplyAlpha),n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var o=i.source;i.url=o.src;var a=function(){i.destroyed||(o.onload=null,o.onerror=null,i.resize(o.width,o.height),i._load=null,i.createBitmap?n(i.process()):n(i))};o.complete&&o.src?a():(o.onload=a,o.onerror=function(l){s(l),i.onError.emit(l)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(i,0,0,i.width,i.height,{premultiplyAlpha:this.alphaMode===os.UNPACK?"premultiply":"none"}).then(function(n){return e.destroyed?Promise.reject():(e.bitmap=n,e.update(),e._process=null,Promise.resolve(e))}),this._process)},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,o=i._glTextures;for(var a in o){var l=o[a];if(l!==n&&l.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(as),sF=function(r){Tt(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;as.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=n*e.scale,a=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(o=e._overrideWidth||e._overrideHeight/s*n,a=e._overrideHeight||e._overrideWidth/n*s),o=Math.round(o),a=Math.round(a);var l=e.source;l.width=o,l.height=a,l._pixiId="canvas_"+Sd(),l.getContext("2d").drawImage(i,0,0,n,s,0,0,o,a),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&e.indexOf("<svg")===0},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(as),oF=function(r){Tt(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var o=e[0].src||e[0];as.crossOrigin(s,o,i.crossorigin);for(var a=0;a<e.length;++a){var l=document.createElement("source"),u=e[a],h=u.src,c=u.mime;h=h||e[a];var f=h.split("?").shift().toLowerCase(),p=f.substr(f.lastIndexOf(".")+1);c=c||t.MIME_TYPES[p]||"video/"+p,l.src=h,l.type=c,s.appendChild(l)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=li.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(li.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(li.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&li.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(li.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(li.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(as),aF=function(r){Tt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},t}(as);Dg.push(eb,aF,tb,oF,sF,rv,nF,iF);var Pr=function(){function r(t){this.renderer=t}return r.prototype.destroy=function(){this.renderer=null},r}(),lF=function(r){Tt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===os.UNPACK),n.width===i.width&&n.height===i.height?s.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(n.width=i.width,n.height=i.height,s.texImage2D(i.target,0,e.context.webGLVersion===1?s.DEPTH_COMPONENT:s.DEPTH_COMPONENT16,i.width,i.height,0,i.format,i.type,this.data)),!0},t}(rv),Gg=function(){function r(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new $e("disposeFramebuffer"),this.multisample=La.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new ze(null,{scaleMode:dn.NEAREST,resolution:1,mipmap:ju.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new ze(new lF(null,{width:this.width,height:this.height}),{scaleMode:dn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ju.OFF,format:zu.DEPTH_COMPONENT,type:ci.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),Mc=function(r){Tt(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];e={width:n,height:s,scaleMode:o,resolution:a}}i=r.call(this,null,e)||this;var l=e||{},u=l.width,h=l.height;return i.mipmap=0,i.width=Math.ceil(u)||100,i.height=Math.ceil(h)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Gg(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){e=Math.ceil(e),i=Math.ceil(i),this.framebuffer.resize(e*this.resolution,i*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(ze),rb=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var o=t.width/2/n,a=t.height/2/s,l=t.x/n+o,u=t.y/s+a;i=Zt.add(i,Zt.NW),this.x0=l+o*Zt.uX(i),this.y0=u+a*Zt.uY(i),i=Zt.add(i,2),this.x1=l+o*Zt.uX(i),this.y1=u+a*Zt.uY(i),i=Zt.add(i,2),this.x2=l+o*Zt.uX(i),this.y2=u+a*Zt.uY(i),i=Zt.add(i,2),this.x3=l+o*Zt.uX(i),this.y3=u+a*Zt.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r}(),_x=new rb,Xi=function(r){Tt(t,r);function t(e,i,n,s,o,a){var l=r.call(this)||this;if(l.noFrame=!1,i||(l.noFrame=!0,i=new Sr(0,0,1,1)),e instanceof t&&(e=e.baseTexture),l.baseTexture=e,l._frame=i,l.trim=s,l.valid=!1,l._uvs=_x,l.uvMatrix=null,l.orig=n||i,l._rotate=Number(o||0),o===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Cd(a.x,a.y):new Cd(0,0),l._updateID=0,l.textureCacheIds=[],e.valid?l.noFrame?e.valid&&l.onBaseTextureUpdated(e):l.frame=i:e.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&e.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture;i&&i.url&&en[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===_x&&(this._uvs=new rb),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=xt.STRICT_TEXTURE_CACHE);var s=typeof e=="string",o=null;s?o=e:(e._pixiId||(e._pixiId="pixiid_"+Sd()),o=e._pixiId);var a=en[o];if(s&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||(i.resolution||(i.resolution=vx(e)),a=new t(new ze(e,i)),a.baseTexture.cacheId=o,ze.addToCache(a.baseTexture,o),t.addToCache(a,o)),a},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(ze.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n){var s=new eb(e);s.url=i;var o=new ze(s,{scaleMode:xt.SCALE_MODE,resolution:vx(i)}),a=new t(o);return n||(n=i),ze.addToCache(a.baseTexture,n),t.addToCache(a,n),n!==i&&(ze.addToCache(a.baseTexture,i),t.addToCache(a,i)),a},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),en[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),en[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=en[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete en[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)en[e.textureCacheIds[s]]===e&&delete en[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,o=e.height,a=i+s>this.baseTexture.width,l=n+o>this.baseTexture.height;if(a||l){var u=a&&l?"and":"or",h="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,c="Y: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+u+" "+c))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(ms);function uF(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Xi(new ze(new tb(r)))}function hf(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Xi.EMPTY=new Xi(new ze);hf(Xi.EMPTY);hf(Xi.EMPTY.baseTexture);Xi.WHITE=uF();hf(Xi.WHITE);hf(Xi.WHITE.baseTexture);var ib=function(r){Tt(t,r);function t(e,i){var n=this,s=null;if(!(e instanceof Mc)){var o=arguments[1],a=arguments[2],l=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),s=arguments[0],i=null,e=new Mc({width:o,height:a,scaleMode:l,resolution:u})}return n=r.call(this,e,i)||this,n.legacyRenderer=s,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0),e=Math.ceil(e),i=Math.ceil(i),this.valid=e>0&&i>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=i,n&&this.baseTexture.resize(e,i),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){return typeof e=="number"&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new Mc(e))},t}(Xi),hF=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e){var i=new Mc(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new ib(i)},r.prototype.getOptimalTexture=function(t,e,i){i===void 0&&(i=1);var n=r.SCREEN_KEY;t*=i,e*=i,(!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight)&&(t=bd(t),e=bd(e),n=(t&65535)<<16|e&65535),this.texturePool[n]||(this.texturePool[n]=[]);var s=this.texturePool[n].pop();return s||(s=this.createTexture(t,e)),s.filterPoolKey=n,s.setResolution(i),s},r.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){var e=r.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY="screen",r}(),xx=function(){function r(t,e,i,n,s,o,a){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),cF=0,oi=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=cF++,this.disposeRunner=new $e("disposeBuffer")}return r.prototype.update=function(t){this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}();function nb(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var dF={Float32Array,Uint32Array,Int32Array,Uint8Array};function fF(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var o=new ArrayBuffer(e*4),a=null,l=0,s=0;s<r.length;s++){var u=t[s],h=r[s],c=nb(h);n[c]||(n[c]=new dF[c](o)),a=n[c];for(var f=0;f<h.length;f++){var p=(f/u|0)*i+l,m=f%u;a[p+m]=h[f]}l+=u}return new Float32Array(o)}var Ex={5126:4,5123:2,5121:1},pF=0,mF={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},iv=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=pF++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new $e("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,o,a,l){if(i===void 0&&(i=0),n===void 0&&(n=!1),l===void 0&&(l=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof oi||(e instanceof Array&&(e=new Float32Array(e)),e=new oi(e));var u=t.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,i,n,s);return this}var c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new xx(c,i,n,s,o,a,l),this.instanced=this.instanced||l,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof oi||(t instanceof Array&&(t=new Uint16Array(t)),t=new oi(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new oi,n;for(n in this.attributes){var s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),e.push(s.size*Ex[s.type]/4),s.buffer=0}for(i.data=fF(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new oi(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new xx(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],o,a=0;a<t.length;a++){o=t[a];for(var l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(var a=0;a<o.buffers.length;a++)i[a]=new mF[nb(o.buffers[a].data)](n[a]),e.buffers[a]=new oi(i[a]);for(var a=0;a<t.length;a++){o=t[a];for(var l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var u=0,h=0,c=0,f=0,a=0;a<o.buffers.length;a++)if(o.buffers[a]!==o.indexBuffer){f=a;break}for(var a in o.attributes){var p=o.attributes[a];(p.buffer|0)===f&&(h+=p.size*Ex[p.type]/4)}for(var a=0;a<t.length;a++){for(var m=t[a].indexBuffer.data,l=0;l<m.length;l++)e.indexBuffer.data[l+c]+=u;u+=o.buffers[f].data.length/h,c+=m.length}}return e},r}(),gF=function(r){Tt(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(iv),yF=function(r){Tt(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new oi(e.vertices),e.uvBuffer=new oi(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(iv),vF=0,xa=function(){function r(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=vF++,this.static=!!e}return r.prototype.update=function(){this.dirtyId++},r.prototype.add=function(t,e,i){this.uniforms[t]=new r(e,i)},r.from=function(t,e){return new r(t,e)},r}(),_F=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Sr,this.destinationFrame=new Sr,this.filters=[]}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),xF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.defaultFilterStack=[{}],i.texturePool=new hF,i.texturePool.setScreenSize(e.view),i.statePool=[],i.quad=new gF,i.quadUv=new yF,i.tempRect=new Sr,i.activeState={},i.globalUniforms=new xa({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return t.prototype.push=function(e,i){for(var n=this.renderer,s=this.defaultFilterStack,o=this.statePool.pop()||new _F,a=i[0].resolution,l=i[0].padding,u=i[0].autoFit,h=i[0].legacy,c=1;c<i.length;c++){var f=i[c];a=Math.min(a,f.resolution),l=this.useMaxPadding?Math.max(l,f.padding):l+f.padding,u=u&&f.autoFit,h=h||f.legacy}s.length===1&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),s.push(o),o.resolution=a,o.legacy=h,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(l),u&&o.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),o.sourceFrame.ceil(a),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,a),o.filters=i,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var p=this.tempRect;p.width=o.sourceFrame.width,p.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,n.renderTexture.bind(o.renderTexture,o.sourceFrame,p),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,i=e.pop(),n=i.filters;this.activeState=i;var s=this.globalUniforms.uniforms;s.outputFrame=i.sourceFrame,s.resolution=i.resolution;var o=s.inputSize,a=s.inputPixel,l=s.inputClamp;if(o[0]=i.destinationFrame.width,o[1]=i.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=o[0]*i.resolution,a[1]=o[1]*i.resolution,a[2]=1/a[0],a[3]=1/a[1],l[0]=.5*a[2],l[1]=.5*a[3],l[2]=i.sourceFrame.width*o[2]-.5*a[2],l[3]=i.sourceFrame.height*o[3]-.5*a[3],i.legacy){var u=s.filterArea;u[0]=i.destinationFrame.width,u[1]=i.destinationFrame.height,u[2]=i.sourceFrame.x,u[3]=i.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var h=e[e.length-1];if(i.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,h.renderTexture,Mi.BLEND,i),this.returnFilterTexture(i.renderTexture);else{var c=i.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,i.resolution);f.filterFrame=c.filterFrame;var p=0;for(p=0;p<n.length-1;++p){n[p].apply(this,c,f,Mi.CLEAR,i);var m=c;c=f,f=m}n[p].apply(this,c,h.renderTexture,Mi.BLEND,i),this.returnFilterTexture(c),this.returnFilterTexture(f)}i.clear(),this.statePool.push(i)},t.prototype.bindAndClear=function(e,i){if(i===void 0&&(i=Mi.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);typeof i=="boolean"&&(i=i?Mi.CLEAR:Mi.BLEND,qw("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(i===Mi.CLEAR||i===Mi.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,i,n,s){var o=this.renderer;this.bindAndClear(n,s),e.uniforms.uSampler=i,e.uniforms.filterGlobals=this.globalUniforms,o.state.set(e.state),o.shader.bind(e),e.legacy?(this.quadUv.map(i._frame,i.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Xu.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Xu.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,i){var n=this.activeState,s=n.sourceFrame,o=n.destinationFrame,a=i._texture.orig,l=e.set(o.width,0,0,o.height,s.x,s.y),u=i.worldTransform.copyTo(gi.TEMP_MATRIX);return u.invert(),l.prepend(u),l.scale(1/a.width,1/a.height),l.translate(i.anchor.x,i.anchor.y),l},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,i,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(e,i,n)},t.prototype.getFilterTexture=function(e,i){if(typeof e=="number"){var n=e;e=i,i=n}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,i||e.resolution);return s.filterFrame=e.filterFrame,s},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(Pr),sb=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),EF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.emptyRenderer=new sb(e),i.currentRenderer=i.emptyRenderer,i}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,i){for(var n=this.renderer.texture.boundTextures,s=i-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)},t.prototype.boundArray=function(e,i,n,s){for(var o=e.elements,a=e.ids,l=e.count,u=0,h=0;h<l;h++){var c=o[h],f=c._batchLocation;if(f>=0&&f<s&&i[f]===c){a[h]=f;continue}for(;u<s;){var p=i[u];if(p&&p._batchEnabled===n&&p._batchLocation===u){u++;continue}a[h]=u,c._batchLocation=u,i[u]=c;break}}},t}(Pr),Tx=0,TF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),e.view.addEventListener("webglcontextlost",i.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Tx++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Tx++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var i=this.createContext(this.renderer.view,e);this.initFromContext(i)},t.prototype.createContext=function(e,i){var n;if(xt.PREFER_ENV>=Tn.WEBGL2&&(n=e.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",i)||e.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var i=e.getContextAttributes(),n="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),i.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(Pr),wF=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=La.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return r}(),bF=new Sr,SF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new Gg(10,10),i.msaaSamples=null,i}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Sr,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;xt.PREFER_ENV===Tn.WEBGL_LEGACY&&(i=null,n=null),i?e.drawBuffers=function(s){return i.drawBuffersWEBGL(s)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,i){var n=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,i,n,s){var o=this.viewport;(o.width!==n||o.height!==s||o.x!==e||o.y!==i)&&(o.x=e,o.y=i,o.width=n,o.height=s,this.gl.viewport(e,i,n,s))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,i,n,s,o){o===void 0&&(o=wd.COLOR|wd.DEPTH);var a=this.gl;a.clearColor(e,i,n,s),a.clear(o)},t.prototype.initFramebuffer=function(e){var i=this.gl,n=new wF(i.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height));for(var s=e.colorTextures,o=0;o<s.length;o++)this.renderer.texture.bind(s[o],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&(n.msaaBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer));for(var a=[],l=0;l<o;l++)if(!(l===0&&n.multisample>1)){var u=e.colorTextures[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,0),a.push(i.COLOR_ATTACHMENT0+l)}if(a.length>1&&i.drawBuffers(a),e.depthTexture){var c=this.writeDepthTexture;if(c){var f=e.depthTexture;this.renderer.texture.bind(f,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(e.stencil||e.depth)&&(n.stencil=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),e.depthTexture||i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var i=this.msaaSamples,n=La.NONE;if(e<=1||i===null)return n;for(var s=0;s<i.length;s++)if(i[s]<=e){n=i[s];break}return n===1&&(n=La.NONE),n},t.prototype.blit=function(e,i,n){var s=this,o=s.current,a=s.renderer,l=s.gl,u=s.CONTEXT_UID;if(a.context.webGLVersion===2&&o){var h=o.glFramebuffers[u];if(h){if(!e){if(h.multisample<=1)return;h.blitFramebuffer||(h.blitFramebuffer=new Gg(o.width,o.height),h.blitFramebuffer.addColorTexture(0,o.colorTextures[0])),e=h.blitFramebuffer,e.width=o.width,e.height=o.height}i||(i=bF,i.width=o.width,i.height=o.height),n||(n=i);var c=i.width===n.width&&i.height===n.height;this.bind(e),l.bindFramebuffer(l.READ_FRAMEBUFFER,h.framebuffer),l.blitFramebuffer(i.x,i.y,i.width,i.height,n.x,n.y,n.width,n.height,l.COLOR_BUFFER_BIT,c?l.NEAREST:l.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,i){var n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),i||(s.deleteFramebuffer(n.framebuffer),n.stencil&&s.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var i=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<i.length;n++)this.disposeFramebuffer(i[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var i=e.glFramebuffers[this.CONTEXT_UID];if(!(!i||i.stencil)){e.enableStencil();var n=e.width,s=e.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n,s),i.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Sr},t}(Pr),AF=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),Pp={5126:4,5123:2,5121:1},CF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;xt.PREFER_ENV===Tn.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(o){return n.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return n.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(i.webGLVersion!==2){var s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=function(o,a){return s.vertexAttribDivisorANGLE(o,a)},e.drawElementsInstanced=function(o,a,l,u,h){return s.drawElementsInstancedANGLE(o,a,l,u,h)},e.drawArraysInstanced=function(o,a,l,u){return s.drawArraysInstancedANGLE(o,a,l,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex},t.prototype.bind=function(e,i){i=i||this.renderer.shader.shader;var n=this.gl,s=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},o=!0);var a=s[i.program.id]||this.initGeometryVao(e,i.program,o);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(e,i.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,i=this.gl,n=0;n<e.buffers.length;n++){var s=e.buffers[n],o=s._glBuffers[this.CONTEXT_UID];if(s._updateID!==o.updateID){o.updateID=s._updateID;var a=s.index?i.ELEMENT_ARRAY_BUFFER:i.ARRAY_BUFFER;if(i.bindBuffer(a,o.buffer),this._boundBuffer=o,o.byteLength>=s.data.byteLength)i.bufferSubData(a,0,s.data);else{var l=s.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;o.byteLength=s.data.byteLength,i.bufferData(a,s.data,l)}}}},t.prototype.checkCompatibility=function(e,i){var n=e.attributes,s=i.attributeData;for(var o in s)if(!n[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},t.prototype.getSignature=function(e,i){var n=e.attributes,s=i.attributeData,o=["g",e.id];for(var a in n)s[a]&&o.push(a);return o.join("-")},t.prototype.initGeometryVao=function(e,i,n){n===void 0&&(n=!0),this.checkCompatibility(e,i);var s=this.gl,o=this.CONTEXT_UID,a=this.getSignature(e,i),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[a];if(u)return l[i.id]=u,u;var h=e.buffers,c=e.attributes,f={},p={};for(var m in h)f[m]=0,p[m]=0;for(var m in c)!c[m].size&&i.attributeData[m]?c[m].size=i.attributeData[m].size:c[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[c[m].buffer]+=c[m].size*Pp[c[m].type];for(var m in c){var x=c[m],T=x.size;x.stride===void 0&&(f[x.buffer]===T*Pp[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=p[x.buffer],p[x.buffer]+=T*Pp[x.type])}u=s.createVertexArray(),s.bindVertexArray(u);for(var v=0;v<h.length;v++){var E=h[v];E._glBuffers[o]||(E._glBuffers[o]=new AF(s.createBuffer()),this.managedBuffers[E.id]=E,E.disposeRunner.add(this)),n&&E._glBuffers[o].refCount++}return this.activateVao(e,i),this._activeVao=u,l[i.id]=u,l[a]=u,u},t.prototype.disposeBuffer=function(e,i){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),n&&(i||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,i){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=e.buffers;if(e.disposeRunner.remove(this),!!n){for(var a=0;a<o.length;a++){var l=o[a]._glBuffers[this.CONTEXT_UID];l.refCount--,l.refCount===0&&!i&&this.disposeBuffer(o[a],i)}if(!i){for(var u in n)if(u[0]==="g"){var h=n[u];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var i=Object.keys(this.managedGeometries),n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],e);i=Object.keys(this.managedBuffers);for(var n=0;n<i.length;n++)this.disposeBuffer(this.managedBuffers[i[n]],e)},t.prototype.activateVao=function(e,i){var n=this.gl,s=this.CONTEXT_UID,o=e.buffers,a=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[s].buffer);var l=null;for(var u in a){var h=a[u],c=o[h.buffer],f=c._glBuffers[s];if(i.attributeData[u]){l!==f&&(n.bindBuffer(n.ARRAY_BUFFER,f.buffer),l=f);var p=i.attributeData[u].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,i,n,s){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var l=a.indexBuffer.data.BYTES_PER_ELEMENT,u=l===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(e,i||a.indexBuffer.data.length,u,(n||0)*l,s||1):o.drawElements(e,i||a.indexBuffer.data.length,u,(n||0)*l):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(e,n,i||a.getSize(),s||1):o.drawArrays(e,n,i||a.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(Pr),PF=function(){function r(t){t===void 0&&(t=null),this.type=vr.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=vr.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function wx(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function ob(r,t,e,i){var n=wx(r,r.VERTEX_SHADER,t),s=wx(r,r.FRAGMENT_SHADER,e),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,s),i)for(var a in i)r.bindAttribLocation(o,i[a],a);return r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)||(r.getShaderParameter(n,r.COMPILE_STATUS)||(console.warn(t),console.error(r.getShaderInfoLog(n))),r.getShaderParameter(s,r.COMPILE_STATUS)||(console.warn(e),console.error(r.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(o,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),r.getProgramInfoLog(o)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(o)),r.deleteProgram(o),o=null),r.deleteShader(n),r.deleteShader(s),o}function Ip(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function ab(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return Ip(2*t);case"bvec3":return Ip(3*t);case"bvec4":return Ip(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var lb={},jl=lb;function ub(){if(jl===lb||jl&&jl.isContextLost()){var r=document.createElement("canvas"),t=void 0;xt.PREFER_ENV>=Tn.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),jl=t}return jl}var sc;function IF(){if(!sc){sc=ki.MEDIUM;var r=ub();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);sc=t.precision?ki.HIGH:ki.MEDIUM}}return sc}function bx(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===ki.HIGH&&e!==ki.HIGH&&(i=ki.MEDIUM),"precision "+i+` float;
`+r}else if(e!==ki.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var RF={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function OF(r){return RF[r]}var oc=null,Sx={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ax(r,t){if(!oc){var e=Object.keys(Sx);oc={};for(var i=0;i<e.length;++i){var n=e[i];oc[r[n]]=Sx[n]}}return oc[t]}var Rp=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],MF={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},LF={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function FF(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&e.push(`
                    renderer.shader.syncUniformGroup(uv["`+i+`"], syncData);
                `);continue}for(var s=r.uniforms[i],o=!1,a=0;a<Rp.length;a++)if(Rp[a].test(n,s)){e.push(Rp[a].code(i,s)),o=!0;break}if(!o){var l=n.size===1?MF:LF,u=l[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var NF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function BF(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function kF(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=NF.replace(/%forloop%/gi,BF(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Vl;function DF(){if(typeof Vl=="boolean")return Vl;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Vl=r({a:"b"},"a","b")===!0}catch{Vl=!1}return Vl}var UF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,GF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,HF=0,ac={},nv=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=HF++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ac[i]?(ac[i]++,i+="-"+ac[i]):ac[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=bx(this.vertexSrc,xt.PRECISION_VERTEX,ki.HIGH),this.fragmentSrc=bx(this.fragmentSrc,xt.PRECISION_FRAGMENT,IF())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return r.prototype.extractData=function(t,e){var i=ub();if(i){var n=ob(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},r.prototype.getAttributeData=function(t,e){for(var i={},n=[],s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<s;o++){var a=e.getActiveAttrib(t,o),l=Ax(e,a.type),u={type:l,name:a.name,size:OF(l),location:0};i[a.name]=u,n.push(u)}n.sort(function(h,c){return h.name>c.name?1:-1});for(var o=0;o<n.length;o++)n[o].location=o;return i},r.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<n;s++){var o=e.getActiveUniform(t,s),a=o.name.replace(/\[.*?\]$/,""),l=o.name.match(/\[.*?\]$/),u=Ax(e,o.type);i[a]={type:u,size:o.size,isArray:l,value:ab(u,o.size)}}return i},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return GF},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return UF},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=yx[n];return s||(yx[n]=s=new r(t,e,i)),s},r}(),hb=function(){function r(t,e){this.program=t,e?e instanceof xa?this.uniformGroup=e:this.uniformGroup=new xa(e):this.uniformGroup=new xa({});for(var i in t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=nv.from(t,e);return new r(n,i)},r}(),Op=0,Mp=1,Lp=2,Fp=3,Np=4,sv=function(){function r(){this.data=0,this.blendMode=ft.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<Op)},set:function(t){!!(this.data&1<<Op)!==t&&(this.data^=1<<Op)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<Mp)},set:function(t){!!(this.data&1<<Mp)!==t&&(this.data^=1<<Mp)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<Lp)},set:function(t){!!(this.data&1<<Lp)!==t&&(this.data^=1<<Lp)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<Fp)},set:function(t){!!(this.data&1<<Fp)!==t&&(this.data^=1<<Fp)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Np)},set:function(t){!!(this.data&1<<Np)!==t&&(this.data^=1<<Np)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ft.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),$F=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,XF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,zF=function(r){Tt(t,r);function t(e,i,n){var s=this,o=nv.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,o,n)||this,s.padding=0,s.resolution=xt.FILTER_RESOLUTION,s.enabled=!0,s.autoFit=!0,s.legacy=!!s.program.attributeData.aTextureCoord,s.state=new sv,s}return t.prototype.apply=function(e,i,n,s,o){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return $F},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return XF},enumerable:!1,configurable:!0}),t}(hb),jF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,VF=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Cx=new gi,WF=function(){function r(t,e){this._texture=t,this.mapCoord=new gi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],o=t[n+1];e[n]=s*i.a+o*i.c+i.tx,e[n+1]=s*i.b+o*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(Cx.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Cx));var o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0},r}(),YF=function(r){Tt(t,r);function t(e){var i=this,n=new gi;return i=r.call(this,jF,VF)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var o=this.maskSprite,a=o._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new WF(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(zF),KF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,i){var n=i;if(!n.isMaskData){var s=this.maskDataPool.pop()||new PF;s.pooled=!0,s.maskObject=i,n=s}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case vr.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case vr.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case vr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break}},t.prototype.pop=function(e){var i=this.maskStack.pop();if(!(!i||i._target!==e)){switch(i.type){case vr.SCISSOR:this.renderer.scissor.pop();break;case vr.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case vr.SPRITE:this.popSpriteMask();break}i.reset(),i.pooled&&this.maskDataPool.push(i)}},t.prototype.detect=function(e){var i=e.maskObject;if(i.isSprite){e.type=vr.SPRITE;return}if(e.type=vr.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()){var n=i.worldTransform,s=Math.atan2(n.b,n.a),o=Math.atan2(n.d,n.c);s=Math.round(s*(180/Math.PI)*100),o=Math.round(o*(180/Math.PI)*100)-s,s=(s%9e3+9e3)%9e3,o=(o%18e3+18e3)%18e3,s===0&&o===9e3&&(e.type=vr.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var i=e.maskObject,n=e._target,s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new YF(i)]),s[0].resolution=this.renderer.resolution,s[0].maskSprite=i;var o=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,s),n.filterArea=o,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(Pr),cb=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var i=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var s=this.getStackLength();s!==n&&(s===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.maskStack=null},t}(Pr),qF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),o=this.renderer.gl;i.renderable=!1,n?s.fit(n):o.enable(o.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,o=n.sourceFrame,a=n.destinationFrame,l=i?i.resolution:this.renderer.resolution,u=(e.x-o.x)*l+a.x,h=(e.y-o.y)*l+a.y,c=e.width*l,f=e.height*l;s&&(u+=s.tx*l,h+=s.ty*l),i||(h=this.renderer.height-f-h),this.renderer.gl.scissor(u,h,c,f)},t}(cb),ZF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(cb),QF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new gi,i.transform=null,i}return t.prototype.update=function(e,i,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,i,n,s){var o=this.projectionMatrix,a=s?-1:1;o.identity(),o.a=1/i.width*2,o.d=a*(1/i.height*2),o.tx=-1-i.x*o.a,o.ty=-a-i.y*o.d},t.prototype.setTransform=function(e){},t}(Pr),Fs=new Sr,Wl=new Sr,Yl=new Sr,JF=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new Sr,i.destinationFrame=new Sr,i}return t.prototype.bind=function(e,i,n){e===void 0&&(e=null);var s=this.renderer;this.current=e;var o,a,l;e?(o=e.baseTexture,l=o.resolution,i||(Fs.width=e.frame.width,Fs.height=e.frame.height,i=Fs),n||(Wl.x=e.frame.x,Wl.y=e.frame.y,Wl.width=i.width,Wl.height=i.height,n=Wl),a=o.framebuffer):(l=s.resolution,i||(Fs.width=s.screen.width,Fs.height=s.screen.height,i=Fs),n||(n=Fs,n.width=i.width,n.height=i.height)),Yl.x=n.x*l,Yl.y=n.y*l,Yl.width=n.width*l,Yl.height=n.height*l,this.renderer.framebuffer.bind(a,Yl),this.renderer.projection.update(n,i,l,!a),e?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,i){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],i)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(Pr),tN=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},r}(),eN=0,Px={textureCount:0},rN=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=eN++,i}return t.prototype.systemCheck=function(){if(!DF())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,i){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),i||(Px.textureCount=0,this.syncUniformGroup(e.uniformGroup,Px)),s},t.prototype.setUniforms=function(e){var i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,i){var n=this.getglProgram();(!e.static||e.dirtyId!==n.uniformGroups[e.id])&&(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,i))},t.prototype.syncUniforms=function(e,i,n){var s=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);s(i.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var i=this.getSignature(e,this.shader.program.uniformData);return this.cache[i]||(this.cache[i]=FF(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[i],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,i){var n=e.uniforms,s=[];for(var o in n)s.push(o),i[o]&&s.push(i[o].type);return s.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var i=this.gl,n=e.program,s={};for(var o in n.attributeData)s[o]=n.attributeData[o].location;var a=ob(i,n.vertexSrc,n.fragmentSrc,s),l={};for(var o in n.uniformData){var u=n.uniformData[o];l[o]={location:i.getUniformLocation(a,o),value:ab(u.type,u.size)}}var h=new tN(a,l);return n.glPrograms[this.renderer.CONTEXT_UID]=h,h},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(Pr);function iN(r,t){return t===void 0&&(t=[]),t[ft.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.ADD]=[r.ONE,r.ONE],t[ft.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.NONE]=[0,0],t[ft.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ft.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ft.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ft.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ft.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ft.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ft.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ft.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ft.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ft.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ft.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var nN=0,sN=1,oN=2,aN=3,lN=4,uN=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=ft.NONE,i._blendEq=!1,i.map=[],i.map[nN]=i.setBlend,i.map[sN]=i.setOffset,i.map[oN]=i.setCullFace,i.map[aN]=i.setDepthTest,i.map[lN]=i.setFrontFace,i.checks=[],i.defaultState=new sv,i.defaultState.blend=!0,i}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=iN(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var i=this.stateId^e.data,n=0;i;)i&1&&this.map[n].call(this,!!(e.data&1<<n)),i=i>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(var i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var i=this.blendModes[e],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,i){this.gl.polygonOffset(e,i)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,i){var n=this.checks.indexOf(e);i&&n===-1?this.checks.push(e):!i&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(e,i){e.setBlendMode(i.blendMode)},t.checkPolygonOffset=function(e,i){e.setPolygonOffset(1,i.polygonOffset)},t}(Pr),hN=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.count=0,i.checkCount=0,i.maxIdle=xt.GC_MAX_IDLE,i.checkCountMax=xt.GC_MAX_CHECK_COUNT,i.mode=xt.GC_MODE,i}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Ng.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,i=e.managedTextures,n=!1,s=0;s<i.length;s++){var o=i[s];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),i[s]=null,n=!0)}if(n){for(var a=0,s=0;s<i.length;s++)i[s]!==null&&(i[a++]=i[s]);i.length=a}},t.prototype.unload=function(e){var i=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&i.destroyTexture(n);for(var s=e.children.length-1;s>=0;s--)this.unload(e.children[s])},t}(Pr),Bp=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return r}(),cN=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new ze,i}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(var n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};var s=new Bp(e.createTexture());e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Bp(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,i){i===void 0&&(i=0);var n=this.gl;if(e){if(e=e.castToBaseTexture(),e.parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[i]!==e&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(e)),this.boundTextures[i]=e}}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var i=this,n=i.gl,s=i.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<s.length;o++)s[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<s.length;o++)s[o]===e&&(this.currentLocation!==o&&(n.activeTexture(n.TEXTURE0+o),this.currentLocation=o),n.bindTexture(e.target,this.emptyTextures[e.target].texture),s[o]=null)},t.prototype.initTexture=function(e){var i=new Bp(this.gl.createTexture());return i.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),i},t.prototype.initTextureType=function(e,i){if(i.internalFormat=e.format,i.type=e.type,this.webGLVersion===2){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(i.internalFormat=n.RGBA32F),e.type===ci.HALF_FLOAT&&(i.type=n.HALF_FLOAT),i.type===n.HALF_FLOAT&&e.format===n.RGBA&&(i.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var i=e._glTextures[this.CONTEXT_UID];if(i){var n=this.renderer;if(this.initTextureType(e,i),!(e.resource&&e.resource.upload(n,e,i))){var s=e.realWidth,o=e.realHeight,a=n.gl;(i.width!==s||i.height!==o||i.dirtyId<0)&&(i.width=s,i.height=o,a.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,null))}e.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(e),i.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,i){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!i)){var s=this.managedTextures.indexOf(e);s!==-1&&ZL(this.managedTextures,s,1)}},t.prototype.updateTextureStyle=function(e){var i=e._glTextures[this.CONTEXT_UID];i&&((e.mipmap===ju.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?i.mipmap=!1:i.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?i.wrapMode=Fg.CLAMP:i.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,i)||this.setStyle(e,i),i.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,i){var n=this.gl;if(i.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===dn.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===dn.LINEAR){var o=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===dn.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===dn.LINEAR?n.LINEAR:n.NEAREST)},t}(Pr),kp=new gi,dN=function(r){Tt(t,r);function t(e,i){e===void 0&&(e=$u.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},xt.RENDER_OPTIONS,i),i.roundPixels&&(xt.ROUND_PIXELS=i.roundPixels,qw("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=i,n.type=e,n.screen=new Sr(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||xt.RESOLUTION,n.transparent=i.transparent,n.autoDensity=i.autoDensity||i.autoResize||!1,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.screen.width=e,this.screen.height=i,this.view.width=e*this.resolution,this.view.height=i*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=i+"px"),this.emit("resize",e,i)},t.prototype.generateTexture=function(e,i,n,s){s=s||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var o=ib.create({width:s.width|0,height:s.height|0,scaleMode:i,resolution:n});return kp.tx=-s.x,kp.ty=-s.y,this.render(e,o,!1,kp,!!e.parent),o},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=$u.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=WL(e),VL(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(ms);(function(r){Tt(t,r);function t(e){var i=r.call(this,$u.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new $e("destroy"),contextChange:new $e("contextChange"),reset:new $e("reset"),update:new $e("update"),postrender:new $e("postrender"),prerender:new $e("prerender"),resize:new $e("resize")},i.globalUniforms=new xa({projectionMatrix:new gi},!0),i.addSystem(KF,"mask").addSystem(TF,"context").addSystem(uN,"state").addSystem(rN,"shader").addSystem(cN,"texture").addSystem(CF,"geometry").addSystem(SF,"framebuffer").addSystem(qF,"scissor").addSystem(ZF,"stencil").addSystem(QF,"projection").addSystem(hN,"textureGC").addSystem(xF,"filter").addSystem(JF,"renderTexture").addSystem(EF,"batch"),i.initPlugins(t.__plugins),e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:e.antialias,premultipliedAlpha:i.transparent&&i.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,zL(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(jL())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(e,i){i||(i=e.name);var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i,n,s,o){if(this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(i||(this._lastObjectRendered=e),!o){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(e,i)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(dN);var fN=function(){function r(){this.texArray=null,this.blend=0,this.type=Xu.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),pN=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),mN=function(){function r(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),gN=function(r){Tt(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=sv.for2d(),i.size=xt.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;xt.PREFER_ENV===Tn.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),xt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=kF(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new fN);for(;i.length<s;)i.push(new pN);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++ze._globalBatch,h=0,c=s[0],f=0;o.copyBoundTextures(a,n);for(var p=0;p<this._bufferSize;++p){var m=i[p];i[p]=null,m._batchEnabled!==u&&(c.count>=n&&(o.boundArray(c,a,u,n),this.buildDrawCalls(c,f,p),f=p,c=s[++h],++u),m._batchEnabled=u,m.touched=l,c.elements[c.count++]=m)}c.count>0&&(o.boundArray(c,a,u,n),this.buildDrawCalls(c,f,this._bufferSize),++h,++u);for(var p=0;p<a.length;p++)a[p]=null;ze._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,o=s._bufferedElements,a=s._attributeBuffer,l=s._indexBuffer,u=s.vertexSize,h=t._drawCallPool,c=this._dcIndex,f=this._aIndex,p=this._iIndex,m=h[c];m.start=this._iIndex,m.texArray=e;for(var x=i;x<n;++x){var T=o[x],v=T._texture.baseTexture,E=KL[v.alphaMode?1:0][T.blendMode];o[x]=null,i<x&&m.blend!==E&&(m.size=p-m.start,i=x,m=h[++c],m.texArray=e,m.start=p),this.packInterleavedGeometry(T,a,l,f,p),f+=T.vertexData.length/2*u,p+=T.indices.length,m.blend=E}i<n&&(m.size=p-m.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=p},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;xt.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,o=t._drawCallPool,a=null,l=0;l<e;l++){var u=o[l],h=u.texArray,c=u.type,f=u.size,p=u.start,m=u.blend;a!==h&&(a=h,this.bindAndClearTexArray(h)),this.state.blendMode=m,s.set(this.state),n.drawElements(c,f,n.UNSIGNED_SHORT,p*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),xt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=bd(Math.ceil(e/8)),n=mx(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new mN(s*this.vertexSize*4)),o},t.prototype.getIndexBuffer=function(e){var i=bd(Math.ceil(e/12)),n=mx(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(s)),o},t.prototype.packInterleavedGeometry=function(e,i,n,s,o){for(var a=i.uint32View,l=i.float32View,u=s/this.vertexSize,h=e.uvs,c=e.indices,f=e.vertexData,p=e._texture.baseTexture._batchLocation,m=Math.min(e.worldAlpha,1),x=m<1&&e._texture.baseTexture.alphaMode?qL(e._tintRGB,m):e._tintRGB+(m*255<<24),T=0;T<f.length;T+=2)l[s++]=f[T],l[s++]=f[T+1],l[s++]=h[T],l[s++]=h[T+1],a[s++]=x,l[s++]=p;for(var T=0;T<c.length;T++)n[o++]=u+c[T]},t._drawCallPool=[],t._textureArrayPool=[],t}(sb),yN=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=xa.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new nv(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new gi,default:this.defaultGroupCache[t]};return new hb(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),vN=function(r){Tt(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new oi(null,e,!1),i._indexBuffer=new oi(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,ci.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,ci.FLOAT).addAttribute("aColor",i._buffer,4,!0,ci.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,ci.FLOAT).addIndex(i._indexBuffer),i}return t}(iv),Ix=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Rx=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,_N=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:Ix,fragment:Rx,geometryClass:vN,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,o=e.geometryClass;return function(a){Tt(l,a);function l(u){var h=a.call(this,u)||this;return h.shaderGenerator=new yN(i,n),h.geometryClass=o,h.vertexSize=s,h}return l}(gN)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return Ix},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return Rx},enumerable:!1,configurable:!0}),r}();_N.create();/*!
 * @pixi/loaders - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ln=ct;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hg=function(r,t){return Hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Hg(r,t)};function xN(r,t){Hg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var EN=function(){function r(){}return r.use=function(t,e){t.data&&t.type===ct.TYPE.IMAGE&&(t.texture=Xi.fromLoader(t.data,t.url,t.name)),e()},r}(),ov=function(r){xN(t,r);function t(e,i){for(var n=r.call(this,e,i)||this,s=0;s<t._plugins.length;++s){var o=t._plugins[s],a=o.pre,l=o.use;a&&n.pre(a),l&&n.use(l)}return n._protected=!1,n}return t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(mn);ov.registerPlugin({use:UL.parsing});ov.registerPlugin(EN);/*!
 * pixi-sound - v3.0.5
 * https://github.com/pixijs/pixi-sound
 * Compiled Thu, 09 Jul 2020 17:33:34 UTC
 *
 * pixi-sound is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */var av=function(){function r(t,e){this._output=e,this._input=t}return Object.defineProperty(r.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach(function(n){n&&n.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach(function(n){i===null?e._input.connect(n.destination):i.connect(n.destination),i=n}),i.connect(this._output)}},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},r}(),Ns=function(){function r(t,e){this.init(t,e)}return r.prototype.init=function(t,e){this.destination=t,this.source=e||t},r.prototype.connect=function(t){this.source.connect(t)},r.prototype.disconnect=function(){this.source.disconnect()},r.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},r}(),db=function(r,t){return(db=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(r,t)};function Br(r,t){function e(){this.constructor=r}db(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var fb,Wu=function(){return(Wu=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}).apply(this,arguments)};function le(){return fb}var _r=function(){function r(){}return r.setParamValue=function(t,e){if(t.setValueAtTime){var i=le().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},r}(),TN=0,pb=function(r){function t(e){var i=r.call(this)||this;return i.id=TN++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i.init(e),i}return Br(t,r),t.prototype.set=function(e,i){if(this[e]===void 0)throw new Error("Property with name "+e+" does not exist.");return this[e]=i,this},t.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(e){this._muted=e,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(e){this._loop=e,this.refresh()},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){if(this._source){var e=this._media.context,i=this._media.parent;this._source.loop=this._loop||i.loop;var n=e.volume*(e.muted?0:1),s=i.volume*(i.muted?0:1),o=this._volume*(this._muted?0:1);_r.setParamValue(this._gain.gain,o*s*n),_r.setParamValue(this._source.playbackRate,this._speed*i.speed*e.speed)}},t.prototype.refreshPaused=function(){var e=this._media.context,i=this._media.parent,n=this._paused||i.paused||e.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",n))},t.prototype.play=function(e){var i=e.start,n=e.end,s=e.speed,o=e.loop,a=e.volume,l=e.muted;this._paused=!1;var u=this._media.nodes.cloneBufferSource(),h=u.source,c=u.gain;this._source=h,this._gain=c,this._speed=s,this._volume=a,this._loop=!!o,this._muted=l,this.refresh();var f=this._source.buffer.duration;this._duration=f,this._end=n,this._lastUpdate=this._now(),this._elapsed=i,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=n,this._source.loopStart=i,this._source.start(0,i)):n?this._source.start(0,i,n-i):this._source.start(0,i),this.emit("start"),this._update(!0),this._enabled=!0},t.prototype._toSec=function(e){return e>10&&(e/=1e3),e||0},Object.defineProperty(t.prototype,"_enabled",{set:function(e){li.shared.remove(this._updateListener,this),e&&li.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(e){this._paused=e,this.refreshPaused()},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},t.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},t.prototype._now=function(){return this._media.context.audioContext.currentTime},t.prototype._updateListener=function(){this._update()},t.prototype._update=function(e){if(e===void 0&&(e=!1),this._source){var i=this._now(),n=i-this._lastUpdate;if(n>0||e){var s=this._source.playbackRate.value;this._elapsed+=n*s,this._lastUpdate=i;var o=this._duration,a=void 0;if(this._source.loopStart){var l=this._source.loopEnd-this._source.loopStart;a=(this._source.loopStart+this._elapsed%l)/o}else a=this._elapsed%o/o;this._progress=a,this.emit("progress",this._progress,o)}}},t.prototype.init=function(e){this._media=e,e.context.events.on("refresh",this.refresh,this),e.context.events.on("refreshPaused",this.refreshPaused,this)},t.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},t.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},t}(ms),mb=function(r){function t(e){var i=this,n=e.audioContext,s=n.createBufferSource(),o=n.createGain(),a=n.createAnalyser();return s.connect(a),a.connect(o),o.connect(e.destination),(i=r.call(this,a,o)||this).context=e,i.bufferSource=s,i.gain=o,i.analyser=a,i}return Br(t,r),Object.defineProperty(t.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(t.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},t.prototype.cloneBufferSource=function(){var e=this.bufferSource,i=this.context.audioContext.createBufferSource();i.buffer=e.buffer,_r.setParamValue(i.playbackRate,e.playbackRate.value),i.loop=e.loop;var n=this.context.audioContext.createGain();return i.connect(n),n.connect(this.destination),{source:i,gain:n}},Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),t.BUFFER_SIZE=0,t}(av),Pd=function(){function r(){}return r.prototype.init=function(t){this.parent=t,this._nodes=new mb(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},r.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},r.prototype.create=function(){return new pb(this)},Object.defineProperty(r.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),r.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},r.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,n=this.parent.url;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},r.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,function(n,s){if(n)e&&e(n);else{i.parent.isLoaded=!0,i.buffer=s;var o=i.parent.autoPlayStart();e&&e(null,i.parent,o)}})},r}(),$g=function(r){function t(){var e=this,i=window,n=new t.AudioContext,s=n.createDynamicsCompressor(),o=n.createAnalyser();return o.connect(s),s.connect(n.destination),(e=r.call(this,o,s)||this)._ctx=n,e._offlineCtx=new t.OfflineAudioContext(1,2,i.OfflineAudioContext?n.sampleRate:44100),e._unlocked=!1,e.compressor=s,e.analyser=o,e.events=new ms,e.volume=1,e.speed=1,e.muted=!1,e.paused=!1,n.state!=="running"&&(e._unlock(),e._unlock=e._unlock.bind(e),document.addEventListener("mousedown",e._unlock,!0),document.addEventListener("touchstart",e._unlock,!0),document.addEventListener("touchend",e._unlock,!0)),e}return Br(t,r),t.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},t.prototype.playEmptySound=function(){var e=this._ctx.createBufferSource();e.buffer=this._ctx.createBuffer(1,1,22050),e.connect(this._ctx.destination),e.start(0,0,0),e.context.state==="suspended"&&e.context.resume()},Object.defineProperty(t,"AudioContext",{get:function(){var e=window;return e.AudioContext||e.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OfflineAudioContext",{get:function(){var e=window;return e.OfflineAudioContext||e.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this);var e=this._ctx;e.close!==void 0&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(t.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(e){e&&this._ctx.state==="running"?this._ctx.suspend():e||this._ctx.state!=="suspended"||this._ctx.resume(),this._paused=e},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.events.emit("refresh")},t.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},t.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},t.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},t.prototype.decode=function(e,i){this._offlineCtx.decodeAudioData(e,function(n){i(null,n)},function(n){i(new Error(n.message||"Unable to decode file"))})},t}(av),wN={WebAudioMedia:Pd,WebAudioInstance:pb,WebAudioNodes:mb,WebAudioContext:$g,WebAudioUtils:_r},bN={Filter:Ns,EqualizerFilter:function(r){function t(e,i,n,s,o,a,l,u,h,c){e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=0),c===void 0&&(c=0);var f=this;if(!le().useLegacy){var p=[{f:t.F32,type:"lowshelf",gain:e},{f:t.F64,type:"peaking",gain:i},{f:t.F125,type:"peaking",gain:n},{f:t.F250,type:"peaking",gain:s},{f:t.F500,type:"peaking",gain:o},{f:t.F1K,type:"peaking",gain:a},{f:t.F2K,type:"peaking",gain:l},{f:t.F4K,type:"peaking",gain:u},{f:t.F8K,type:"peaking",gain:h},{f:t.F16K,type:"highshelf",gain:c}].map(function(T){var v=le().context.audioContext.createBiquadFilter();return v.type=T.type,_r.setParamValue(v.Q,1),v.frequency.value=T.f,_r.setParamValue(v.gain,T.gain),v});(f=r.call(this,p[0],p[p.length-1])||this).bands=p,f.bandsMap={};for(var m=0;m<f.bands.length;m++){var x=f.bands[m];m>0&&f.bands[m-1].connect(x),f.bandsMap[x.frequency.value]=x}return f}f=r.call(this,null)||this}return Br(t,r),t.prototype.setGain=function(e,i){if(i===void 0&&(i=0),!this.bandsMap[e])throw new Error("No band found for frequency "+e);_r.setParamValue(this.bandsMap[e].gain,i)},t.prototype.getGain=function(e){if(!this.bandsMap[e])throw new Error("No band found for frequency "+e);return this.bandsMap[e].gain.value},Object.defineProperty(t.prototype,"f32",{get:function(){return this.getGain(t.F32)},set:function(e){this.setGain(t.F32,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f64",{get:function(){return this.getGain(t.F64)},set:function(e){this.setGain(t.F64,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f125",{get:function(){return this.getGain(t.F125)},set:function(e){this.setGain(t.F125,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f250",{get:function(){return this.getGain(t.F250)},set:function(e){this.setGain(t.F250,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f500",{get:function(){return this.getGain(t.F500)},set:function(e){this.setGain(t.F500,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f1k",{get:function(){return this.getGain(t.F1K)},set:function(e){this.setGain(t.F1K,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f2k",{get:function(){return this.getGain(t.F2K)},set:function(e){this.setGain(t.F2K,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f4k",{get:function(){return this.getGain(t.F4K)},set:function(e){this.setGain(t.F4K,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f8k",{get:function(){return this.getGain(t.F8K)},set:function(e){this.setGain(t.F8K,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"f16k",{get:function(){return this.getGain(t.F16K)},set:function(e){this.setGain(t.F16K,e)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.bands.forEach(function(e){_r.setParamValue(e.gain,0)})},t.prototype.destroy=function(){this.bands.forEach(function(e){e.disconnect()}),this.bands=null,this.bandsMap=null},t.F32=32,t.F64=64,t.F125=125,t.F250=250,t.F500=500,t.F1K=1e3,t.F2K=2e3,t.F4K=4e3,t.F8K=8e3,t.F16K=16e3,t}(Ns),DistortionFilter:function(r){function t(e){e===void 0&&(e=0);var i=this;if(!le().useLegacy){var n=le().context.audioContext.createWaveShaper();return(i=r.call(this,n)||this)._distortion=n,i.amount=e,i}i=r.call(this,null)||this}return Br(t,r),Object.defineProperty(t.prototype,"amount",{get:function(){return this._amount},set:function(e){e*=1e3,this._amount=e;for(var i,n=new Float32Array(44100),s=Math.PI/180,o=0;o<44100;++o)i=2*o/44100-1,n[o]=(3+e)*i*20*s/(Math.PI+e*Math.abs(i));this._distortion.curve=n,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._distortion=null,r.prototype.destroy.call(this)},t}(Ns),StereoFilter:function(r){function t(e){e===void 0&&(e=0);var i=this;if(!le().useLegacy){var n,s,o,a=le().context.audioContext;return a.createStereoPanner?o=n=a.createStereoPanner():((s=a.createPanner()).panningModel="equalpower",o=s),(i=r.call(this,o)||this)._stereo=n,i._panner=s,i.pan=e,i}i=r.call(this,null)||this}return Br(t,r),Object.defineProperty(t.prototype,"pan",{get:function(){return this._pan},set:function(e){this._pan=e,this._stereo?_r.setParamValue(this._stereo.pan,e):this._panner.setPosition(e,0,1-Math.abs(e))},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this),this._stereo=null,this._panner=null},t}(Ns),ReverbFilter:function(r){function t(e,i,n){e===void 0&&(e=3),i===void 0&&(i=2),n===void 0&&(n=!1);var s=this;if(!le().useLegacy)return(s=r.call(this,null)||this)._seconds=s._clamp(e,1,50),s._decay=s._clamp(i,0,100),s._reverse=n,s._rebuild(),s;s=r.call(this,null)||this}return Br(t,r),t.prototype._clamp=function(e,i,n){return Math.min(n,Math.max(i,e))},Object.defineProperty(t.prototype,"seconds",{get:function(){return this._seconds},set:function(e){this._seconds=this._clamp(e,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decay",{get:function(){return this._decay},set:function(e){this._decay=this._clamp(e,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverse",{get:function(){return this._reverse},set:function(e){this._reverse=e,this._rebuild()},enumerable:!0,configurable:!0}),t.prototype._rebuild=function(){for(var e,i=le().context.audioContext,n=i.sampleRate,s=n*this._seconds,o=i.createBuffer(2,s,n),a=o.getChannelData(0),l=o.getChannelData(1),u=0;u<s;u++)e=this._reverse?s-u:u,a[u]=(2*Math.random()-1)*Math.pow(1-e/s,this._decay),l[u]=(2*Math.random()-1)*Math.pow(1-e/s,this._decay);var h=le().context.audioContext.createConvolver();h.buffer=o,this.init(h)},t}(Ns),MonoFilter:function(r){function t(){var e=this;if(!le().useLegacy){var i=le().context.audioContext,n=i.createChannelSplitter(),s=i.createChannelMerger();return s.connect(n),(e=r.call(this,s,n)||this)._merger=s,e}e=r.call(this,null)||this}return Br(t,r),t.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,r.prototype.destroy.call(this)},t}(Ns),TelephoneFilter:function(r){function t(){if(!le().useLegacy){var e=le().context.audioContext,i=e.createBiquadFilter(),n=e.createBiquadFilter(),s=e.createBiquadFilter(),o=e.createBiquadFilter();return i.type="lowpass",_r.setParamValue(i.frequency,2e3),n.type="lowpass",_r.setParamValue(n.frequency,2e3),s.type="highpass",_r.setParamValue(s.frequency,500),o.type="highpass",_r.setParamValue(o.frequency,500),i.connect(n),n.connect(s),s.connect(o),r.call(this,i,o)||this}r.call(this,null)}return Br(t,r),t}(Ns)},SN=0,gb=function(r){function t(e){var i=r.call(this)||this;return i.id=SN++,i.init(e),i}return Br(t,r),t.prototype.set=function(e,i){if(this[e]===void 0)throw new Error("Property with name "+e+" does not exist.");return this[e]=i,this},Object.defineProperty(t.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(e){this._paused=e,this.refreshPaused()},enumerable:!0,configurable:!0}),t.prototype._onPlay=function(){this._playing=!0},t.prototype._onPause=function(){this._playing=!1},t.prototype.init=function(e){this._playing=!1,this._duration=e.source.duration;var i=this._source=e.source.cloneNode(!1);i.src=e.parent.url,i.onplay=this._onPlay.bind(this),i.onpause=this._onPause.bind(this),e.context.on("refresh",this.refresh,this),e.context.on("refreshPaused",this.refreshPaused,this),this._media=e},t.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},t.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(e){this._loop=e,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(e){this._muted=e,this.refresh()},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){var e=this._media.context,i=this._media.parent;this._source.loop=this._loop||i.loop;var n=e.volume*(e.muted?0:1),s=i.volume*(i.muted?0:1),o=this._volume*(this._muted?0:1);this._source.volume=o*n*s,this._source.playbackRate=this._speed*e.speed*i.speed},t.prototype.refreshPaused=function(){var e=this._media.context,i=this._media.parent,n=this._paused||i.paused||e.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",n))},t.prototype.play=function(e){var i=this,n=e.start,s=e.end,o=e.speed,a=e.loop,l=e.volume,u=e.muted;this._speed=o,this._volume=l,this._loop=!!a,this._muted=u,this.refresh(),this.loop&&s!==null&&(this.loop=!1),this._start=n,this._end=s||this._duration,this._start=Math.max(0,this._start-t.PADDING),this._end=Math.min(this._end+t.PADDING,this._duration),this._source.onloadedmetadata=function(){i._source&&(i._source.currentTime=n,i._source.onloadedmetadata=null,i.emit("progress",n,i._duration),li.shared.add(i._onUpdate,i))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},t.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},t.prototype._onComplete=function(){li.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},t.prototype.destroy=function(){li.shared.remove(this._onUpdate,this),this.removeAllListeners();var e=this._source;e&&(e.onended=null,e.onplay=null,e.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},t.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},t.PADDING=.1,t}(ms),yb=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return Br(t,r),t.prototype.init=function(e){this.parent=e,this._source=e.options.source||new Audio,e.url&&(this._source.src=e.url)},t.prototype.create=function(){return new gb(this)},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&this._source.readyState===4},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(t.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),t.prototype.load=function(e){var i=this._source,n=this.parent;if(i.readyState!==4){if(!n.url)return e(new Error("sound.url or sound.source must be set"));i.src=n.url;var s=function(){i.removeEventListener("canplaythrough",o),i.removeEventListener("load",o),i.removeEventListener("abort",a),i.removeEventListener("error",l)},o=function(){s(),n.isLoaded=!0;var h=n.autoPlayStart();e&&e(null,n,h)},a=function(){s(),e&&e(new Error("Sound loading has been aborted"))},l=function(){s();var h="Failed to load audio element (code: "+i.error.code+")";e&&e(new Error(h))};i.addEventListener("canplaythrough",o,!1),i.addEventListener("load",o,!1),i.addEventListener("abort",a,!1),i.addEventListener("error",l,!1),i.load()}else{n.isLoaded=!0;var u=n.autoPlayStart();e&&setTimeout(function(){e(null,n,u)},0)}},t}(ms),vb=function(r){function t(){var e=r.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return Br(t,r),t.prototype.refresh=function(){this.emit("refresh")},t.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(t.prototype,"filters",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},t.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},t.prototype.destroy=function(){this.removeAllListeners()},t}(ms),AN={HTMLAudioMedia:yb,HTMLAudioInstance:gb,HTMLAudioContext:vb},Id=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],Ox,Dp,Up,Gp,_b=(Ox={m4a:"mp4",oga:"ogg"},Dp=document.createElement("audio"),Up={},Gp=/^no$/,Id.forEach(function(r){var t=Ox[r]||r,e=Dp.canPlayType("audio/"+r).replace(Gp,""),i=Dp.canPlayType("audio/"+t).replace(Gp,"");Up[r]=!!e||!!i}),Object.freeze(Up)),CN=/\.(\{([^\}]+)\})(\?.*)?$/;function lv(r){var t=CN,e=typeof r=="string"?r:r.url;if(t.test(e)){for(var i=t.exec(e),n=i[2].split(","),s=n[n.length-1],o=0,a=n.length;o<a;o++){var l=n[o];if(_b[l]){s=l;break}}var u=e.replace(i[1],s);return typeof r!="string"&&(r.extension=s,r.url=u),u}return e}var xb=function(){function r(){}return r.add=function(){r.legacy=le().useLegacy},Object.defineProperty(r,"legacy",{set:function(t){var e=Id;t?e.forEach(function(i){Ln.setExtensionXhrType(i,Ln.XHR_RESPONSE_TYPE.DEFAULT),Ln.setExtensionLoadType(i,Ln.LOAD_TYPE.AUDIO)}):e.forEach(function(i){Ln.setExtensionXhrType(i,Ln.XHR_RESPONSE_TYPE.BUFFER),Ln.setExtensionLoadType(i,Ln.LOAD_TYPE.XHR)})},enumerable:!0,configurable:!0}),r.pre=function(t,e){lv(t),e()},r.use=function(t,e){t.data&&Id.indexOf(t.extension)>-1?t.sound=le().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},r}(),Eb=function(){function r(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return r.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},r.prototype.destroy=function(){this.parent=null},r}(),Rd=function(){function r(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return r.from=function(t){var e={};return typeof t=="string"?e.url=t:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?e.source=t:e=t,(e=Wu({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},e)).url&&(e.url=lv(e.url)),Object.freeze(e),new r(le().useLegacy?new yb:new Pd,e)},Object.defineProperty(r.prototype,"context",{get:function(){return le().context},enumerable:!0,configurable:!0}),r.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},r.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(r.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),r.prototype.addSprites=function(t,e){if(typeof t=="object"){var i={};for(var n in t)i[n]=this.addSprites(n,t[n]);return i}if(typeof t=="string"){var s=new Eb(this,e);return this._sprites[t]=s,s}},r.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},r.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];e!==void 0&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(r.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),r.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},r.prototype.play=function(t,e){var i,n=this;if(typeof t=="string"?i={sprite:o=t,loop:this.loop,complete:e}:typeof t=="function"?(i={}).complete=t:i=t,(i=Wu({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var s=i.sprite,o=this._sprites[s];i.start=o.start,i.end=o.end,i.speed=o.speed||1,i.loop=o.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise(function(l,u){n.autoPlay=!0,n._autoPlayOptions=i,n._preload(function(h,c,f){h?u(h):(i.loaded&&i.loaded(h,c,f),l(f))})});this.singleInstance&&this._removeInstances();var a=this._createInstance();return this._instances.push(a),this.isPlaying=!0,a.once("end",function(){i.complete&&i.complete(n),n._onComplete(a)}),a.once("stop",function(){n._onComplete(a)}),a.play(i),a},r.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},r.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(r.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),r.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(r.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),r.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},r.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},r.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},r.prototype._createInstance=function(){if(r._pool.length>0){var t=r._pool.pop();return t.init(this.media),t}return this.media.create()},r.prototype._poolInstance=function(t){t.destroy(),r._pool.indexOf(t)<0&&r._pool.push(t)},r._pool=[],r}(),Tb=function(){function r(){this.init()}return r.prototype.init=function(){return this.supported&&(this._webAudioContext=new $g),this._htmlAudioContext=new vb,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(r.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"supported",{get:function(){return $g.AudioContext!==null},enumerable:!0,configurable:!0}),r.prototype.add=function(t,e){if(typeof t=="object"){var i={};for(var n in t){var s=this._getOptions(t[n],e);i[n]=this.add(n,s)}return i}if(typeof t=="string"){if(e instanceof Rd)return this._sounds[t]=e,e;s=this._getOptions(e);var o=Rd.from(s);return this._sounds[t]=o,o}},r.prototype._getOptions=function(t,e){var i;return i=typeof t=="string"?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,i=Wu({},i,e||{})},Object.defineProperty(r.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){xb.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),r.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(r.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),r.prototype.togglePauseAll=function(){return this._context.togglePause()},r.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},r.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},r.prototype.toggleMuteAll=function(){return this._context.toggleMute()},r.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},r.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},r.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},r.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},r.prototype.exists=function(t,e){return!!this._sounds[t]},r.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},r.prototype.play=function(t,e){return this.find(t).play(e)},r.prototype.stop=function(t){return this.find(t).stop()},r.prototype.pause=function(t){return this.find(t).pause()},r.prototype.resume=function(t){return this.find(t).resume()},r.prototype.volume=function(t,e){var i=this.find(t);return e!==void 0&&(i.volume=e),i.volume},r.prototype.speed=function(t,e){var i=this.find(t);return e!==void 0&&(i.speed=e),i.speed},r.prototype.duration=function(t){return this.find(t).duration},r.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},r}(),Mx=0,PN={get PLAY_ID(){return Mx},playOnce:function(r,t){var e="alias"+Mx++;return le().add(e,{url:r,preload:!0,autoPlay:!0,loaded:function(i){i&&(le().remove(e),t&&t(i))},complete:function(){le().remove(e),t&&t(null)}}),e},render:function(r,t){var e=document.createElement("canvas");t=Wu({width:512,height:128,fill:"black"},t||{}),e.width=t.width,e.height=t.height;var i=ze.from(e);if(!(r.media instanceof Pd))return i;var n=r.media,s=e.getContext("2d");s.fillStyle=t.fill;for(var o=n.buffer.getChannelData(0),a=Math.ceil(o.length/t.width),l=t.height/2,u=0;u<t.width;u++){for(var h=1,c=-1,f=0;f<a;f++){var p=o[u*a+f];p<h&&(h=p),p>c&&(c=p)}s.fillRect(u,(1+h)*l,1,Math.max(1,(c-h)*l))}return i},resolveUrl:lv,sineTone:function(r,t){r===void 0&&(r=200),t===void 0&&(t=1);var e=Rd.from({singleInstance:!0});if(!(e.media instanceof Pd))return e;for(var i=e.media,n=e.context.audioContext.createBuffer(1,48e3*t,48e3),s=n.getChannelData(0),o=0;o<s.length;o++){var a=r*(o/n.sampleRate)*Math.PI;s[o]=2*Math.sin(a)}return i.buffer=n,e.isLoaded=!0,e},extensions:Id,supported:_b},Od=function(r){return fb=r,r}(new Tb);ov.registerPlugin(xb),Object.defineProperties(Od,{Filterable:{get:function(){return av}},filters:{get:function(){return bN}},htmlaudio:{get:function(){return AN}},Sound:{get:function(){return Rd}},SoundLibrary:{get:function(){return Tb}},SoundSprite:{get:function(){return Eb}},utils:{get:function(){return PN}},webaudio:{get:function(){return wN}},sound:{get:function(){return Od}}});const IN=r=>{console.log(`Loading textures: ${r*100}%`)},RN=async()=>{await sa.load(bL,IN),SL.forEach(r=>Od.add(r.alias,{url:r.src}))};var wb={exports:{}},cf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON=ui,MN=Symbol.for("react.element"),LN=Symbol.for("react.fragment"),FN=Object.prototype.hasOwnProperty,NN=ON.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BN={key:!0,ref:!0,__self:!0,__source:!0};function bb(r,t,e){var i,n={},s=null,o=null;e!==void 0&&(s=""+e),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)FN.call(t,i)&&!BN.hasOwnProperty(i)&&(n[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:MN,type:r,key:s,ref:o,props:n,_owner:NN.current}}cf.Fragment=LN;cf.jsx=bb;cf.jsxs=bb;wb.exports=cf;var ut=wb.exports;const Ga=r=>{let t=r,e;const i=a=>{e=a},n=a=>{t=a,e&&e(t)};return{get:()=>t,set:n,reset:()=>{n(r)},onChange:i}},Hp=Ga(0),Md={...Hp,add:r=>Hp.set(Hp.get()+r)},Lc=Ga(0),Xg=Ga(void 0),zg=Ga(!1),Yu=Ga(localStorage.getItem("isSoundOn")!=="false"),Sb=Ga(()=>{}),Ab=ui.createContext({score:0,highScore:0,isGameEnded:!1,isSoundOn:Yu.get()}),kN=({children:r})=>{const[t,e]=ui.useState(0),[i,n]=ui.useState(0),[s,o]=ui.useState(!1),[a,l]=ui.useState(Yu.get());ui.useEffect(()=>{Md.onChange(h=>{e(h)}),Lc.onChange(h=>{n(h)}),zg.onChange(h=>{o(h)}),Yu.onChange(h=>{localStorage.setItem("isSoundOn",`${h}`),l(h)})},[]);const u={isSoundOn:a,score:t,highScore:i,isGameEnded:s};return ut.jsx(Ab.Provider,{value:u,children:r})},uh=()=>ui.useContext(Ab),DN=()=>{const{highScore:r}=uh();return ut.jsxs("span",{className:"pb_hud-high-score",children:[" ",r]})},UN=r=>r.stopPropagation(),xu=({children:r,color:t,onClick:e})=>ut.jsx("button",{className:"pb_text-button pb_button",style:{backgroundColor:t},onClick:e,children:r}),GN=({back:r})=>ut.jsxs("div",{children:[ut.jsx("p",{children:"Drag the shapes onto the grid and connect the paths"}),ut.jsx("p",{children:"Complete a path by linking one edge of the grid to another (or even the same edge to itself)."}),ut.jsx("p",{children:"When a path has been copleted you score 1 point for each block in the path"}),ut.jsx("p",{children:"The game ends when you can't place the next block"}),ut.jsx(xu,{onClick:r,children:"Back"})]}),HN=({closeMenu:r})=>{const t=()=>ut.jsx("button",{className:"pb_close-button pb_button",onClick:r}),{isSoundOn:e}=uh(),[i,n]=ui.useState(!1);return ut.jsx("div",{className:"pb_overlay",onClick:r,children:ut.jsxs("div",{className:"pb_game-menu",onClick:UN,children:[ut.jsx(t,{}),ut.jsxs("div",{className:"pb_game-menu-content",children:[ut.jsx("h1",{className:"pb_menu-title",children:"Path Blocks"}),i?ut.jsx(GN,{back:()=>n(!1)}):ut.jsxs(ut.Fragment,{children:[Xg.get()&&ut.jsx(xu,{onClick:()=>{var s;(s=Xg.get())==null||s.prompt()},color:"#ff89c4",children:"Install"}),ut.jsx(xu,{onClick:()=>{Yu.set(!e)},color:e?"#dd5255":"#4fb2ff",children:e?"Disable Sounds":"Enable sounds"}),ut.jsx(xu,{onClick:()=>n(!0),color:"#ffff00",children:"How to play"})]})]})]})})},$N=()=>{const[r,t]=ui.useState(!1),e=()=>{t(i=>!i)};return ut.jsxs(ut.Fragment,{children:[ut.jsx("button",{className:"pb_hud-open-menu-button pb_button",onClick:e}),r&&ut.jsx(HN,{closeMenu:e})]})},XN=()=>{const{score:r}=uh();return ut.jsxs("span",{className:"pb_hud-score",children:["Score: ",r]})},zN=()=>ut.jsx(ut.Fragment,{children:ut.jsxs("div",{className:"pb_game-hud",children:[ut.jsxs("div",{className:"pb_game-hud-score-section",children:[ut.jsx(XN,{}),ut.jsx("div",{className:"pb_hud-score-pad"}),ut.jsx(DN,{})]}),ut.jsx($N,{})]})}),jN=()=>{const{score:r,highScore:t}=uh();return ut.jsx("div",{className:"darkness",children:ut.jsxs("div",{className:"pb_popup",children:[ut.jsx("h1",{className:"pb_title",children:"End of game"}),ut.jsxs("p",{className:"pb_your-score",children:["Your score: ",ut.jsx("span",{className:"pb_score",children:r})]}),r>t?ut.jsxs("p",{className:"pb_high-score",children:["Previous high score: ",ut.jsx("span",{className:"pb_score",children:t})]}):ut.jsxs("p",{className:"pb_high-score",children:["High score: ",ut.jsx("span",{className:"pb_score",children:t})]}),ut.jsx(xu,{onClick:Sb.get(),children:"Again!"})]})})},VN=()=>{const{isGameEnded:r}=uh();return ut.jsxs(ut.Fragment,{children:[r&&ut.jsx(jN,{}),ut.jsx(zN,{})]})},WN=()=>ut.jsx(kN,{children:ut.jsx(VN,{})}),YN=()=>({component:ut.jsx(WN,{})});var Mt=(r=>(r.TOP="TOP",r.RIGHT="RIGHT",r.BOTTOM="BOTTOM",r.LEFT="LEFT",r))(Mt||{});const KN=r=>{switch(r){case"TOP":return"BOTTOM";case"RIGHT":return"LEFT";case"BOTTOM":return"TOP";case"LEFT":return"RIGHT"}};var Fc=(r=>(r[r.TOP_TO_LEFT=0]="TOP_TO_LEFT",r[r.TOP_TO_RIGHT=1]="TOP_TO_RIGHT",r[r.BOTTOM_TO_LEFT=2]="BOTTOM_TO_LEFT",r[r.BOTTOM_TO_RIGHT=3]="BOTTOM_TO_RIGHT",r))(Fc||{});const qN=r=>{if(r.toBlockType()!="corner_block")throw Error("Trying to convert straight path to corner type");if(r.start==Mt.TOP||r.end==Mt.TOP){if(r.start==Mt.LEFT||r.end==Mt.LEFT)return 0;if(r.start==Mt.RIGHT||r.end==Mt.RIGHT)return 1}else{if(r.start==Mt.LEFT||r.end==Mt.LEFT)return 2;if(r.start==Mt.RIGHT||r.end==Mt.RIGHT)return 3}throw Error("Error converting to corner type")},ZN=r=>{if(r.toBlockType()=="straight_block"){if(r.start==Mt.LEFT)return Math.PI/2}else switch(qN(r)){case Fc.TOP_TO_LEFT:return Math.PI/2;case Fc.TOP_TO_RIGHT:return Math.PI;case Fc.BOTTOM_TO_RIGHT:return Math.PI*1.5}return 0},Cb=async({path:r,x:t,y:e,renderConfig:i})=>{const n=Eo.from(await sa.load(r.toBlockType()));n.anchor.set(.5,.5),n.width=i.blockWidth,n.height=i.blockWidth;const s=i.blockWidth/2,o=i.blockWidth*t,a=i.blockWidth*e;return n.x=i.xMargin+o+s,n.y=i.yMargin+a+s,n.rotation=ZN(r),n},QN=async r=>await Cb({...r,renderConfig:{...r.renderConfig,xMargin:0,yMargin:0}}),hh=({x:r,y:t,width:e,height:i,borderWidth:n=2,borderColor:s=0,borderAlpha:o=1,fillColor:a=16777215,fillAlpha:l=1})=>{const u=e-n,h=i-n,c=new lh;return c.lineStyle(n,s,o),c.beginFill(a,l),c.drawRect(0,0,u,h),c.endFill(),c.x=r-e/2+n/2,c.y=t-i/2+n/2,c},Pb=(r,t)=>hh({x:r.position.x,y:r.position.y,width:r.width,height:r.height,...t}),Ib=(r,{innerBorderColor:t=16777215,innerBorderWidth:e=1,innerBorderAlpha:i=1})=>{const n=r.borderWidth??0;return hh({x:r.width/2-n+e/2,y:r.width/2-n+e/2,fillAlpha:0,borderColor:t,borderWidth:e,borderAlpha:i,width:r.width-n*2-e,height:r.height-n*2-e})},JN=(r,t={})=>{const e=hh(r);return e.addChild(Ib(r,t)),e},tB=(r,t,e={})=>{const i=Pb(r,t);return i.addChild(Ib({...r,width:r.width,height:r.height,...t,x:r.width/2,y:r.width/2},e)),i};class eB{constructor(t,e){ge(this,"createBlockAndAddToStage",async(t,e,i)=>{const n=await Cb({path:t,x:e,y:i,renderConfig:this.renderConfig});return this.app.stage.addChild(n),n});ge(this,"createPlaceableBlock",async({path:t,x:e,y:i})=>await QN({path:t,x:e,y:i,renderConfig:this.renderConfig}));ge(this,"createEmptySquareSprite",(t,e)=>{const i=this.renderConfig.blockWidth,n={x:this.renderConfig.xMargin+t*i+i/2,y:this.renderConfig.yMargin+e*i+i/2};let s=JN({x:n.x,y:n.y,width:i,height:i,fillColor:14671851,borderColor:12105939,borderWidth:2},{innerBorderWidth:2});return this.app.stage.addChild(s),s});this.app=t,this.renderConfig=e}}class rB{constructor(t,e,i){ge(this,"block");this.x=t,this.y=e,this.rectanlge=i}}class iB{constructor(t,e,i,n=!1){ge(this,"background");this.path=t,this.color=e,this.pipeSprite=i,this._isDestroyed=n,this.background=tB(i,{fillColor:e.light,borderColor:0,borderWidth:1});const s=i.parent;s.removeChild(i),s.addChild(this.background),s.addChild(i)}connectsSide(t){if(this.path.start==t)return this.path.end;if(this.path.end==t)return this.path.start}destroy(){var t,e;this._isDestroyed=!0,(t=this.pipeSprite.parent)==null||t.removeChild(this.pipeSprite),(e=this.background.parent)==null||e.removeChild(this.background)}markDestroyed(){this._isDestroyed=!0}isDestroyed(){return this._isDestroyed}}const nB=(r,t)=>{const e=(o,a)=>o.x==0&&a==Mt.LEFT||o.y==0&&a==Mt.TOP||o.x==t.length-1&&a==Mt.RIGHT||o.y==t[0].length-1&&a==Mt.BOTTOM,i=(o,a)=>{switch(a){case Mt.TOP:return t[o.x][o.y-1];case Mt.RIGHT:return t[o.x+1][o.y];case Mt.BOTTOM:return t[o.x][o.y+1];case Mt.LEFT:return t[o.x-1][o.y]}},n=(o,a)=>{var f;if(o.block===void 0||o.block.isDestroyed())return{isComplete:!1,isLoop:!1};if(e(o,a))return r!=o?{isComplete:!0,isLoop:!1,linkedSquares:Array(o)}:{isComplete:!0,isLoop:!1,linkedSquares:Array()};const l=i(o,a);if(l===r)return{isComplete:!1,isLoop:!0,linkedSquares:Array(l,o)};const u=KN(a);if(l.block===void 0)return{isComplete:!1,isLoop:!1};const h=l.block.connectsSide(u);if(h===void 0)return{isComplete:!1,isLoop:!1};const c=n(l,h);return r!=o&&((f=c.linkedSquares)==null||f.push(o)),c};if(!r.block)throw Error("start square has no block");const s=n(r,r.block.path.start);if(s.isLoop)return s;if(s.isComplete&&s.linkedSquares){const o=n(r,r.block.path.end);o.isComplete&&o.linkedSquares?(o.linkedSquares.reverse(),s.linkedSquares.push(r,...o.linkedSquares)):s.isComplete=!1}return s};class sB extends lh{constructor(t,e){super(t),this.text=e,this.addChild(e)}}const oB=new $i({fontFamily:"Arial",fontSize:42,fontWeight:"bold"}),aB=({text:r,x:t=0,y:e=0,textStyle:i={},padding:n={vertical:10,horizontal:10},paddingFillColor:s,borderColor:o,renderConfig:a,width:l,height:u})=>{const h=new $i({...oB,...i});h.fontSize=h.fontSize*a.fontScale,n.horizontal*=a.fontScale,n.vertical*=a.fontScale;const c=new ev(r,h);c.anchor.set(.5),c.x=t,c.y=e;const f=Math.max(l??0,c.width)+n.horizontal*2,p=Math.max(u??0,c.height)+n.vertical*2,m=hh({x:t,y:e,width:f,height:p,fillColor:s??0,fillAlpha:s?1:0,borderColor:o??0,borderAlpha:o?1:0});c.x=m.width/2,c.y=m.height/2;const x=new sB(m.geometry,c);return x.x=t-x.width/2,x.y=e-x.height/2,x},lB=(r,t,e)=>{var a,l,u;const i=aB({text:`+${t}`,x:(a=r.block)==null?void 0:a.pipeSprite.x,y:(l=r.block)==null?void 0:l.pipeSprite.y,renderConfig:e,textStyle:{stroke:3359880}});(u=r.block)==null||u.pipeSprite.parent.addChild(i);const n=new ur;n.stop();const s=i.y-i.height/3;let o=!1;n.add(()=>{const h=n.deltaMS/1e3;i.alpha<=0&&n.destroy(),!o&&i.y>s?i.y-=h*5*i.height:(o=!0,i.y+=h*i.height,i.alpha-=h)}),n.start()},uB=async r=>(e=1)=>{Yu.get()&&Od.play(r,{speed:e})},hB=300,cB=1.2,Lx=80,Fx=async(r,t)=>{var s;const e=await uB("block_success"),i=o=>{var a;r.isComplete&&(Md.add(1),lB(o,1,t)),(a=o.block)==null||a.destroy(),o.block=void 0},n=(o,a=hB)=>{const l=o.pop();l&&(a<Lx&&(a=Lx),i(l),e(250/a),setTimeout(()=>n(o,a/cB),a))};(s=r.linkedSquares)==null||s.forEach(o=>{var a;o.block&&((a=o.block)==null||a.markDestroyed(),o.block.pipeSprite.tint=11141120)}),n(r.linkedSquares??[])};class Ku{}ge(Ku,"red",{light:15665674,dark:15606306}),ge(Ku,"green",{light:5635925,dark:15606306});class dB{constructor(t,e){ge(this,"grid");this.spriteCreator=t,this.renderConfig=e,this.grid=new Array;for(let i=0;i<e.rows;i++){this.grid[i]=new Array;for(let n=0;n<e.columns;n++){const s=t.createEmptySquareSprite(i,n);this.grid[i][n]=new rB(i,n,s)}}}async addBlock(t,e,i){const n=this.grid[t][e];if(n.block!=null)throw Error(`Trying to add block to square with a block in it already at ${t},${e}`);const s=await this.spriteCreator.createBlockAndAddToStage(i,t,e);n.block=new iB(i,Ku.red,s);const o=nB(n,this.grid);o.isLoop&&o.linkedSquares?Fx(o,this.renderConfig):o.isComplete&&o.linkedSquares&&Fx(o,this.renderConfig)}async addShape(t){if(this.isShapePositionValid(t)){const e=this.convertShapeToGridPositions(t);await Promise.all(e.map(async i=>{await this.addBlock(i.x,i.y,i.block.path)}))}this.resetGridColor()}isShapePositionValid(t){const e=this.convertShapeToGridPositions(t);return this.areAllValidPositions(e)}highlightShapeOnGrid(t){this.resetGridColor();const e=this.convertShapeToGridPositions(t);this.areAllValidPositions(e)&&(e==null||e.forEach(i=>this.highlightSquare(i)))}areAllValidPositions(t){return this.areAllPositionsInGrid(t)?this.areAllSquaresUnoccupied(t):!1}areAllSquaresUnoccupied(t){return t.every(e=>!this.grid[e.x][e.y].block)}areAllPositionsInGrid(t){return t.every(e=>e.x>=0&&e.y>=0&&e.x<this.grid.length&&e.y<this.grid[0].length)}convertShapeToGridPositions(t){const e=t.placeableBlocks[0],i=this.getFirstBlockPositionInPixels(t),n=this.pixelsToGrid(i.x,i.y),s=Array();s.push({...n,block:e});for(let o=1;o<t.placeableBlocks.length;o++){const a=t.placeableBlocks[o],l={x:a.x-e.x,y:a.y-e.y},u={x:n.x+l.x,y:n.y+l.y};s.push({...u,block:a})}return s}getFirstBlockPositionInPixels(t){const e=t.placeableBlocks[0].pipeSprite,i={x:e.position.x,y:e.position.y};return i.x+=t.blockContainer.x-e.width/2,i.y+=t.blockContainer.y-e.width/2,i}highlightSquare(t){const i=(this.grid[t.x]??Array())[t.y];i&&(i.rectanlge.tint=14540253)}resetGridColor(){this.grid.forEach(t=>t.forEach(e=>e.rectanlge.tint=16777215))}pixelsToGrid(t,e){const i=this.grid[0][0].rectanlge,n=i.x-i.width/2,s=Math.floor((t-n)/i.width),o=i.y-i.width/2,a=Math.floor((e-o)/i.width);return{x:s,y:a}}}const fB=r=>{const i=r.width,n=r.height,s=Math.min(i,n),o=s==n;let a=s/10;const l=o?i:n,u=9+3*2+1;for(;a*u>l;)a-=1;const h=i/2-9/2*a,c=n/2-9/2*a,f=a/50;return{xMargin:h,yMargin:c,blockWidth:a,landscape:o,columns:9,rows:9,fontScale:f,screenWidth:i,screenHeight:n}};var pB=9007199254740991,mB="[object Arguments]",gB="[object Function]",yB="[object GeneratorFunction]",vB=typeof me=="object"&&me&&me.Object===Object&&me,_B=typeof self=="object"&&self&&self.Object===Object&&self,xB=vB||_B||Function("return this")();function EB(r,t){for(var e=-1,i=t.length,n=r.length;++e<i;)r[n+e]=t[e];return r}var uv=Object.prototype,TB=uv.hasOwnProperty,Rb=uv.toString,Nx=xB.Symbol,wB=uv.propertyIsEnumerable,Bx=Nx?Nx.isConcatSpreadable:void 0;function Ob(r,t,e,i,n){var s=-1,o=r.length;for(e||(e=bB),n||(n=[]);++s<o;){var a=r[s];t>0&&e(a)?t>1?Ob(a,t-1,e,i,n):EB(n,a):i||(n[n.length]=a)}return n}function bB(r){return CB(r)||AB(r)||!!(Bx&&r&&r[Bx])}function SB(r){var t=r?r.length:0;return t?Ob(r,1):[]}function AB(r){return IB(r)&&TB.call(r,"callee")&&(!wB.call(r,"callee")||Rb.call(r)==mB)}var CB=Array.isArray;function PB(r){return r!=null&&OB(r.length)&&!RB(r)}function IB(r){return LB(r)&&PB(r)}function RB(r){var t=MB(r)?Rb.call(r):"";return t==gB||t==yB}function OB(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=pB}function MB(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function LB(r){return!!r&&typeof r=="object"}var FB=SB;const Mb=ls(FB);var Ld={exports:{}};Ld.exports;(function(r,t){var e=200,i="Expected a function",n="__lodash_hash_undefined__",s=1,o=2,a=1/0,l=9007199254740991,u=17976931348623157e292,h=NaN,c="[object Arguments]",f="[object Array]",p="[object Boolean]",m="[object Date]",x="[object Error]",T="[object Function]",v="[object GeneratorFunction]",E="[object Map]",_="[object Number]",w="[object Object]",A="[object Promise]",M="[object RegExp]",I="[object Set]",P="[object String]",U="[object Symbol]",B="[object WeakMap]",st="[object ArrayBuffer]",X="[object DataView]",O="[object Float32Array]",G="[object Float64Array]",tt="[object Int8Array]",at="[object Int16Array]",et="[object Int32Array]",N="[object Uint8Array]",Q="[object Uint8ClampedArray]",L="[object Uint16Array]",D="[object Uint32Array]",nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_t=/^\w*$/,yt=/^\./,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Bt=/^\s+|\s+$/g,Y=/\\(\\)?/g,ne=/^[-+]0x[0-9a-f]+$/i,Kt=/^0b[01]+$/i,pt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Ht=/^(?:0|[1-9]\d*)$/,vt={};vt[O]=vt[G]=vt[tt]=vt[at]=vt[et]=vt[N]=vt[Q]=vt[L]=vt[D]=!0,vt[c]=vt[f]=vt[st]=vt[p]=vt[X]=vt[m]=vt[x]=vt[T]=vt[E]=vt[_]=vt[w]=vt[M]=vt[I]=vt[P]=vt[B]=!1;var Te=parseInt,ir=typeof me=="object"&&me&&me.Object===Object&&me,zi=typeof self=="object"&&self&&self.Object===Object&&self,Me=ir||zi||Function("return this")(),To=t&&!t.nodeType&&t,wo=To&&!0&&r&&!r.nodeType&&r,Ha=wo&&wo.exports===To,bo=Ha&&ir.process,vi=function(){try{return bo&&bo.binding("util")}catch{}}(),So=vi&&vi.isTypedArray;function $a(y,b){for(var R=-1,k=y?y.length:0;++R<k;)if(b(y[R],R,y))return!0;return!1}function Xa(y,b,R,k){for(var K=y.length,j=R+(k?1:-1);k?j--:++j<K;)if(b(y[j],j,y))return j;return-1}function za(y){return function(b){return b==null?void 0:b[y]}}function ja(y,b){for(var R=-1,k=Array(y);++R<y;)k[R]=b(R);return k}function Xr(y){return function(b){return y(b)}}function ji(y,b){return y==null?void 0:y[b]}function Vi(y){var b=!1;if(y!=null&&typeof y.toString!="function")try{b=!!(y+"")}catch{}return b}function gs(y){var b=-1,R=Array(y.size);return y.forEach(function(k,K){R[++b]=[K,k]}),R}function se(y,b){return function(R){return y(b(R))}}function We(y){var b=-1,R=Array(y.size);return y.forEach(function(k){R[++b]=k}),R}var Va=Array.prototype,ys=Function.prototype,_i=Object.prototype,vs=Me["__core-js_shared__"],Ao=function(){var y=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Co=ys.toString,Le=_i.hasOwnProperty,we=_i.toString,Wi=RegExp("^"+Co.call(Le).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xi=Me.Symbol,Ei=Me.Uint8Array,fr=_i.propertyIsEnumerable,Wa=Va.splice,Ya=se(Object.keys,Object),Ka=Math.max,_s=Ir(Me,"DataView"),Yi=Ir(Me,"Map"),pr=Ir(Me,"Promise"),zr=Ir(Me,"Set"),Ki=Ir(Me,"WeakMap"),oe=Ir(Object,"create"),qa=qe(_s),Za=qe(Yi),Qa=qe(pr),Ja=qe(zr),tl=qe(Ki),Wt=xi?xi.prototype:void 0,xs=Wt?Wt.valueOf:void 0,Po=Wt?Wt.toString:void 0;function jr(y){var b=-1,R=y?y.length:0;for(this.clear();++b<R;){var k=y[b];this.set(k[0],k[1])}}function el(){this.__data__=oe?oe(null):{}}function rl(y){return this.has(y)&&delete this.__data__[y]}function ae(y){var b=this.__data__;if(oe){var R=b[y];return R===n?void 0:R}return Le.call(b,y)?b[y]:void 0}function il(y){var b=this.__data__;return oe?b[y]!==void 0:Le.call(b,y)}function nl(y,b){var R=this.__data__;return R[y]=oe&&b===void 0?n:b,this}jr.prototype.clear=el,jr.prototype.delete=rl,jr.prototype.get=ae,jr.prototype.has=il,jr.prototype.set=nl;function mr(y){var b=-1,R=y?y.length:0;for(this.clear();++b<R;){var k=y[b];this.set(k[0],k[1])}}function sl(){this.__data__=[]}function ol(y){var b=this.__data__,R=Sn(b,y);if(R<0)return!1;var k=b.length-1;return R==k?b.pop():Wa.call(b,R,1),!0}function Vr(y){var b=this.__data__,R=Sn(b,y);return R<0?void 0:b[R][1]}function al(y){return Sn(this.__data__,y)>-1}function ll(y,b){var R=this.__data__,k=Sn(R,y);return k<0?R.push([y,b]):R[k][1]=b,this}mr.prototype.clear=sl,mr.prototype.delete=ol,mr.prototype.get=Vr,mr.prototype.has=al,mr.prototype.set=ll;function kt(y){var b=-1,R=y?y.length:0;for(this.clear();++b<R;){var k=y[b];this.set(k[0],k[1])}}function ul(){this.__data__={hash:new jr,map:new(Yi||mr),string:new jr}}function hl(y){return Pn(this,y).delete(y)}function cl(y){return Pn(this,y).get(y)}function dl(y){return Pn(this,y).has(y)}function fl(y,b){return Pn(this,y).set(y,b),this}kt.prototype.clear=ul,kt.prototype.delete=hl,kt.prototype.get=cl,kt.prototype.has=dl,kt.prototype.set=fl;function bn(y){var b=-1,R=y?y.length:0;for(this.__data__=new kt;++b<R;)this.add(y[b])}function Wr(y){return this.__data__.set(y,n),this}function pl(y){return this.__data__.has(y)}bn.prototype.add=bn.prototype.push=Wr,bn.prototype.has=pl;function Ye(y){this.__data__=new mr(y)}function ml(){this.__data__=new mr}function gl(y){return this.__data__.delete(y)}function Es(y){return this.__data__.get(y)}function Ts(y){return this.__data__.has(y)}function yl(y,b){var R=this.__data__;if(R instanceof mr){var k=R.__data__;if(!Yi||k.length<e-1)return k.push([y,b]),this;R=this.__data__=new kt(k)}return R.set(y,b),this}Ye.prototype.clear=ml,Ye.prototype.delete=gl,Ye.prototype.get=Es,Ye.prototype.has=Ts,Ye.prototype.set=yl;function vl(y,b){var R=Qr(y)||Oo(y)?ja(y.length,String):[],k=R.length,K=!!k;for(var j in y)(b||Le.call(y,j))&&!(K&&(j=="length"||Rr(j,k)))&&R.push(j);return R}function Sn(y,b){for(var R=y.length;R--;)if(Ro(y[R][0],b))return R;return-1}function Io(y,b){b=de(b,y)?[b]:ce(b);for(var R=0,k=b.length;y!=null&&R<k;)y=y[Ti(b[R++])];return R&&R==k?y:void 0}function _l(y){return we.call(y)}function xl(y,b){return y!=null&&b in Object(y)}function ws(y,b,R,k,K){return y===b?!0:y==null||b==null||!wi(y)&&!d(b)?y!==y&&b!==b:El(y,b,ws,R,k,K)}function El(y,b,R,k,K,j){var wt=Qr(y),St=Qr(b),Nt=f,Se=f;wt||(Nt=nr(y),Nt=Nt==c?w:Nt),St||(Se=nr(b),Se=Se==c?w:Se);var Ze=Nt==w&&!Vi(y),sr=Se==w&&!Vi(b),Ae=Nt==Se;if(Ae&&!Ze)return j||(j=new Ye),wt||S(y)?Cn(y,b,R,k,K,j):Kr(y,b,Nt,R,k,K,j);if(!(K&o)){var Or=Ze&&Le.call(y,"__wrapped__"),Mr=sr&&Le.call(b,"__wrapped__");if(Or||Mr){var Rn=Or?y.value():y,Qi=Mr?b.value():b;return j||(j=new Ye),R(Rn,Qi,k,K,j)}}return Ae?(j||(j=new Ye),Pl(y,b,R,k,K,j)):!1}function Tl(y,b,R,k){var K=R.length,j=K,wt=!k;if(y==null)return!j;for(y=Object(y);K--;){var St=R[K];if(wt&&St[2]?St[1]!==y[St[0]]:!(St[0]in y))return!1}for(;++K<j;){St=R[K];var Nt=St[0],Se=y[Nt],Ze=St[1];if(wt&&St[2]){if(Se===void 0&&!(Nt in y))return!1}else{var sr=new Ye;if(k)var Ae=k(Se,Ze,Nt,y,b,sr);if(!(Ae===void 0?ws(Ze,Se,k,s|o,sr):Ae))return!1}}return!0}function wl(y){if(!wi(y)||Ss(y))return!1;var b=Mo(y)||Vi(y)?Wi:pt;return b.test(qe(y))}function bs(y){return d(y)&&Ps(y.length)&&!!vt[we.call(y)]}function An(y){return typeof y=="function"?y:y==null?Rt:typeof y=="object"?Qr(y)?Yr(y[0],y[1]):Sl(y):Ft(y)}function bl(y){if(!As(y))return Ya(y);var b=[];for(var R in Object(y))Le.call(y,R)&&R!="constructor"&&b.push(R);return b}function Sl(y){var b=Il(y);return b.length==1&&b[0][2]?In(b[0][0],b[0][1]):function(R){return R===y||Tl(R,y,b)}}function Yr(y,b){return de(y)&&be(b)?In(Ti(y),b):function(R){var k=lt(R,y);return k===void 0&&k===b?dt(R,y):ws(b,k,void 0,s|o)}}function Al(y){return function(b){return Io(b,y)}}function Ke(y){if(typeof y=="string")return y;if(g(y))return Po?Po.call(y):"";var b=y+"";return b=="0"&&1/y==-a?"-0":b}function ce(y){return Qr(y)?y:Ol(y)}function Cl(y){return function(b,R,k){var K=Object(b);if(!Cs(b)){var j=An(R);b=gt(b),R=function(St){return j(K[St],St,K)}}var wt=y(b,R,k);return wt>-1?K[j?b[wt]:wt]:void 0}}function Cn(y,b,R,k,K,j){var wt=K&o,St=y.length,Nt=b.length;if(St!=Nt&&!(wt&&Nt>St))return!1;var Se=j.get(y);if(Se&&j.get(b))return Se==b;var Ze=-1,sr=!0,Ae=K&s?new bn:void 0;for(j.set(y,b),j.set(b,y);++Ze<St;){var Or=y[Ze],Mr=b[Ze];if(k)var Rn=wt?k(Mr,Or,Ze,b,y,j):k(Or,Mr,Ze,y,b,j);if(Rn!==void 0){if(Rn)continue;sr=!1;break}if(Ae){if(!$a(b,function(Qi,Is){if(!Ae.has(Is)&&(Or===Qi||R(Or,Qi,k,K,j)))return Ae.add(Is)})){sr=!1;break}}else if(!(Or===Mr||R(Or,Mr,k,K,j))){sr=!1;break}}return j.delete(y),j.delete(b),sr}function Kr(y,b,R,k,K,j,wt){switch(R){case X:if(y.byteLength!=b.byteLength||y.byteOffset!=b.byteOffset)return!1;y=y.buffer,b=b.buffer;case st:return!(y.byteLength!=b.byteLength||!k(new Ei(y),new Ei(b)));case p:case m:case _:return Ro(+y,+b);case x:return y.name==b.name&&y.message==b.message;case M:case P:return y==b+"";case E:var St=gs;case I:var Nt=j&o;if(St||(St=We),y.size!=b.size&&!Nt)return!1;var Se=wt.get(y);if(Se)return Se==b;j|=s,wt.set(y,b);var Ze=Cn(St(y),St(b),k,K,j,wt);return wt.delete(y),Ze;case U:if(xs)return xs.call(y)==xs.call(b)}return!1}function Pl(y,b,R,k,K,j){var wt=K&o,St=gt(y),Nt=St.length,Se=gt(b),Ze=Se.length;if(Nt!=Ze&&!wt)return!1;for(var sr=Nt;sr--;){var Ae=St[sr];if(!(wt?Ae in b:Le.call(b,Ae)))return!1}var Or=j.get(y);if(Or&&j.get(b))return Or==b;var Mr=!0;j.set(y,b),j.set(b,y);for(var Rn=wt;++sr<Nt;){Ae=St[sr];var Qi=y[Ae],Is=b[Ae];if(k)var dv=wt?k(Is,Qi,Ae,b,y,j):k(Qi,Is,Ae,y,b,j);if(!(dv===void 0?Qi===Is||R(Qi,Is,k,K,j):dv)){Mr=!1;break}Rn||(Rn=Ae=="constructor")}if(Mr&&!Rn){var ch=y.constructor,dh=b.constructor;ch!=dh&&"constructor"in y&&"constructor"in b&&!(typeof ch=="function"&&ch instanceof ch&&typeof dh=="function"&&dh instanceof dh)&&(Mr=!1)}return j.delete(y),j.delete(b),Mr}function Pn(y,b){var R=y.__data__;return qi(b)?R[typeof b=="string"?"string":"hash"]:R.map}function Il(y){for(var b=gt(y),R=b.length;R--;){var k=b[R],K=y[k];b[R]=[k,K,be(K)]}return b}function Ir(y,b){var R=ji(y,b);return wl(R)?R:void 0}var nr=_l;(_s&&nr(new _s(new ArrayBuffer(1)))!=X||Yi&&nr(new Yi)!=E||pr&&nr(pr.resolve())!=A||zr&&nr(new zr)!=I||Ki&&nr(new Ki)!=B)&&(nr=function(y){var b=we.call(y),R=b==w?y.constructor:void 0,k=R?qe(R):void 0;if(k)switch(k){case qa:return X;case Za:return E;case Qa:return A;case Ja:return I;case tl:return B}return b});function Rl(y,b,R){b=de(b,y)?[b]:ce(b);for(var k,K=-1,wt=b.length;++K<wt;){var j=Ti(b[K]);if(!(k=y!=null&&R(y,j)))break;y=y[j]}if(k)return k;var wt=y?y.length:0;return!!wt&&Ps(wt)&&Rr(j,wt)&&(Qr(y)||Oo(y))}function Rr(y,b){return b=b??l,!!b&&(typeof y=="number"||Ht.test(y))&&y>-1&&y%1==0&&y<b}function de(y,b){if(Qr(y))return!1;var R=typeof y;return R=="number"||R=="symbol"||R=="boolean"||y==null||g(y)?!0:_t.test(y)||!nt.test(y)||b!=null&&y in Object(b)}function qi(y){var b=typeof y;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?y!=="__proto__":y===null}function Ss(y){return!!Ao&&Ao in y}function As(y){var b=y&&y.constructor,R=typeof b=="function"&&b.prototype||_i;return y===R}function be(y){return y===y&&!wi(y)}function In(y,b){return function(R){return R==null?!1:R[y]===b&&(b!==void 0||y in Object(R))}}var Ol=gr(function(y){y=W(y);var b=[];return yt.test(y)&&b.push(""),y.replace(Ut,function(R,k,K,j){b.push(K?j.replace(Y,"$1"):k||R)}),b});function Ti(y){if(typeof y=="string"||g(y))return y;var b=y+"";return b=="0"&&1/y==-a?"-0":b}function qe(y){if(y!=null){try{return Co.call(y)}catch{}try{return y+""}catch{}}return""}function qr(y,b,R){var k=y?y.length:0;if(!k)return-1;var K=R==null?0:z(R);return K<0&&(K=Ka(k+K,0)),Xa(y,An(b),K)}var Zr=Cl(qr);function gr(y,b){if(typeof y!="function"||b&&typeof b!="function")throw new TypeError(i);var R=function(){var k=arguments,K=b?b.apply(this,k):k[0],j=R.cache;if(j.has(K))return j.get(K);var wt=y.apply(this,k);return R.cache=j.set(K,wt),wt};return R.cache=new(gr.Cache||kt),R}gr.Cache=kt;function Ro(y,b){return y===b||y!==y&&b!==b}function Oo(y){return Zi(y)&&Le.call(y,"callee")&&(!fr.call(y,"callee")||we.call(y)==c)}var Qr=Array.isArray;function Cs(y){return y!=null&&Ps(y.length)&&!Mo(y)}function Zi(y){return d(y)&&Cs(y)}function Mo(y){var b=wi(y)?we.call(y):"";return b==T||b==v}function Ps(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=l}function wi(y){var b=typeof y;return!!y&&(b=="object"||b=="function")}function d(y){return!!y&&typeof y=="object"}function g(y){return typeof y=="symbol"||d(y)&&we.call(y)==U}var S=So?Xr(So):bs;function C(y){if(!y)return y===0?y:0;if(y=F(y),y===a||y===-a){var b=y<0?-1:1;return b*u}return y===y?y:0}function z(y){var b=C(y),R=b%1;return b===b?R?b-R:b:0}function F(y){if(typeof y=="number")return y;if(g(y))return h;if(wi(y)){var b=typeof y.valueOf=="function"?y.valueOf():y;y=wi(b)?b+"":b}if(typeof y!="string")return y===0?y:+y;y=y.replace(Bt,"");var R=Kt.test(y);return R||Gt.test(y)?Te(y.slice(2),R?2:8):ne.test(y)?h:+y}function W(y){return y==null?"":Ke(y)}function lt(y,b,R){var k=y==null?void 0:Io(y,b);return k===void 0?R:k}function dt(y,b){return y!=null&&Rl(y,b,xl)}function gt(y){return Cs(y)?vl(y):bl(y)}function Rt(y){return y}function Ft(y){return de(y)?za(Ti(y)):Al(y)}r.exports=Zr})(Ld,Ld.exports);var NB=Ld.exports;const BB=ls(NB),kB=(r,t)=>BB(r,t)!==void 0,DB=(r,t)=>{r.forEach(i=>i.enable());const e=r.filter(i=>!UB(i.placeableBlocks,t));return e.length>0&&e.forEach(i=>i.disable()),e.length<r.length},UB=(r,t)=>{const e=s=>s.x>=0&&s.y>=0&&s.x<t.length&&s.y<t[0].length,i=(s,o)=>{const a=s[0];return s.filter(u=>{if(u===a)return!0;const h={x:o.x+(u.x-a.x),y:o.y+(u.y-a.y)};if(!e(h))return!1;const c=t[h.x][h.y].block;return c===void 0||c.isDestroyed()}).length===s.length},n=Mb(t).filter(s=>s.block===void 0||s.block.isDestroyed());return kB(n,s=>i(r,s))},GB=(r,t,e)=>{let i,n=!1;const s=l=>{i=l.data,n=!0,a(),e.eventMode="static"},o=async()=>{n&&(n=!1,i=void 0,t.isShapePositionValid(r)?(await t.addShape(r),r.respawn()):r.moveBackToInitialPosition())},a=()=>{if(n){const l=i==null?void 0:i.getLocalPosition(r.blockContainer.parent);l&&(r.blockContainer.position.x=l.x-r.blockContainer.width/2,r.blockContainer.position.y=l.y-r.blockContainer.height/2),t.highlightShapeOnGrid(r)}};r.blockContainer.eventMode="static",r.blockContainer.on("mousedown",s).on("touchstart",s),e.on("mouseup",o).on("mouseupoutside",o).on("touchend",o).on("touchendoutside",o),e.on("mousemove",a).on("touchmove",a)};var Fd={exports:{}};Fd.exports;(function(r,t){var e=200,i="Expected a function",n="__lodash_hash_undefined__",s=1,o=2,a=1/0,l=9007199254740991,u="[object Arguments]",h="[object Array]",c="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",x="[object GeneratorFunction]",T="[object Map]",v="[object Number]",E="[object Object]",_="[object Promise]",w="[object RegExp]",A="[object Set]",M="[object String]",I="[object Symbol]",P="[object WeakMap]",U="[object ArrayBuffer]",B="[object DataView]",st="[object Float32Array]",X="[object Float64Array]",O="[object Int8Array]",G="[object Int16Array]",tt="[object Int32Array]",at="[object Uint8Array]",et="[object Uint8ClampedArray]",N="[object Uint16Array]",Q="[object Uint32Array]",L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D=/^\w*$/,nt=/^\./,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/[\\^$.*+?()[\]{}|]/g,Ut=/\\(\\)?/g,It=/^\[object .+?Constructor\]$/,Bt=/^(?:0|[1-9]\d*)$/,Y={};Y[st]=Y[X]=Y[O]=Y[G]=Y[tt]=Y[at]=Y[et]=Y[N]=Y[Q]=!0,Y[u]=Y[h]=Y[U]=Y[c]=Y[B]=Y[f]=Y[p]=Y[m]=Y[T]=Y[v]=Y[E]=Y[w]=Y[A]=Y[M]=Y[P]=!1;var ne=typeof me=="object"&&me&&me.Object===Object&&me,Kt=typeof self=="object"&&self&&self.Object===Object&&self,pt=ne||Kt||Function("return this")(),Gt=t&&!t.nodeType&&t,Ht=Gt&&!0&&r&&!r.nodeType&&r,vt=Ht&&Ht.exports===Gt,Te=vt&&ne.process,ir=function(){try{return Te&&Te.binding("util")}catch{}}(),zi=ir&&ir.isTypedArray;function Me(d,g){for(var S=-1,C=d?d.length:0;++S<C;)if(g(d[S],S,d))return!0;return!1}function To(d){return function(g){return g==null?void 0:g[d]}}function wo(d,g){for(var S=-1,C=Array(d);++S<d;)C[S]=g(S);return C}function Ha(d){return function(g){return d(g)}}function bo(d,g){return d==null?void 0:d[g]}function vi(d){var g=!1;if(d!=null&&typeof d.toString!="function")try{g=!!(d+"")}catch{}return g}function So(d){var g=-1,S=Array(d.size);return d.forEach(function(C,z){S[++g]=[z,C]}),S}function $a(d,g){return function(S){return d(g(S))}}function Xa(d){var g=-1,S=Array(d.size);return d.forEach(function(C){S[++g]=C}),S}var za=Array.prototype,ja=Function.prototype,Xr=Object.prototype,ji=pt["__core-js_shared__"],Vi=function(){var d=/[^.]+$/.exec(ji&&ji.keys&&ji.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),gs=ja.toString,se=Xr.hasOwnProperty,We=Xr.toString,Va=RegExp("^"+gs.call(se).replace(yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ys=pt.Symbol,_i=pt.Uint8Array,vs=Xr.propertyIsEnumerable,Ao=za.splice,Co=$a(Object.keys,Object),Le=Ke(pt,"DataView"),we=Ke(pt,"Map"),Wi=Ke(pt,"Promise"),xi=Ke(pt,"Set"),Ei=Ke(pt,"WeakMap"),fr=Ke(Object,"create"),Wa=de(Le),Ya=de(we),Ka=de(Wi),_s=de(xi),Yi=de(Ei),pr=ys?ys.prototype:void 0,zr=pr?pr.valueOf:void 0,Ki=pr?pr.toString:void 0;function oe(d){var g=-1,S=d?d.length:0;for(this.clear();++g<S;){var C=d[g];this.set(C[0],C[1])}}function qa(){this.__data__=fr?fr(null):{}}function Za(d){return this.has(d)&&delete this.__data__[d]}function Qa(d){var g=this.__data__;if(fr){var S=g[d];return S===n?void 0:S}return se.call(g,d)?g[d]:void 0}function Ja(d){var g=this.__data__;return fr?g[d]!==void 0:se.call(g,d)}function tl(d,g){var S=this.__data__;return S[d]=fr&&g===void 0?n:g,this}oe.prototype.clear=qa,oe.prototype.delete=Za,oe.prototype.get=Qa,oe.prototype.has=Ja,oe.prototype.set=tl;function Wt(d){var g=-1,S=d?d.length:0;for(this.clear();++g<S;){var C=d[g];this.set(C[0],C[1])}}function xs(){this.__data__=[]}function Po(d){var g=this.__data__,S=Wr(g,d);if(S<0)return!1;var C=g.length-1;return S==C?g.pop():Ao.call(g,S,1),!0}function jr(d){var g=this.__data__,S=Wr(g,d);return S<0?void 0:g[S][1]}function el(d){return Wr(this.__data__,d)>-1}function rl(d,g){var S=this.__data__,C=Wr(S,d);return C<0?S.push([d,g]):S[C][1]=g,this}Wt.prototype.clear=xs,Wt.prototype.delete=Po,Wt.prototype.get=jr,Wt.prototype.has=el,Wt.prototype.set=rl;function ae(d){var g=-1,S=d?d.length:0;for(this.clear();++g<S;){var C=d[g];this.set(C[0],C[1])}}function il(){this.__data__={hash:new oe,map:new(we||Wt),string:new oe}}function nl(d){return Yr(this,d).delete(d)}function mr(d){return Yr(this,d).get(d)}function sl(d){return Yr(this,d).has(d)}function ol(d,g){return Yr(this,d).set(d,g),this}ae.prototype.clear=il,ae.prototype.delete=nl,ae.prototype.get=mr,ae.prototype.has=sl,ae.prototype.set=ol;function Vr(d){var g=-1,S=d?d.length:0;for(this.__data__=new ae;++g<S;)this.add(d[g])}function al(d){return this.__data__.set(d,n),this}function ll(d){return this.__data__.has(d)}Vr.prototype.add=Vr.prototype.push=al,Vr.prototype.has=ll;function kt(d){this.__data__=new Wt(d)}function ul(){this.__data__=new Wt}function hl(d){return this.__data__.delete(d)}function cl(d){return this.__data__.get(d)}function dl(d){return this.__data__.has(d)}function fl(d,g){var S=this.__data__;if(S instanceof Wt){var C=S.__data__;if(!we||C.length<e-1)return C.push([d,g]),this;S=this.__data__=new ae(C)}return S.set(d,g),this}kt.prototype.clear=ul,kt.prototype.delete=hl,kt.prototype.get=cl,kt.prototype.has=dl,kt.prototype.set=fl;function bn(d,g){var S=be(d)||As(d)?wo(d.length,String):[],C=S.length,z=!!C;for(var F in d)(g||se.call(d,F))&&!(z&&(F=="length"||Cn(F,C)))&&S.push(F);return S}function Wr(d,g){for(var S=d.length;S--;)if(Ss(d[S][0],g))return S;return-1}function pl(d,g,S){for(var C=-1,z=d.length;++C<z;){var F=d[C],W=g(F);if(W!=null&&(lt===void 0?W===W&&!gr(W):S(W,lt)))var lt=W,dt=F}return dt}function Ye(d,g){g=Kr(g,d)?[g]:bs(g);for(var S=0,C=g.length;d!=null&&S<C;)d=d[Rr(g[S++])];return S&&S==C?d:void 0}function ml(d){return We.call(d)}function gl(d,g){return d>g}function Es(d,g){return d!=null&&g in Object(d)}function Ts(d,g,S,C,z){return d===g?!0:d==null||g==null||!qr(d)&&!Zr(g)?d!==d&&g!==g:yl(d,g,Ts,S,C,z)}function yl(d,g,S,C,z,F){var W=be(d),lt=be(g),dt=h,gt=h;W||(dt=ce(d),dt=dt==u?E:dt),lt||(gt=ce(g),gt=gt==u?E:gt);var Rt=dt==E&&!vi(d),Ft=gt==E&&!vi(g),y=dt==gt;if(y&&!Rt)return F||(F=new kt),W||Ro(d)?An(d,g,S,C,z,F):bl(d,g,dt,S,C,z,F);if(!(z&o)){var b=Rt&&se.call(d,"__wrapped__"),R=Ft&&se.call(g,"__wrapped__");if(b||R){var k=b?d.value():d,K=R?g.value():g;return F||(F=new kt),S(k,K,C,z,F)}}return y?(F||(F=new kt),Sl(d,g,S,C,z,F)):!1}function vl(d,g,S,C){var z=S.length,F=z,W=!C;if(d==null)return!F;for(d=Object(d);z--;){var lt=S[z];if(W&&lt[2]?lt[1]!==d[lt[0]]:!(lt[0]in d))return!1}for(;++z<F;){lt=S[z];var dt=lt[0],gt=d[dt],Rt=lt[1];if(W&&lt[2]){if(gt===void 0&&!(dt in d))return!1}else{var Ft=new kt;if(C)var y=C(gt,Rt,dt,d,g,Ft);if(!(y===void 0?Ts(Rt,gt,C,s|o,Ft):y))return!1}}return!0}function Sn(d){if(!qr(d)||Pn(d))return!1;var g=Ti(d)||vi(d)?Va:It;return g.test(de(d))}function Io(d){return Zr(d)&&qe(d.length)&&!!Y[We.call(d)]}function _l(d){return typeof d=="function"?d:d==null?Mo:typeof d=="object"?be(d)?El(d[0],d[1]):ws(d):Ps(d)}function xl(d){if(!Il(d))return Co(d);var g=[];for(var S in Object(d))se.call(d,S)&&S!="constructor"&&g.push(S);return g}function ws(d){var g=Al(d);return g.length==1&&g[0][2]?nr(g[0][0],g[0][1]):function(S){return S===d||vl(S,d,g)}}function El(d,g){return Kr(d)&&Ir(g)?nr(Rr(d),g):function(S){var C=Qr(S,d);return C===void 0&&C===g?Cs(S,d):Ts(g,C,void 0,s|o)}}function Tl(d){return function(g){return Ye(g,d)}}function wl(d){if(typeof d=="string")return d;if(gr(d))return Ki?Ki.call(d):"";var g=d+"";return g=="0"&&1/d==-a?"-0":g}function bs(d){return be(d)?d:Rl(d)}function An(d,g,S,C,z,F){var W=z&o,lt=d.length,dt=g.length;if(lt!=dt&&!(W&&dt>lt))return!1;var gt=F.get(d);if(gt&&F.get(g))return gt==g;var Rt=-1,Ft=!0,y=z&s?new Vr:void 0;for(F.set(d,g),F.set(g,d);++Rt<lt;){var b=d[Rt],R=g[Rt];if(C)var k=W?C(R,b,Rt,g,d,F):C(b,R,Rt,d,g,F);if(k!==void 0){if(k)continue;Ft=!1;break}if(y){if(!Me(g,function(K,j){if(!y.has(j)&&(b===K||S(b,K,C,z,F)))return y.add(j)})){Ft=!1;break}}else if(!(b===R||S(b,R,C,z,F))){Ft=!1;break}}return F.delete(d),F.delete(g),Ft}function bl(d,g,S,C,z,F,W){switch(S){case B:if(d.byteLength!=g.byteLength||d.byteOffset!=g.byteOffset)return!1;d=d.buffer,g=g.buffer;case U:return!(d.byteLength!=g.byteLength||!C(new _i(d),new _i(g)));case c:case f:case v:return Ss(+d,+g);case p:return d.name==g.name&&d.message==g.message;case w:case M:return d==g+"";case T:var lt=So;case A:var dt=F&o;if(lt||(lt=Xa),d.size!=g.size&&!dt)return!1;var gt=W.get(d);if(gt)return gt==g;F|=s,W.set(d,g);var Rt=An(lt(d),lt(g),C,z,F,W);return W.delete(d),Rt;case I:if(zr)return zr.call(d)==zr.call(g)}return!1}function Sl(d,g,S,C,z,F){var W=z&o,lt=Zi(d),dt=lt.length,gt=Zi(g),Rt=gt.length;if(dt!=Rt&&!W)return!1;for(var Ft=dt;Ft--;){var y=lt[Ft];if(!(W?y in g:se.call(g,y)))return!1}var b=F.get(d);if(b&&F.get(g))return b==g;var R=!0;F.set(d,g),F.set(g,d);for(var k=W;++Ft<dt;){y=lt[Ft];var K=d[y],j=g[y];if(C)var wt=W?C(j,K,y,g,d,F):C(K,j,y,d,g,F);if(!(wt===void 0?K===j||S(K,j,C,z,F):wt)){R=!1;break}k||(k=y=="constructor")}if(R&&!k){var St=d.constructor,Nt=g.constructor;St!=Nt&&"constructor"in d&&"constructor"in g&&!(typeof St=="function"&&St instanceof St&&typeof Nt=="function"&&Nt instanceof Nt)&&(R=!1)}return F.delete(d),F.delete(g),R}function Yr(d,g){var S=d.__data__;return Pl(g)?S[typeof g=="string"?"string":"hash"]:S.map}function Al(d){for(var g=Zi(d),S=g.length;S--;){var C=g[S],z=d[C];g[S]=[C,z,Ir(z)]}return g}function Ke(d,g){var S=bo(d,g);return Sn(S)?S:void 0}var ce=ml;(Le&&ce(new Le(new ArrayBuffer(1)))!=B||we&&ce(new we)!=T||Wi&&ce(Wi.resolve())!=_||xi&&ce(new xi)!=A||Ei&&ce(new Ei)!=P)&&(ce=function(d){var g=We.call(d),S=g==E?d.constructor:void 0,C=S?de(S):void 0;if(C)switch(C){case Wa:return B;case Ya:return T;case Ka:return _;case _s:return A;case Yi:return P}return g});function Cl(d,g,S){g=Kr(g,d)?[g]:bs(g);for(var C,z=-1,W=g.length;++z<W;){var F=Rr(g[z]);if(!(C=d!=null&&S(d,F)))break;d=d[F]}if(C)return C;var W=d?d.length:0;return!!W&&qe(W)&&Cn(F,W)&&(be(d)||As(d))}function Cn(d,g){return g=g??l,!!g&&(typeof d=="number"||Bt.test(d))&&d>-1&&d%1==0&&d<g}function Kr(d,g){if(be(d))return!1;var S=typeof d;return S=="number"||S=="symbol"||S=="boolean"||d==null||gr(d)?!0:D.test(d)||!L.test(d)||g!=null&&d in Object(g)}function Pl(d){var g=typeof d;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?d!=="__proto__":d===null}function Pn(d){return!!Vi&&Vi in d}function Il(d){var g=d&&d.constructor,S=typeof g=="function"&&g.prototype||Xr;return d===S}function Ir(d){return d===d&&!qr(d)}function nr(d,g){return function(S){return S==null?!1:S[d]===g&&(g!==void 0||d in Object(S))}}var Rl=qi(function(d){d=Oo(d);var g=[];return nt.test(d)&&g.push(""),d.replace(_t,function(S,C,z,F){g.push(z?F.replace(Ut,"$1"):C||S)}),g});function Rr(d){if(typeof d=="string"||gr(d))return d;var g=d+"";return g=="0"&&1/d==-a?"-0":g}function de(d){if(d!=null){try{return gs.call(d)}catch{}try{return d+""}catch{}}return""}function qi(d,g){if(typeof d!="function"||g&&typeof g!="function")throw new TypeError(i);var S=function(){var C=arguments,z=g?g.apply(this,C):C[0],F=S.cache;if(F.has(z))return F.get(z);var W=d.apply(this,C);return S.cache=F.set(z,W),W};return S.cache=new(qi.Cache||ae),S}qi.Cache=ae;function Ss(d,g){return d===g||d!==d&&g!==g}function As(d){return Ol(d)&&se.call(d,"callee")&&(!vs.call(d,"callee")||We.call(d)==u)}var be=Array.isArray;function In(d){return d!=null&&qe(d.length)&&!Ti(d)}function Ol(d){return Zr(d)&&In(d)}function Ti(d){var g=qr(d)?We.call(d):"";return g==m||g==x}function qe(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=l}function qr(d){var g=typeof d;return!!d&&(g=="object"||g=="function")}function Zr(d){return!!d&&typeof d=="object"}function gr(d){return typeof d=="symbol"||Zr(d)&&We.call(d)==I}var Ro=zi?Ha(zi):Io;function Oo(d){return d==null?"":wl(d)}function Qr(d,g,S){var C=d==null?void 0:Ye(d,g);return C===void 0?S:C}function Cs(d,g){return d!=null&&Cl(d,g,Es)}function Zi(d){return In(d)?bn(d):xl(d)}function Mo(d){return d}function Ps(d){return Kr(d)?To(Rr(d)):Tl(d)}function wi(d,g){return d&&d.length?pl(d,_l(g),gl):void 0}r.exports=wi})(Fd,Fd.exports);var HB=Fd.exports;const Nd=ls(HB);var Bd={exports:{}};Bd.exports;(function(r,t){var e=200,i="Expected a function",n="__lodash_hash_undefined__",s=1,o=2,a=1/0,l=9007199254740991,u="[object Arguments]",h="[object Array]",c="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",x="[object GeneratorFunction]",T="[object Map]",v="[object Number]",E="[object Object]",_="[object Promise]",w="[object RegExp]",A="[object Set]",M="[object String]",I="[object Symbol]",P="[object WeakMap]",U="[object ArrayBuffer]",B="[object DataView]",st="[object Float32Array]",X="[object Float64Array]",O="[object Int8Array]",G="[object Int16Array]",tt="[object Int32Array]",at="[object Uint8Array]",et="[object Uint8ClampedArray]",N="[object Uint16Array]",Q="[object Uint32Array]",L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D=/^\w*$/,nt=/^\./,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/[\\^$.*+?()[\]{}|]/g,Ut=/\\(\\)?/g,It=/^\[object .+?Constructor\]$/,Bt=/^(?:0|[1-9]\d*)$/,Y={};Y[st]=Y[X]=Y[O]=Y[G]=Y[tt]=Y[at]=Y[et]=Y[N]=Y[Q]=!0,Y[u]=Y[h]=Y[U]=Y[c]=Y[B]=Y[f]=Y[p]=Y[m]=Y[T]=Y[v]=Y[E]=Y[w]=Y[A]=Y[M]=Y[P]=!1;var ne=typeof me=="object"&&me&&me.Object===Object&&me,Kt=typeof self=="object"&&self&&self.Object===Object&&self,pt=ne||Kt||Function("return this")(),Gt=t&&!t.nodeType&&t,Ht=Gt&&!0&&r&&!r.nodeType&&r,vt=Ht&&Ht.exports===Gt,Te=vt&&ne.process,ir=function(){try{return Te&&Te.binding("util")}catch{}}(),zi=ir&&ir.isTypedArray;function Me(d,g){for(var S=-1,C=d?d.length:0;++S<C;)if(g(d[S],S,d))return!0;return!1}function To(d){return function(g){return g==null?void 0:g[d]}}function wo(d,g){for(var S=-1,C=Array(d);++S<d;)C[S]=g(S);return C}function Ha(d){return function(g){return d(g)}}function bo(d,g){return d==null?void 0:d[g]}function vi(d){var g=!1;if(d!=null&&typeof d.toString!="function")try{g=!!(d+"")}catch{}return g}function So(d){var g=-1,S=Array(d.size);return d.forEach(function(C,z){S[++g]=[z,C]}),S}function $a(d,g){return function(S){return d(g(S))}}function Xa(d){var g=-1,S=Array(d.size);return d.forEach(function(C){S[++g]=C}),S}var za=Array.prototype,ja=Function.prototype,Xr=Object.prototype,ji=pt["__core-js_shared__"],Vi=function(){var d=/[^.]+$/.exec(ji&&ji.keys&&ji.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),gs=ja.toString,se=Xr.hasOwnProperty,We=Xr.toString,Va=RegExp("^"+gs.call(se).replace(yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ys=pt.Symbol,_i=pt.Uint8Array,vs=Xr.propertyIsEnumerable,Ao=za.splice,Co=$a(Object.keys,Object),Le=Ke(pt,"DataView"),we=Ke(pt,"Map"),Wi=Ke(pt,"Promise"),xi=Ke(pt,"Set"),Ei=Ke(pt,"WeakMap"),fr=Ke(Object,"create"),Wa=de(Le),Ya=de(we),Ka=de(Wi),_s=de(xi),Yi=de(Ei),pr=ys?ys.prototype:void 0,zr=pr?pr.valueOf:void 0,Ki=pr?pr.toString:void 0;function oe(d){var g=-1,S=d?d.length:0;for(this.clear();++g<S;){var C=d[g];this.set(C[0],C[1])}}function qa(){this.__data__=fr?fr(null):{}}function Za(d){return this.has(d)&&delete this.__data__[d]}function Qa(d){var g=this.__data__;if(fr){var S=g[d];return S===n?void 0:S}return se.call(g,d)?g[d]:void 0}function Ja(d){var g=this.__data__;return fr?g[d]!==void 0:se.call(g,d)}function tl(d,g){var S=this.__data__;return S[d]=fr&&g===void 0?n:g,this}oe.prototype.clear=qa,oe.prototype.delete=Za,oe.prototype.get=Qa,oe.prototype.has=Ja,oe.prototype.set=tl;function Wt(d){var g=-1,S=d?d.length:0;for(this.clear();++g<S;){var C=d[g];this.set(C[0],C[1])}}function xs(){this.__data__=[]}function Po(d){var g=this.__data__,S=Wr(g,d);if(S<0)return!1;var C=g.length-1;return S==C?g.pop():Ao.call(g,S,1),!0}function jr(d){var g=this.__data__,S=Wr(g,d);return S<0?void 0:g[S][1]}function el(d){return Wr(this.__data__,d)>-1}function rl(d,g){var S=this.__data__,C=Wr(S,d);return C<0?S.push([d,g]):S[C][1]=g,this}Wt.prototype.clear=xs,Wt.prototype.delete=Po,Wt.prototype.get=jr,Wt.prototype.has=el,Wt.prototype.set=rl;function ae(d){var g=-1,S=d?d.length:0;for(this.clear();++g<S;){var C=d[g];this.set(C[0],C[1])}}function il(){this.__data__={hash:new oe,map:new(we||Wt),string:new oe}}function nl(d){return Yr(this,d).delete(d)}function mr(d){return Yr(this,d).get(d)}function sl(d){return Yr(this,d).has(d)}function ol(d,g){return Yr(this,d).set(d,g),this}ae.prototype.clear=il,ae.prototype.delete=nl,ae.prototype.get=mr,ae.prototype.has=sl,ae.prototype.set=ol;function Vr(d){var g=-1,S=d?d.length:0;for(this.__data__=new ae;++g<S;)this.add(d[g])}function al(d){return this.__data__.set(d,n),this}function ll(d){return this.__data__.has(d)}Vr.prototype.add=Vr.prototype.push=al,Vr.prototype.has=ll;function kt(d){this.__data__=new Wt(d)}function ul(){this.__data__=new Wt}function hl(d){return this.__data__.delete(d)}function cl(d){return this.__data__.get(d)}function dl(d){return this.__data__.has(d)}function fl(d,g){var S=this.__data__;if(S instanceof Wt){var C=S.__data__;if(!we||C.length<e-1)return C.push([d,g]),this;S=this.__data__=new ae(C)}return S.set(d,g),this}kt.prototype.clear=ul,kt.prototype.delete=hl,kt.prototype.get=cl,kt.prototype.has=dl,kt.prototype.set=fl;function bn(d,g){var S=be(d)||As(d)?wo(d.length,String):[],C=S.length,z=!!C;for(var F in d)(g||se.call(d,F))&&!(z&&(F=="length"||Cn(F,C)))&&S.push(F);return S}function Wr(d,g){for(var S=d.length;S--;)if(Ss(d[S][0],g))return S;return-1}function pl(d,g,S){for(var C=-1,z=d.length;++C<z;){var F=d[C],W=g(F);if(W!=null&&(lt===void 0?W===W&&!gr(W):S(W,lt)))var lt=W,dt=F}return dt}function Ye(d,g){g=Kr(g,d)?[g]:bs(g);for(var S=0,C=g.length;d!=null&&S<C;)d=d[Rr(g[S++])];return S&&S==C?d:void 0}function ml(d){return We.call(d)}function gl(d,g){return d!=null&&g in Object(d)}function Es(d,g,S,C,z){return d===g?!0:d==null||g==null||!qr(d)&&!Zr(g)?d!==d&&g!==g:Ts(d,g,Es,S,C,z)}function Ts(d,g,S,C,z,F){var W=be(d),lt=be(g),dt=h,gt=h;W||(dt=ce(d),dt=dt==u?E:dt),lt||(gt=ce(g),gt=gt==u?E:gt);var Rt=dt==E&&!vi(d),Ft=gt==E&&!vi(g),y=dt==gt;if(y&&!Rt)return F||(F=new kt),W||Ro(d)?An(d,g,S,C,z,F):bl(d,g,dt,S,C,z,F);if(!(z&o)){var b=Rt&&se.call(d,"__wrapped__"),R=Ft&&se.call(g,"__wrapped__");if(b||R){var k=b?d.value():d,K=R?g.value():g;return F||(F=new kt),S(k,K,C,z,F)}}return y?(F||(F=new kt),Sl(d,g,S,C,z,F)):!1}function yl(d,g,S,C){var z=S.length,F=z,W=!C;if(d==null)return!F;for(d=Object(d);z--;){var lt=S[z];if(W&&lt[2]?lt[1]!==d[lt[0]]:!(lt[0]in d))return!1}for(;++z<F;){lt=S[z];var dt=lt[0],gt=d[dt],Rt=lt[1];if(W&&lt[2]){if(gt===void 0&&!(dt in d))return!1}else{var Ft=new kt;if(C)var y=C(gt,Rt,dt,d,g,Ft);if(!(y===void 0?Es(Rt,gt,C,s|o,Ft):y))return!1}}return!0}function vl(d){if(!qr(d)||Pn(d))return!1;var g=Ti(d)||vi(d)?Va:It;return g.test(de(d))}function Sn(d){return Zr(d)&&qe(d.length)&&!!Y[We.call(d)]}function Io(d){return typeof d=="function"?d:d==null?Mo:typeof d=="object"?be(d)?El(d[0],d[1]):ws(d):Ps(d)}function _l(d){if(!Il(d))return Co(d);var g=[];for(var S in Object(d))se.call(d,S)&&S!="constructor"&&g.push(S);return g}function xl(d,g){return d<g}function ws(d){var g=Al(d);return g.length==1&&g[0][2]?nr(g[0][0],g[0][1]):function(S){return S===d||yl(S,d,g)}}function El(d,g){return Kr(d)&&Ir(g)?nr(Rr(d),g):function(S){var C=Qr(S,d);return C===void 0&&C===g?Cs(S,d):Es(g,C,void 0,s|o)}}function Tl(d){return function(g){return Ye(g,d)}}function wl(d){if(typeof d=="string")return d;if(gr(d))return Ki?Ki.call(d):"";var g=d+"";return g=="0"&&1/d==-a?"-0":g}function bs(d){return be(d)?d:Rl(d)}function An(d,g,S,C,z,F){var W=z&o,lt=d.length,dt=g.length;if(lt!=dt&&!(W&&dt>lt))return!1;var gt=F.get(d);if(gt&&F.get(g))return gt==g;var Rt=-1,Ft=!0,y=z&s?new Vr:void 0;for(F.set(d,g),F.set(g,d);++Rt<lt;){var b=d[Rt],R=g[Rt];if(C)var k=W?C(R,b,Rt,g,d,F):C(b,R,Rt,d,g,F);if(k!==void 0){if(k)continue;Ft=!1;break}if(y){if(!Me(g,function(K,j){if(!y.has(j)&&(b===K||S(b,K,C,z,F)))return y.add(j)})){Ft=!1;break}}else if(!(b===R||S(b,R,C,z,F))){Ft=!1;break}}return F.delete(d),F.delete(g),Ft}function bl(d,g,S,C,z,F,W){switch(S){case B:if(d.byteLength!=g.byteLength||d.byteOffset!=g.byteOffset)return!1;d=d.buffer,g=g.buffer;case U:return!(d.byteLength!=g.byteLength||!C(new _i(d),new _i(g)));case c:case f:case v:return Ss(+d,+g);case p:return d.name==g.name&&d.message==g.message;case w:case M:return d==g+"";case T:var lt=So;case A:var dt=F&o;if(lt||(lt=Xa),d.size!=g.size&&!dt)return!1;var gt=W.get(d);if(gt)return gt==g;F|=s,W.set(d,g);var Rt=An(lt(d),lt(g),C,z,F,W);return W.delete(d),Rt;case I:if(zr)return zr.call(d)==zr.call(g)}return!1}function Sl(d,g,S,C,z,F){var W=z&o,lt=Zi(d),dt=lt.length,gt=Zi(g),Rt=gt.length;if(dt!=Rt&&!W)return!1;for(var Ft=dt;Ft--;){var y=lt[Ft];if(!(W?y in g:se.call(g,y)))return!1}var b=F.get(d);if(b&&F.get(g))return b==g;var R=!0;F.set(d,g),F.set(g,d);for(var k=W;++Ft<dt;){y=lt[Ft];var K=d[y],j=g[y];if(C)var wt=W?C(j,K,y,g,d,F):C(K,j,y,d,g,F);if(!(wt===void 0?K===j||S(K,j,C,z,F):wt)){R=!1;break}k||(k=y=="constructor")}if(R&&!k){var St=d.constructor,Nt=g.constructor;St!=Nt&&"constructor"in d&&"constructor"in g&&!(typeof St=="function"&&St instanceof St&&typeof Nt=="function"&&Nt instanceof Nt)&&(R=!1)}return F.delete(d),F.delete(g),R}function Yr(d,g){var S=d.__data__;return Pl(g)?S[typeof g=="string"?"string":"hash"]:S.map}function Al(d){for(var g=Zi(d),S=g.length;S--;){var C=g[S],z=d[C];g[S]=[C,z,Ir(z)]}return g}function Ke(d,g){var S=bo(d,g);return vl(S)?S:void 0}var ce=ml;(Le&&ce(new Le(new ArrayBuffer(1)))!=B||we&&ce(new we)!=T||Wi&&ce(Wi.resolve())!=_||xi&&ce(new xi)!=A||Ei&&ce(new Ei)!=P)&&(ce=function(d){var g=We.call(d),S=g==E?d.constructor:void 0,C=S?de(S):void 0;if(C)switch(C){case Wa:return B;case Ya:return T;case Ka:return _;case _s:return A;case Yi:return P}return g});function Cl(d,g,S){g=Kr(g,d)?[g]:bs(g);for(var C,z=-1,W=g.length;++z<W;){var F=Rr(g[z]);if(!(C=d!=null&&S(d,F)))break;d=d[F]}if(C)return C;var W=d?d.length:0;return!!W&&qe(W)&&Cn(F,W)&&(be(d)||As(d))}function Cn(d,g){return g=g??l,!!g&&(typeof d=="number"||Bt.test(d))&&d>-1&&d%1==0&&d<g}function Kr(d,g){if(be(d))return!1;var S=typeof d;return S=="number"||S=="symbol"||S=="boolean"||d==null||gr(d)?!0:D.test(d)||!L.test(d)||g!=null&&d in Object(g)}function Pl(d){var g=typeof d;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?d!=="__proto__":d===null}function Pn(d){return!!Vi&&Vi in d}function Il(d){var g=d&&d.constructor,S=typeof g=="function"&&g.prototype||Xr;return d===S}function Ir(d){return d===d&&!qr(d)}function nr(d,g){return function(S){return S==null?!1:S[d]===g&&(g!==void 0||d in Object(S))}}var Rl=qi(function(d){d=Oo(d);var g=[];return nt.test(d)&&g.push(""),d.replace(_t,function(S,C,z,F){g.push(z?F.replace(Ut,"$1"):C||S)}),g});function Rr(d){if(typeof d=="string"||gr(d))return d;var g=d+"";return g=="0"&&1/d==-a?"-0":g}function de(d){if(d!=null){try{return gs.call(d)}catch{}try{return d+""}catch{}}return""}function qi(d,g){if(typeof d!="function"||g&&typeof g!="function")throw new TypeError(i);var S=function(){var C=arguments,z=g?g.apply(this,C):C[0],F=S.cache;if(F.has(z))return F.get(z);var W=d.apply(this,C);return S.cache=F.set(z,W),W};return S.cache=new(qi.Cache||ae),S}qi.Cache=ae;function Ss(d,g){return d===g||d!==d&&g!==g}function As(d){return Ol(d)&&se.call(d,"callee")&&(!vs.call(d,"callee")||We.call(d)==u)}var be=Array.isArray;function In(d){return d!=null&&qe(d.length)&&!Ti(d)}function Ol(d){return Zr(d)&&In(d)}function Ti(d){var g=qr(d)?We.call(d):"";return g==m||g==x}function qe(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=l}function qr(d){var g=typeof d;return!!d&&(g=="object"||g=="function")}function Zr(d){return!!d&&typeof d=="object"}function gr(d){return typeof d=="symbol"||Zr(d)&&We.call(d)==I}var Ro=zi?Ha(zi):Sn;function Oo(d){return d==null?"":wl(d)}function Qr(d,g,S){var C=d==null?void 0:Ye(d,g);return C===void 0?S:C}function Cs(d,g){return d!=null&&Cl(d,g,gl)}function Zi(d){return In(d)?bn(d):_l(d)}function Mo(d){return d}function Ps(d){return Kr(d)?To(Rr(d)):Tl(d)}function wi(d,g){return d&&d.length?pl(d,Io(g),xl):void 0}r.exports=wi})(Bd,Bd.exports);var $B=Bd.exports;const kd=ls($B);class hv{constructor(t,e,i,n){ge(this,"background");this.x=t,this.y=e,this.path=i,this.pipeSprite=n,this.background=Pb(n,{fillColor:Ku.red.light,borderColor:Ku.red.dark,borderAlpha:.5})}clone(){return new hv(this.x,this.y,this.path,this.pipeSprite)}}class XB{constructor(t,e){if(this.start=t,this.end=e,t==e)throw Error(`Invalid path created [${t} -> ${e}]`)}toBlockType(){return this.sidesAreOpposite()?"straight_block":"corner_block"}sidesAreOpposite(){switch(this.start){case Mt.LEFT:return this.end==Mt.RIGHT;case Mt.RIGHT:return this.end==Mt.LEFT;case Mt.BOTTOM:return this.end==Mt.TOP;case Mt.TOP:return this.end==Mt.BOTTOM}}}const zB=[[["TB"],["TB"],["TR","LB"]],[["TB","BR"],["TB","TR"]],[["RB","LR"],["TB"],["TB"]],[["LR","LB"],["  ","TR","LR"]],[["TB"],["TB","TB"]],[["LR"],["LR","LR"]],[["LR","LR"],["  ","LR"]],[["TB"],["  ","TB"],["  ","  ","TB"]],[["  ","TB"],["BR","LT"],["TB"]],[["LR","LT"],["LB","BR"]],[["TB","TB"],["  ","TB"]],[["TB"],["TR","LR"]],[["  ","TB"],["LR","TL"]],[["LR","LB"],["  ","TB"]],[["RB","LR"],["TB"]],[["TR"]],[["TL"]],[["BR"]],[["BL"]],[["TB"],["TR"]],[["LB"],["TB"]],[["TB"]],[["LR"]]],kx=r=>{switch(r){case"T":return Mt.TOP;case"R":return Mt.RIGHT;case"B":return Mt.BOTTOM;case"L":return Mt.LEFT;case" ":return;default:throw Error(`Can't map ${r} to side`)}},jB=r=>{const t={blocks:[]};for(let e=0;e<r.length;e++)for(let i=0;i<r[e].length;i++){const n=kx(r[e][i][0]),s=kx(r[e][i][1]);n&&s&&t.blocks.push({x:i,y:e,path:new XB(n,s)})}return t},Dx=zB.map(jB);class VB{constructor(t,e,i={x:0,y:0}){ge(this,"blockContainer",new br);ge(this,"placeableBlocks",new Array);ge(this,"initialPosition");ge(this,"ring");this.stage=t,this.spriteCreator=e,this.initialPosition=i,this.ring=new lh}async respawn(){this.removeAllBlocks(),await this.populateShapeWithBlocks(),this.moveBlockToInitialPosition()}drawRing(){const t=this.measureShape(),e=t.w>t.h?t.w:t.h;this.ring.clear(),this.ring.lineStyle(10,16760065,1),this.ring.drawCircle(t.w/2,t.h/2,e),this.ring.endFill()}moveBlockToInitialPosition(){const t=this.measureShape();this.blockContainer.position.set(this.initialPosition.x+t.w,this.initialPosition.y-t.h*1)}shrink(){this.blockContainer.width*=.2,this.blockContainer.height*=.2}unShrink(){this.blockContainer.width/=.2,this.blockContainer.height/=.2}moveBlock({x:t,y:e}){this.blockContainer.position.set(t,e-this.placeableBlocks[0].background.height/2),this.drawRing()}measureShape(){var s,o,a,l;const t=((s=kd(this.placeableBlocks,u=>u.x))==null?void 0:s.x)??0,e=((o=Nd(this.placeableBlocks,u=>u.x))==null?void 0:o.x)??0,i=((a=kd(this.placeableBlocks,u=>u.y))==null?void 0:a.y)??0,n=((l=Nd(this.placeableBlocks,u=>u.y))==null?void 0:l.y)??0;return{w:(e-t+1)*this.placeableBlocks[0].background.width,h:(n-i+1)*this.placeableBlocks[0].background.height}}async populateShapeWithBlocks(){const t=Math.floor(Dx.length*Math.random());this.placeableBlocks=await Promise.all(Dx[t].blocks.map(async e=>{const i=new hv(e.x,e.y,e.path,await this.spriteCreator.createPlaceableBlock(e));return i.pipeSprite.tint=8947848,i.background.tint=8947848,i})),this.blockContainer.addChild(...this.placeableBlocks.map(e=>e.background)),this.blockContainer.addChild(...this.placeableBlocks.map(e=>e.pipeSprite)),this.blockContainer.addChild(this.ring),this.shrink(),this.addToStage()}clonePlaceableBlocks(){return this.placeableBlocks.map(t=>t.clone())}removeAllBlocks(){this.unShrink(),this.blockContainer.removeChildren()}bringToFront(){this.stage.addChild(this.blockContainer)}addToStage(){this.stage.addChild(this.blockContainer)}moveBackToInitialPosition(){this.moveBlockToInitialPosition()}}class Ux{constructor(t,e,i,n={x:0,y:0}){ge(this,"blockContainer",new br);ge(this,"placeableBlocks",new Array);ge(this,"initialPosition");ge(this,"shapeSuccessfullyPlacedCallback",()=>{});ge(this,"nextShape");this.stage=t,this.initialPosition=n,this.nextShape=new VB(t,e,n),this.nextShape.respawn().then(()=>this.respawn()),GB(this,i,t)}async respawn(){this.removeAllBlocks(),await this.populateShapeFromNextShape(),this.shapeSuccessfullyPlacedCallback(),this.moveBlockToInitialPosition()}moveBlockToInitialPosition(){const t=this.measureShape();this.blockContainer.position.set(this.initialPosition.x-t.w/2,this.initialPosition.y-t.h/2),this.nextShape.moveBlock({x:this.initialPosition.x+t.w/2+1,y:this.initialPosition.y-t.h/2-1})}measureShape(){var s,o,a,l;const t=((s=kd(this.placeableBlocks,u=>u.x))==null?void 0:s.x)??0,e=((o=Nd(this.placeableBlocks,u=>u.x))==null?void 0:o.x)??0,i=((a=kd(this.placeableBlocks,u=>u.y))==null?void 0:a.y)??0,n=((l=Nd(this.placeableBlocks,u=>u.y))==null?void 0:l.y)??0;return{w:(e-t+1)*this.placeableBlocks[0].background.width,h:(n-i+1)*this.placeableBlocks[0].background.height}}async populateShapeFromNextShape(){this.placeableBlocks=this.nextShape.clonePlaceableBlocks(),await this.nextShape.respawn(),this.blockContainer.addChild(...this.placeableBlocks.map(t=>t.background)),this.blockContainer.addChild(...this.placeableBlocks.map(t=>t.pipeSprite)),this.addToStage()}removeAllBlocks(){this.blockContainer.removeChildren()}bringToFront(){this.stage.addChild(this.blockContainer)}addToStage(){this.stage.addChild(this.blockContainer)}moveBackToInitialPosition(){this.moveBlockToInitialPosition()}disable(){this.placeableBlocks.forEach(t=>{t.pipeSprite.tint=8947848,t.background.tint=8947848,this.blockContainer.eventMode="none"})}enable(){this.placeableBlocks.forEach(t=>{t.pipeSprite.tint=16777215,t.background.tint=16777215,this.blockContainer.eventMode="static"})}}const WB=(r,t,e,i)=>{const s=new Array;if(i.landscape){const o=r.renderer.width-i.xMargin/2,a=r.renderer.height/3;let l=a;for(let u=0;u<2;u++,l+=a)s.push(new Ux(r.stage,t,e,{x:o,y:l}))}else{const o=r.renderer.height-i.yMargin/2,a=r.renderer.width/3;let l=a;for(let u=0;u<2;u++,l+=a)s.push(new Ux(r.stage,t,e,{x:l,y:o}))}return s},YB=(r,t)=>hh({width:t.blockWidth*t.columns+2*4,height:t.blockWidth*t.rows+2*4,x:r.width/2,y:r.height/2,fillAlpha:0,borderWidth:4,borderColor:7171453}),KB=r=>{Lc.set(Number(localStorage.getItem("highScore"))??0);const t=fB(r.renderer),e=new eB(r,t),i=new dB(e,t);r.stage.addChild(YB(r.renderer,t));const n=WB(r,e,i,t),s=()=>{Mb(i.grid).forEach(h=>{var c;(c=h.block)==null||c.destroy(),h.block=void 0}),n.forEach(h=>h.respawn());const l=Lc.get(),u=Md.get();u>l&&(Lc.set(u),localStorage.setItem("highScore",`${u}`)),Md.reset(),zg.set(!1)},o=()=>{zg.set(!0),Sb.set(s)},a=()=>{n.forEach(l=>l.bringToFront()),DB(n,i.grid)||o()};n.forEach(l=>{l.shapeSuccessfullyPlacedCallback=a})},Ea=document.getElementById("game-canvas-container"),cv=new bw({width:window.innerWidth,height:Ea==null?void 0:Ea.clientHeight,antialias:!1,resolution:1});cv.renderer.background.color=15527148;Ea==null||Ea.appendChild(cv.view);const qB=YN();$p.createRoot(document.getElementById("root")).render(qB.component);RN().then(()=>KB(cv));window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),console.log("","beforeinstallprompt",r),Xg.set(r)});
